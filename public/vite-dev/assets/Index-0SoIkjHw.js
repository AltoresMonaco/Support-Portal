import{_ as V,u as k,o as r,n as s,p as u,g as d,a0 as n,F as m,i as b,t as i,e as c,U as f,k as _,q as g}from"./_plugin-vue_export-helper-CvYNw_mv.js";const w={name:"FilterInput",props:{modelValue:{type:Object,default:()=>{}},filterAttributes:{type:Array,default:()=>[]},inputType:{type:String,default:"plain_text"},operators:{type:Array,default:()=>[]},dropdownValues:{type:Array,default:()=>[]},showQueryOperator:{type:Boolean,default:!1},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:()=>[]},customAttributeType:{type:String,default:""},errorMessage:{type:String,default:""}},emits:["update:modelValue","removeFilter","resetFilter"],computed:{attributeKey:{get(){return this.modelValue?this.modelValue.attribute_key:null},set(l){const e=this.modelValue||{};this.$emit("update:modelValue",{...e,attribute_key:l})}},filterOperator:{get(){return this.modelValue?this.modelValue.filter_operator:null},set(l){const e=this.modelValue||{};this.$emit("update:modelValue",{...e,filter_operator:l})}},values:{get(){return this.modelValue?this.modelValue.values:null},set(l){const e=this.modelValue||{};this.$emit("update:modelValue",{...e,values:l})}},query_operator:{get(){return this.modelValue?this.modelValue.query_operator:null},set(l){const e=this.modelValue||{};this.$emit("update:modelValue",{...e,query_operator:l})}},custom_attribute_type:{get(){return this.customAttributeType?this.customAttributeType:""},set(){const l=this.modelValue||{};this.$emit("update:modelValue",{...l,custom_attribute_type:this.customAttributeType})}}},watch:{customAttributeType:{handler(l){l==="conversation_attribute"||l==="contact_attribute"?this.modelValue.custom_attribute_type=this.customAttributeType:this.modelValue.custom_attribute_type=""},immediate:!0}},methods:{removeFilter(){this.$emit("removeFilter")},resetFilter(){this.$emit("resetFilter")},getInputErrorClass(l){return l?"bg-red-50 dark:bg-red-800/50 border-red-100 dark:border-red-700/50":"bg-slate-50 dark:bg-slate-800 border-slate-75 dark:border-slate-700/50"}}},E={class:"flex"},T=["label"],F=["value"],L=["value","disabled"],x=["value"],A={key:2,class:"flex-grow mr-1 filter__answer--wrap"},O={key:0,class:"multiselect-wrap--small"},R={key:1,class:"multiselect-wrap--small"},S={key:2,class:"multiselect-wrap--small"},U=["placeholder"],C={key:0,class:"filter-error"},I={key:0,class:"flex items-center justify-center relative my-2.5 mx-0"},B={value:"and"},M={value:"or"};function N(l,e,o,D,q,a){const h=k("multiselect"),v=k("woot-button");return r(),s("div",null,[u("div",{class:g(["p-2 border border-solid rounded-md",a.getInputErrorClass(o.errorMessage)])},[u("div",E,[o.groupedFilters?d((r(),s("select",{key:0,"onUpdate:modelValue":e[0]||(e[0]=t=>a.attributeKey=t),class:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",onChange:e[1]||(e[1]=t=>a.resetFilter())},[(r(!0),s(m,null,b(o.filterGroups,(t,y)=>(r(),s("optgroup",{key:y,label:t.name},[(r(!0),s(m,null,b(t.attributes,p=>(r(),s("option",{key:p.key,value:p.key,selected:!0},i(p.name),9,F))),128))],8,T))),128))],544)),[[n,a.attributeKey]]):d((r(),s("select",{key:1,"onUpdate:modelValue":e[2]||(e[2]=t=>a.attributeKey=t),class:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",onChange:e[3]||(e[3]=t=>a.resetFilter())},[(r(!0),s(m,null,b(o.filterAttributes,t=>(r(),s("option",{key:t.key,value:t.key,disabled:t.disabled},i(t.name),9,L))),128))],544)),[[n,a.attributeKey]]),d(u("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.filterOperator=t),class:"bg-white dark:bg-slate-900 max-w-[20%] mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600"},[(r(!0),s(m,null,b(o.operators,(t,y)=>(r(),s("option",{key:y,value:t.value},i(l.$t(`FILTER.OPERATOR_LABELS.${t.value}`)),9,x))),128))],512),[[n,a.filterOperator]]),o.showUserInput?(r(),s("div",A,[o.inputType==="multi_select"?(r(),s("div",O,[c(h,{modelValue:a.values,"onUpdate:modelValue":e[5]||(e[5]=t=>a.values=t),"track-by":"id",label:"name",placeholder:"Select",multiple:"","selected-label":"","select-label":l.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:o.dropdownValues,"allow-empty":!1},null,8,["modelValue","select-label","options"])])):o.inputType==="search_select"?(r(),s("div",R,[c(h,{modelValue:a.values,"onUpdate:modelValue":e[6]||(e[6]=t=>a.values=t),"track-by":"id",label:"name",placeholder:"Select","selected-label":"","select-label":l.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:o.dropdownValues,"allow-empty":!1,"option-height":104},null,8,["modelValue","select-label","options"])])):o.inputType==="date"?(r(),s("div",S,[d(u("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>a.values=t),type:"date",editable:!1,class:"mb-0 datepicker"},null,512),[[f,a.values]])])):d((r(),s("input",{key:3,"onUpdate:modelValue":e[8]||(e[8]=t=>a.values=t),type:"text",class:"mb-0",placeholder:l.$t("FILTER.INPUT_PLACEHOLDER")},null,8,U)),[[f,a.values]])])):_("",!0),c(v,{icon:"dismiss",variant:"clear","color-scheme":"secondary",onClick:a.removeFilter},null,8,["onClick"])]),o.errorMessage?(r(),s("p",C,i(o.errorMessage),1)):_("",!0)],2),o.showQueryOperator?(r(),s("div",I,[e[10]||(e[10]=u("hr",{class:"absolute w-full border-b border-solid border-slate-75 dark:border-slate-800"},null,-1)),d(u("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>a.query_operator=t),class:"relative w-auto mb-0 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600"},[u("option",B,i(l.$t("FILTER.QUERY_DROPDOWN_LABELS.AND")),1),u("option",M,i(l.$t("FILTER.QUERY_DROPDOWN_LABELS.OR")),1)],512),[[n,a.query_operator]])])):_("",!0)])}const P=V(w,[["render",N],["__scopeId","data-v-70e4006a"]]);export{P as F};
