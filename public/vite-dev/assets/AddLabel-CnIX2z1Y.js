import{m as b}from"./globalConfig-DaGjiImb.js";import{u as L}from"./index-BaHWIRRA.js";import{r as p,m as f,u as R}from"./index-C2DForDf.js";import{g}from"./labelColor-5G4vXyDu.js";import{_ as O,u as n,o as w,n as B,e as i,p as r,q as E,m as c,t as d,g as C,a1 as T,l as m,f as h}from"./_plugin-vue_export-helper-CvYNw_mv.js";const v=(e="")=>!!e&&!e.includes(" "),S=e=>{let t="";return e.title.$error?e.title.required?e.title.minLength?e.title.validLabelCharacters||(t="LABEL_MGMT.FORM.NAME.VALID_ERROR"):t="LABEL_MGMT.FORM.NAME.MINIMUM_LENGTH_ERROR":t="LABEL_MGMT.FORM.NAME.REQUIRED_ERROR":t="",t},G={title:{required:p,minLength:f(2),validLabelCharacters:v},description:{},color:{required:p},showOnSidebar:{}},D={props:{prefillTitle:{type:String,default:""}},emits:["close"],setup(){return{v$:R()}},data(){return{color:"#000",description:"",title:"",showOnSidebar:!0}},validations:G,computed:{...b({uiFlags:"labels/getUIFlags"}),labelTitleErrorMessage(){const e=S(this.v$);return this.$t(e)}},mounted(){this.color=g(),this.title=this.prefillTitle.toLowerCase()},methods:{onClose(){this.$emit("close")},async addLabel(){try{await this.$store.dispatch("labels/create",{color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}),L(this.$t("LABEL_MGMT.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(e){const t=e.message||this.$t("LABEL_MGMT.ADD.API.ERROR_MESSAGE");L(t)}}}},I={class:"flex flex-col h-auto overflow-auto"},$={class:"w-full"},F={class:"flex items-center w-full gap-2"},V={for:"conversation_creation"},N={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function k(e,t,U,s,l,a){const A=n("woot-modal-header"),u=n("woot-input"),_=n("woot-color-picker"),M=n("woot-button");return w(),B("div",I,[i(A,{"header-title":e.$t("LABEL_MGMT.ADD.TITLE"),"header-content":e.$t("LABEL_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),r("form",{class:"flex flex-wrap mx-0",onSubmit:t[4]||(t[4]=h((...o)=>a.addLabel&&a.addLabel(...o),["prevent"]))},[i(u,{modelValue:l.title,"onUpdate:modelValue":t[0]||(t[0]=o=>l.title=o),class:E([{error:s.v$.title.$error},"w-full label-name--input"]),label:e.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:a.labelTitleErrorMessage,"data-testid":"label-title",onInput:s.v$.title.$touch,onBlur:s.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),i(u,{modelValue:l.description,"onUpdate:modelValue":t[1]||(t[1]=o=>l.description=o),class:E([{error:s.v$.description.$error},"w-full"]),label:e.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:e.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),"data-testid":"label-description",onInput:s.v$.description.$touch,onBlur:s.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),r("div",$,[r("label",null,[c(d(e.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),i(_,{modelValue:l.color,"onUpdate:modelValue":t[2]||(t[2]=o=>l.color=o)},null,8,["modelValue"])])]),r("div",F,[C(r("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.showOnSidebar=o),type:"checkbox",value:!0},null,512),[[T,l.showOnSidebar]]),r("label",V,d(e.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),r("div",N,[i(M,{"is-disabled":s.v$.title.$invalid||e.uiFlags.isCreating,"is-loading":e.uiFlags.isCreating,"data-testid":"label-submit"},{default:m(()=>[c(d(e.$t("LABEL_MGMT.FORM.CREATE")),1)]),_:1},8,["is-disabled","is-loading"]),i(M,{class:"button clear",onClick:h(a.onClose,["prevent"])},{default:m(()=>[c(d(e.$t("LABEL_MGMT.FORM.CANCEL")),1)]),_:1},8,["onClick"])])],32)])}const j=O(D,[["render",k],["__scopeId","data-v-f7056347"]]);export{j as A,S as g,G as v};
