import{c as i,r as p,o as t,n as r,e as S,l as v,p as a,a as c,t as d,F as P,i as B,k as E,u as m,H,L as f,g as y}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as k}from"./index-BaHWIRRA.js";import{j as U}from"./dashboard-CGLIihvy.js";import{_ as z}from"./BaseSettingsHeader-CxIYpdLq.js";import{c as V,u as W}from"./mutationHelpers-3VTcoJiD.js";import{u as X}from"./globalConfig-DaGjiImb.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./axios-CCb-kr4I.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./Thumbnail-DLjRBBx8.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./index-C2DForDf.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./index-DaWXXnfb.js";import"./BackButton-YZy1EtJv.js";const Y={class:"flex-1 overflow-auto"},q={class:"button__content"},J={class:"mt-6 flex-1 text-slate-700 dark:text-slate-300"},K={key:1,class:"flex flex-col items-center justify-center h-full text-base p-8"},Q={key:2,class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},Z={class:"divide-y divide-slate-50 dark:divide-slate-800"},ee={class:"py-4 pr-4"},te={class:"block font-medium capitalize"},oe={class:"mb-0"},se={class:"py-4 flex justify-end gap-1"},Re={__name:"Index",setup(ae){const D=V(),{t:n}=X(),I=W(),N=i(()=>I["teams/getTeams"].value),G=i(()=>I["teams/getUIFlags"].value),{isAdmin:u}=U(),T=p({}),L=async({id:e})=>{try{T.value[e]=!0,await D.dispatch("teams/delete",e),k(n("TEAMS_SETTINGS.DELETE.API.SUCCESS_MESSAGE"))}catch{k(n("TEAMS_SETTINGS.DELETE.API.ERROR_MESSAGE"))}finally{T.value[e]=!1}},l=p(!1),s=p({}),C=e=>{l.value=!0,s.value=e},A=()=>{l.value=!1,s.value={}},w=()=>{L(s.value),A()},x=i(()=>`${n("TEAMS_SETTINGS.DELETE.CONFIRM.YES")} ${s.value.name}`),O=i(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.NO")),R=i(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.TITLE",{teamName:s.value.name})),$=i(()=>n("TEAMS_SETTINGS.DELETE.CONFIRM.PLACE_HOLDER",{teamName:s.value.name}));return(e,_)=>{const b=m("fluent-icon"),g=m("router-link"),F=m("woot-loading-state"),h=m("woot-button"),j=m("woot-confirm-delete-modal"),M=H("tooltip");return t(),r("div",Y,[S(z,{title:e.$t("TEAMS_SETTINGS.HEADER"),description:e.$t("TEAMS_SETTINGS.DESCRIPTION"),"link-text":e.$t("TEAMS_SETTINGS.LEARN_MORE"),"feature-name":"team_management"},{actions:v(()=>[f(u)?(t(),c(g,{key:0,to:{name:"settings_teams_new"},class:"button rounded-md primary"},{default:v(()=>[S(b,{icon:"add-circle"}),a("span",q,d(e.$t("TEAMS_SETTINGS.NEW_TEAM")),1)]),_:1})):E("",!0)]),_:1},8,["title","description","link-text"]),a("div",J,[G.value.isFetching?(t(),c(F,{key:0,message:e.$t("TEAMS_SETTINGS.LOADING")},null,8,["message"])):N.value.length?(t(),r("table",Q,[a("tbody",Z,[(t(!0),r(P,null,B(N.value,o=>(t(),r("tr",{key:o.id},[a("td",ee,[a("span",te,d(o.name),1),a("p",oe,d(o.description),1)]),a("td",se,[S(g,{to:{name:"settings_teams_edit",params:{teamId:o.id}}},{default:v(()=>[f(u)?y((t(),c(h,{key:0,variant:"smooth",size:"tiny","color-scheme":"secondary","class-names":"grey-btn",icon:"settings"},null,512)),[[M,e.$t("TEAMS_SETTINGS.LIST.EDIT_TEAM"),void 0,{top:!0}]]):E("",!0)]),_:2},1032,["to"]),f(u)?y((t(),c(h,{key:0,variant:"smooth","color-scheme":"alert",size:"tiny",icon:"dismiss-circle","class-names":"grey-btn","is-loading":T.value[o.id],onClick:ne=>C(o)},null,8,["is-loading","onClick"])),[[M,e.$t("TEAMS_SETTINGS.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):E("",!0)])]))),128))])])):(t(),r("p",K,d(e.$t("TEAMS_SETTINGS.LIST.404")),1))]),l.value?(t(),c(j,{key:0,show:l.value,"onUpdate:show":_[0]||(_[0]=o=>l.value=o),title:R.value,message:e.$t("TEAMS_SETTINGS.DELETE.CONFIRM.MESSAGE"),"confirm-text":x.value,"reject-text":O.value,"confirm-value":s.value.name,"confirm-place-holder-text":$.value,onOnConfirm:w,onOnClose:A},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):E("",!0)])}}};export{Re as default};
