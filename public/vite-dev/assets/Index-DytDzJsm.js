import{c as T,u as g,H as W,o as n,n as a,p as u,t as d,g as P,L as B,a as _,l as M,m as h,k as p,e as c,_ as f,F as N,i as y,q as C,a0 as $,a1 as v,f as L,U as X}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as j}from"./vue-router-CNCrM2WK.js";import{u as Y,m as w}from"./globalConfig-DaGjiImb.js";import{u as b,a as x}from"./index-BaHWIRRA.js";import{S as q}from"./Spinner-B-aSVz3z.js";import{E as z,o as k,an as F}from"./dashboard-CGLIihvy.js";import{_ as K}from"./UserAvatarWithName-BHDu0HJS.js";import{I as J}from"./InboxName-DzICaIqB.js";import{u as Q}from"./useMessageFormatter-CoQTTzFX.js";import{K as Z}from"./timeHelper-BT38nsET.js";import{u as U,r as I}from"./index-C2DForDf.js";import{m as V}from"./index-BGZqnxRy.js";import{a as ee}from"./mutationHelpers-3VTcoJiD.js";import{i as te}from"./index.es-CaHyKWHu.js";import"./index-BP-sUqpX.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./axios-CCb-kr4I.js";import"./globalConfigMixin-BNbqaRx5.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./utils.esm-CA3tRshB.js";import"./Thumbnail-DLjRBBx8.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./exports-CsC-x4VI.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./index-DaWXXnfb.js";import"./index-BO4rcqbh.js";const G={ONGOING:"ongoing",ONE_OFF:"one_off"},R=()=>{const e=j(),t=T(()=>({ongoing_campaigns:G.ONGOING,one_off:G.ONE_OFF})[e.name]),l=T(()=>t.value===G.ONGOING),s=T(()=>t.value===G.ONE_OFF);return{campaignType:t,isOngoingType:l,isOneOffType:s}},se={class:"px-5 py-4 mb-2 bg-white border rounded-md dark:bg-slate-800 border-slate-50 dark:border-slate-900"},oe={class:"flex flex-row items-start justify-between"},ne={class:"flex flex-col"},ie={class:"mb-1 -mt-1 text-base font-medium text-slate-900 dark:text-slate-100"},le={class:"text-sm line-clamp-1 [&>p]:mb-0"},re={class:"flex flex-row space-x-4"},ae={class:"flex flex-row items-center mt-5 space-x-3"},de=["title"],me={key:2,class:"w-1/4 mb-1 text-xs text-slate-700 dark:text-slate-500"},ue={__name:"CampaignCard",props:{campaign:{type:Object,required:!0},isOngoingType:{type:Boolean,default:!0}},emits:["edit","delete"],setup(e,{emit:t}){const l=e,s=t,{t:o}=Y(),{formatMessage:r}=Q(),O=T(()=>l.isOngoingType?l.campaign.enabled?o("CAMPAIGN.LIST.STATUS.ENABLED"):o("CAMPAIGN.LIST.STATUS.DISABLED"):l.campaign.campaign_status==="completed"?o("CAMPAIGN.LIST.STATUS.COMPLETED"):o("CAMPAIGN.LIST.STATUS.ACTIVE")),A=T(()=>l.isOngoingType?l.campaign.enabled?"success":"secondary":l.campaign.campaign_status==="completed"?"secondary":"success");return(D,E)=>{const i=g("woot-button"),S=g("woot-label"),m=W("dompurify-html");return n(),a("div",se,[u("div",oe,[u("div",ne,[u("div",ie,d(e.campaign.title),1),P(u("div",le,null,512),[[m,B(r)(e.campaign.message)]])]),u("div",re,[e.isOngoingType?(n(),_(i,{key:0,variant:"link",icon:"edit","color-scheme":"secondary",size:"small",onClick:E[0]||(E[0]=H=>s("edit",e.campaign))},{default:M(()=>[h(d(D.$t("CAMPAIGN.LIST.BUTTONS.EDIT")),1)]),_:1})):p("",!0),c(i,{variant:"link",icon:"dismiss-circle",size:"small","color-scheme":"secondary",onClick:E[1]||(E[1]=H=>s("delete",e.campaign))},{default:M(()=>[h(d(D.$t("CAMPAIGN.LIST.BUTTONS.DELETE")),1)]),_:1})])]),u("div",ae,[c(S,{small:"",title:O.value,"color-scheme":A.value,class:"mr-3 text-xs"},null,8,["title","color-scheme"]),c(J,{inbox:e.campaign.inbox,class:"mb-1 ltr:ml-0 rtl:mr-0"},null,8,["inbox"]),e.campaign.sender?(n(),_(K,{key:0,user:e.campaign.sender,class:"mb-1"},null,8,["user"])):p("",!0),e.campaign.trigger_rules.url?(n(),a("div",{key:1,title:e.campaign.trigger_rules.url,class:"w-1/4 mb-1 text-xs text-woot-600 truncate"},d(e.campaign.trigger_rules.url),9,de)):p("",!0),e.campaign.scheduled_at?(n(),a("div",me,d(B(Z)(new Date(e.campaign.scheduled_at),"LLL d, h:mm a")),1)):p("",!0)])])}}},ce={components:{EmptyState:z,Spinner:q,CampaignCard:ue},props:{campaigns:{type:Array,default:()=>[]},showEmptyResult:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},emits:["edit","delete"],setup(){const{isOngoingType:e}=R();return{isOngoingType:e}},computed:{currentInboxId(){return this.$route.params.inboxId},inbox(){return this.$store.getters["inboxes/getInbox"](this.currentInboxId)},inboxes(){return this.isOngoingType?this.$store.getters["inboxes/getWebsiteInboxes"]:this.$store.getters["inboxes/getTwilioInboxes"]},emptyMessage(){return this.isOngoingType?this.inboxes.length?this.$t("CAMPAIGN.ONGOING.404"):this.$t("CAMPAIGN.ONGOING.INBOXES_NOT_FOUND"):this.inboxes.length?this.$t("CAMPAIGN.ONE_OFF.404"):this.$t("CAMPAIGN.ONE_OFF.INBOXES_NOT_FOUND")}}},ge={class:"flex items-center flex-col"},pe={key:0,class:"items-center flex text-base justify-center"},Ae={key:1,class:"w-full"},he={key:1,class:"w-full"};function Ee(e,t,l,s,o,r){const O=g("Spinner"),A=g("EmptyState"),D=g("CampaignCard");return n(),a("div",ge,[l.isLoading?(n(),a("div",pe,[c(O,{"color-scheme":"primary"}),u("span",null,d(e.$t("CAMPAIGN.LIST.LOADING_MESSAGE")),1)])):(n(),a("div",Ae,[l.showEmptyResult?(n(),_(A,{key:0,title:r.emptyMessage},null,8,["title"])):(n(),a("div",he,[(n(!0),a(N,null,y(l.campaigns,E=>(n(),_(D,{key:E.id,campaign:E,"is-ongoing-type":s.isOngoingType,onEdit:i=>e.$emit("edit",i),onDelete:i=>e.$emit("delete",i)},null,8,["campaign","is-ongoing-type","onEdit","onDelete"]))),128))]))]))])}const Oe=f(ce,[["render",Ee]]),Ce={components:{WootMessageEditor:k},props:{selectedCampaign:{type:Object,default:()=>{}}},emits:["onClose"],setup(){const{isOngoingType:e}=R();return{v$:U(),isOngoingType:e}},data(){return{title:"",message:"",selectedSender:"",selectedInbox:null,endPoint:"",timeOnPage:10,triggerOnlyDuringBusinessHours:!1,show:!0,enabled:!0,senderList:[]}},validations:{title:{required:I},message:{required:I},selectedSender:{required:I},endPoint:{required:I,shouldBeAValidURLPattern(e){try{return new V(e),!0}catch{return!1}},shouldStartWithHTTP(e){return e?e.startsWith("https://")||e.startsWith("http://"):!1}},timeOnPage:{required:I},selectedInbox:{required:I}},computed:{...w({uiFlags:"campaigns/getUIFlags",inboxes:"inboxes/getTwilioInboxes"}),inboxes(){return this.isOngoingType?this.$store.getters["inboxes/getWebsiteInboxes"]:this.$store.getters["inboxes/getSMSInboxes"]},pageTitle(){return`${this.$t("CAMPAIGN.EDIT.TITLE")} - ${this.selectedCampaign.title}`},sendersAndBotList(){return[{id:0,name:"Bot"},...this.senderList]}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("onClose")},async loadInboxMembers(){var e;try{const t=await this.$store.dispatch("inboxMembers/get",{inboxId:this.selectedInbox}),{data:{payload:l}}=t;this.senderList=l}catch(t){const l=((e=t==null?void 0:t.response)==null?void 0:e.message)||this.$t("CAMPAIGN.ADD.API.ERROR_MESSAGE");b(l)}},onChangeInbox(){this.loadInboxMembers()},setFormValues(){const{title:e,message:t,enabled:l,trigger_only_during_business_hours:s,inbox:{id:o},trigger_rules:{url:r,time_on_page:O},sender:A}=this.selectedCampaign;this.title=e,this.message=t,this.endPoint=r,this.timeOnPage=O,this.selectedInbox=o,this.triggerOnlyDuringBusinessHours=s,this.selectedSender=A&&A.id||0,this.enabled=l,this.loadInboxMembers()},async editCampaign(){if(this.v$.$touch(),!this.v$.$invalid)try{await this.$store.dispatch("campaigns/update",{id:this.selectedCampaign.id,title:this.title,message:this.message,inbox_id:this.selectedInbox,trigger_only_during_business_hours:this.triggerOnlyDuringBusinessHours,sender_id:this.selectedSender||null,enabled:this.enabled,trigger_rules:{url:this.endPoint,time_on_page:this.timeOnPage}}),b(this.$t("CAMPAIGN.EDIT.API.SUCCESS_MESSAGE")),this.onClose()}catch{b(this.$t("CAMPAIGN.EDIT.API.ERROR_MESSAGE"))}}}},De={class:"flex flex-col h-auto overflow-auto"},Ie={class:"w-full"},Pe={class:"editor-wrap"},Me={key:0,class:"editor-warning__message"},be=["value"],_e={key:0,class:"message"},fe=["value"],Te={key:0,class:"message"},Ne={key:0},ye={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Re(e,t,l,s,o,r){const O=g("woot-modal-header"),A=g("woot-input"),D=g("WootMessageEditor"),E=g("woot-button");return n(),a("div",De,[c(O,{"header-title":r.pageTitle},null,8,["header-title"]),u("form",{class:"flex flex-col w-full",onSubmit:t[9]||(t[9]=L((...i)=>r.editCampaign&&r.editCampaign(...i),["prevent"]))},[u("div",Ie,[c(A,{modelValue:o.title,"onUpdate:modelValue":t[0]||(t[0]=i=>o.title=i),label:e.$t("CAMPAIGN.ADD.FORM.TITLE.LABEL"),type:"text",class:C({error:s.v$.title.$error}),error:s.v$.title.$error?e.$t("CAMPAIGN.ADD.FORM.TITLE.ERROR"):"",placeholder:e.$t("CAMPAIGN.ADD.FORM.TITLE.PLACEHOLDER"),onBlur:s.v$.title.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),u("div",Pe,[u("label",null,d(e.$t("CAMPAIGN.ADD.FORM.MESSAGE.LABEL")),1),c(D,{modelValue:o.message,"onUpdate:modelValue":t[1]||(t[1]=i=>o.message=i),class:C(["message-editor",{editor_warning:s.v$.message.$error}]),"is-format-mode":"",placeholder:e.$t("CAMPAIGN.ADD.FORM.MESSAGE.PLACEHOLDER"),onInput:s.v$.message.$touch},null,8,["modelValue","class","placeholder","onInput"]),s.v$.message.$error?(n(),a("span",Me,d(e.$t("CAMPAIGN.ADD.FORM.MESSAGE.ERROR")),1)):p("",!0)]),u("label",{class:C({error:s.v$.selectedInbox.$error})},[h(d(e.$t("CAMPAIGN.ADD.FORM.INBOX.LABEL"))+" ",1),P(u("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>o.selectedInbox=i),onChange:t[3]||(t[3]=i=>r.onChangeInbox(i))},[(n(!0),a(N,null,y(r.inboxes,i=>(n(),a("option",{key:i.id,value:i.id},d(i.name),9,be))),128))],544),[[$,o.selectedInbox]]),s.v$.selectedInbox.$error?(n(),a("span",_e,d(e.$t("CAMPAIGN.ADD.FORM.INBOX.ERROR")),1)):p("",!0)],2),u("label",{class:C({error:s.v$.selectedSender.$error})},[h(d(e.$t("CAMPAIGN.ADD.FORM.SENT_BY.LABEL"))+" ",1),P(u("select",{"onUpdate:modelValue":t[4]||(t[4]=i=>o.selectedSender=i)},[(n(!0),a(N,null,y(r.sendersAndBotList,i=>(n(),a("option",{key:i.name,value:i.id},d(i.name),9,fe))),128))],512),[[$,o.selectedSender]]),s.v$.selectedSender.$error?(n(),a("span",Te,d(e.$t("CAMPAIGN.ADD.FORM.SENT_BY.ERROR")),1)):p("",!0)],2),c(A,{modelValue:o.endPoint,"onUpdate:modelValue":t[5]||(t[5]=i=>o.endPoint=i),label:e.$t("CAMPAIGN.ADD.FORM.END_POINT.LABEL"),type:"text",class:C({error:s.v$.endPoint.$error}),error:s.v$.endPoint.$error?e.$t("CAMPAIGN.ADD.FORM.END_POINT.ERROR"):"",placeholder:e.$t("CAMPAIGN.ADD.FORM.END_POINT.PLACEHOLDER"),onBlur:s.v$.endPoint.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),c(A,{modelValue:o.timeOnPage,"onUpdate:modelValue":t[6]||(t[6]=i=>o.timeOnPage=i),label:e.$t("CAMPAIGN.ADD.FORM.TIME_ON_PAGE.LABEL"),type:"text",class:C({error:s.v$.timeOnPage.$error}),error:s.v$.timeOnPage.$error?e.$t("CAMPAIGN.ADD.FORM.TIME_ON_PAGE.ERROR"):"",placeholder:e.$t("CAMPAIGN.ADD.FORM.TIME_ON_PAGE.PLACEHOLDER"),onBlur:s.v$.timeOnPage.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),u("label",null,[P(u("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>o.enabled=i),type:"checkbox",value:"enabled",name:"enabled"},null,512),[[v,o.enabled]]),h(" "+d(e.$t("CAMPAIGN.ADD.FORM.ENABLED")),1)]),s.isOngoingType?(n(),a("label",Ne,[P(u("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>o.triggerOnlyDuringBusinessHours=i),type:"checkbox",value:"triggerOnlyDuringBusinessHours",name:"triggerOnlyDuringBusinessHours"},null,512),[[v,o.triggerOnlyDuringBusinessHours]]),h(" "+d(e.$t("CAMPAIGN.ADD.FORM.TRIGGER_ONLY_BUSINESS_HOURS")),1)])):p("",!0)]),u("div",ye,[c(E,{"is-loading":e.uiFlags.isCreating},{default:M(()=>[h(d(e.$t("CAMPAIGN.EDIT.UPDATE_BUTTON_TEXT")),1)]),_:1},8,["is-loading"]),c(E,{variant:"clear",onClick:L(r.onClose,["prevent"])},{default:M(()=>[h(d(e.$t("CAMPAIGN.ADD.CANCEL_BUTTON_TEXT")),1)]),_:1},8,["onClick"])])],32)])}const Se=f(Ce,[["render",Re],["__scopeId","data-v-1808e369"]]),Ge={components:{CampaignsTable:Oe,EditCampaign:Se},props:{type:{type:String,default:""}},setup(){const{campaignType:e}=R();return{campaignType:e}},data(){return{showEditPopup:!1,selectedCampaign:{},showDeleteConfirmationPopup:!1}},computed:{...w({uiFlags:"campaigns/getUIFlags"}),campaigns(){return this.$store.getters["campaigns/getCampaigns"](this.campaignType)},showEmptyResult(){return!this.uiFlags.isFetching&&this.campaigns.length===0}},methods:{openEditPopup(e){this.selectedCampaign=e,this.showEditPopup=!0},hideEditPopup(){this.showEditPopup=!1},openDeletePopup(e){this.showDeleteConfirmationPopup=!0,this.selectedCampaign=e},closeDeletePopup(){this.showDeleteConfirmationPopup=!1},confirmDeletion(){this.closeDeletePopup();const{id:e}=this.selectedCampaign;this.deleteCampaign(e)},async deleteCampaign(e){try{await this.$store.dispatch("campaigns/delete",e),b(this.$t("CAMPAIGN.DELETE.API.SUCCESS_MESSAGE"))}catch{b(this.$t("CAMPAIGN.DELETE.API.ERROR_MESSAGE"))}}}},$e={class:"flex-1 overflow-auto"};function ve(e,t,l,s,o,r){const O=g("CampaignsTable"),A=g("EditCampaign"),D=g("woot-modal"),E=g("woot-delete-modal");return n(),a("div",$e,[c(O,{campaigns:r.campaigns,"show-empty-result":r.showEmptyResult,"is-loading":e.uiFlags.isFetching,"campaign-type":l.type,onEdit:r.openEditPopup,onDelete:r.openDeletePopup},null,8,["campaigns","show-empty-result","is-loading","campaign-type","onEdit","onDelete"]),c(D,{show:o.showEditPopup,"onUpdate:show":t[0]||(t[0]=i=>o.showEditPopup=i),"on-close":r.hideEditPopup},{default:M(()=>[c(A,{"selected-campaign":o.selectedCampaign,onOnClose:r.hideEditPopup},null,8,["selected-campaign","onOnClose"])]),_:1},8,["show","on-close"]),c(E,{show:o.showDeleteConfirmationPopup,"onUpdate:show":t[1]||(t[1]=i=>o.showDeleteConfirmationPopup=i),"on-close":r.closeDeletePopup,"on-confirm":r.confirmDeletion,title:e.$t("CAMPAIGN.DELETE.CONFIRM.TITLE"),message:e.$t("CAMPAIGN.DELETE.CONFIRM.MESSAGE"),"confirm-text":e.$t("CAMPAIGN.DELETE.CONFIRM.YES"),"reject-text":e.$t("CAMPAIGN.DELETE.CONFIRM.NO")},null,8,["show","on-close","on-confirm","title","message","confirm-text","reject-text"])])}const Le=f(Ge,[["render",ve],["__scopeId","data-v-396f98f7"]]),we={components:{DatePicker:te},props:{confirmText:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Date,default:[]}},emits:["change"],methods:{handleChange(e){this.$emit("change",e)},disableBeforeToday(e){const t=ee(new Date,-1);return e<t}}},Be={class:"date-picker"};function xe(e,t,l,s,o,r){const O=g("DatePicker");return n(),a("div",Be,[c(O,{type:"datetime",confirm:"",clearable:!1,editable:!1,"confirm-text":l.confirmText,placeholder:l.placeholder,value:l.value,"disabled-date":r.disableBeforeToday,onChange:r.handleChange},null,8,["confirm-text","placeholder","value","disabled-date","onChange"])])}const Fe=f(we,[["render",xe]]),ke={components:{WootDateTimePicker:Fe,WootMessageEditor:k},emits:["onClose"],setup(){const{campaignType:e,isOngoingType:t,isOneOffType:l}=R();return{v$:U(),campaignType:e,isOngoingType:t,isOneOffType:l}},data(){return{title:"",message:"",selectedSender:0,selectedInbox:null,endPoint:"",timeOnPage:10,show:!0,enabled:!0,triggerOnlyDuringBusinessHours:!1,scheduledAt:null,selectedAudience:[],senderList:[]}},validations(){const e={title:{required:I},message:{required:I},selectedInbox:{required:I}};return this.isOngoingType?{...e,selectedSender:{required:I},endPoint:{required:I,shouldBeAValidURLPattern(t){try{return new V(t),!0}catch{return!1}},shouldStartWithHTTP(t){return t?t.startsWith("https://")||t.startsWith("http://"):!1}},timeOnPage:{required:I}}:{...e,selectedAudience:{isEmpty(){return!!this.selectedAudience.length}}}},computed:{...w({uiFlags:"campaigns/getUIFlags",audienceList:"labels/getLabels"}),inboxes(){return this.isOngoingType?this.$store.getters["inboxes/getWebsiteInboxes"]:this.$store.getters["inboxes/getSMSInboxes"]},sendersAndBotList(){return[{id:0,name:"Bot"},...this.senderList]}},mounted(){x(F.OPEN_NEW_CAMPAIGN_MODAL,{type:this.campaignType})},methods:{onClose(){this.$emit("onClose")},onChange(e){this.scheduledAt=e},async onChangeInbox(){var e;try{const t=await this.$store.dispatch("inboxMembers/get",{inboxId:this.selectedInbox}),{data:{payload:l}}=t;this.senderList=l}catch(t){const l=((e=t==null?void 0:t.response)==null?void 0:e.message)||this.$t("CAMPAIGN.ADD.API.ERROR_MESSAGE");b(l)}},getCampaignDetails(){let e=null;if(this.isOngoingType)e={title:this.title,message:this.message,inbox_id:this.selectedInbox,sender_id:this.selectedSender||null,enabled:this.enabled,trigger_only_during_business_hours:this.triggerOnlyDuringBusinessHours,trigger_rules:{url:this.endPoint,time_on_page:this.timeOnPage}};else{const t=this.selectedAudience.map(l=>({id:l.id,type:"Label"}));e={title:this.title,message:this.message,inbox_id:this.selectedInbox,scheduled_at:this.scheduledAt,audience:t}}return e},async addCampaign(){var e;if(this.v$.$touch(),!this.v$.$invalid)try{const t=this.getCampaignDetails();await this.$store.dispatch("campaigns/create",t),x(F.CREATE_CAMPAIGN,{type:this.campaignType}),b(this.$t("CAMPAIGN.ADD.API.SUCCESS_MESSAGE")),this.onClose()}catch(t){const l=((e=t==null?void 0:t.response)==null?void 0:e.message)||this.$t("CAMPAIGN.ADD.API.ERROR_MESSAGE");b(l)}}}},Ue={class:"flex flex-col h-auto overflow-auto"},Ve={class:"w-full"},He={key:0,class:"editor-wrap"},We={key:0,class:"editor-warning__message"},Xe=["placeholder"],je={key:0,class:"message"},Ye=["value"],qe={key:0,class:"message"},ze={key:0,class:"message"},Ke=["value"],Je={key:0,class:"message"},Qe={key:4},Ze={key:7},et={key:8},tt={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function st(e,t,l,s,o,r){const O=g("woot-modal-header"),A=g("woot-input"),D=g("WootMessageEditor"),E=g("multiselect"),i=g("WootDateTimePicker"),S=g("woot-button");return n(),a("div",Ue,[c(O,{"header-title":e.$t("CAMPAIGN.ADD.TITLE"),"header-content":e.$t("CAMPAIGN.ADD.DESC")},null,8,["header-title","header-content"]),u("form",{class:"flex flex-col w-full",onSubmit:t[12]||(t[12]=L((...m)=>r.addCampaign&&r.addCampaign(...m),["prevent"]))},[u("div",Ve,[c(A,{modelValue:o.title,"onUpdate:modelValue":t[0]||(t[0]=m=>o.title=m),label:e.$t("CAMPAIGN.ADD.FORM.TITLE.LABEL"),type:"text",class:C({error:s.v$.title.$error}),error:s.v$.title.$error?e.$t("CAMPAIGN.ADD.FORM.TITLE.ERROR"):"",placeholder:e.$t("CAMPAIGN.ADD.FORM.TITLE.PLACEHOLDER"),onBlur:s.v$.title.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),s.isOngoingType?(n(),a("div",He,[u("label",null,d(e.$t("CAMPAIGN.ADD.FORM.MESSAGE.LABEL")),1),u("div",null,[c(D,{modelValue:o.message,"onUpdate:modelValue":t[1]||(t[1]=m=>o.message=m),class:C(["message-editor",{editor_warning:s.v$.message.$error}]),placeholder:e.$t("CAMPAIGN.ADD.FORM.MESSAGE.PLACEHOLDER"),onBlur:s.v$.message.$touch},null,8,["modelValue","class","placeholder","onBlur"]),s.v$.message.$error?(n(),a("span",We,d(e.$t("CAMPAIGN.ADD.FORM.MESSAGE.ERROR")),1)):p("",!0)])])):(n(),a("label",{key:1,class:C({error:s.v$.message.$error})},[h(d(e.$t("CAMPAIGN.ADD.FORM.MESSAGE.LABEL"))+" ",1),P(u("textarea",{"onUpdate:modelValue":t[2]||(t[2]=m=>o.message=m),rows:"5",type:"text",placeholder:e.$t("CAMPAIGN.ADD.FORM.MESSAGE.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...m)=>s.v$.message.$touch&&s.v$.message.$touch(...m))},null,40,Xe),[[X,o.message]]),s.v$.message.$error?(n(),a("span",je,d(e.$t("CAMPAIGN.ADD.FORM.MESSAGE.ERROR")),1)):p("",!0)],2)),u("label",{class:C({error:s.v$.selectedInbox.$error})},[h(d(e.$t("CAMPAIGN.ADD.FORM.INBOX.LABEL"))+" ",1),P(u("select",{"onUpdate:modelValue":t[4]||(t[4]=m=>o.selectedInbox=m),onChange:t[5]||(t[5]=m=>r.onChangeInbox(m))},[(n(!0),a(N,null,y(r.inboxes,m=>(n(),a("option",{key:m.name,value:m.id},d(m.name),9,Ye))),128))],544),[[$,o.selectedInbox]]),s.v$.selectedInbox.$error?(n(),a("span",qe,d(e.$t("CAMPAIGN.ADD.FORM.INBOX.ERROR")),1)):p("",!0)],2),s.isOneOffType?(n(),a("label",{key:2,class:C(["multiselect-wrap--small",{error:s.v$.selectedAudience.$error}])},[h(d(e.$t("CAMPAIGN.ADD.FORM.AUDIENCE.LABEL"))+" ",1),c(E,{modelValue:o.selectedAudience,"onUpdate:modelValue":t[6]||(t[6]=m=>o.selectedAudience=m),options:e.audienceList,"track-by":"id",label:"title",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:e.$t("CAMPAIGN.ADD.FORM.AUDIENCE.PLACEHOLDER"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),onBlur:s.v$.selectedAudience.$touch,onSelect:s.v$.selectedAudience.$touch},null,8,["modelValue","options","placeholder","select-label","deselect-label","onBlur","onSelect"]),s.v$.selectedAudience.$error?(n(),a("span",ze,d(e.$t("CAMPAIGN.ADD.FORM.AUDIENCE.ERROR")),1)):p("",!0)],2)):p("",!0),s.isOngoingType?(n(),a("label",{key:3,class:C({error:s.v$.selectedSender.$error})},[h(d(e.$t("CAMPAIGN.ADD.FORM.SENT_BY.LABEL"))+" ",1),P(u("select",{"onUpdate:modelValue":t[7]||(t[7]=m=>o.selectedSender=m)},[(n(!0),a(N,null,y(r.sendersAndBotList,m=>(n(),a("option",{key:m.name,value:m.id},d(m.name),9,Ke))),128))],512),[[$,o.selectedSender]]),s.v$.selectedSender.$error?(n(),a("span",Je,d(e.$t("CAMPAIGN.ADD.FORM.SENT_BY.ERROR")),1)):p("",!0)],2)):p("",!0),s.isOneOffType?(n(),a("label",Qe,[h(d(e.$t("CAMPAIGN.ADD.FORM.SCHEDULED_AT.LABEL"))+" ",1),c(i,{value:o.scheduledAt,"confirm-text":e.$t("CAMPAIGN.ADD.FORM.SCHEDULED_AT.CONFIRM"),placeholder:e.$t("CAMPAIGN.ADD.FORM.SCHEDULED_AT.PLACEHOLDER"),onChange:r.onChange},null,8,["value","confirm-text","placeholder","onChange"])])):p("",!0),s.isOngoingType?(n(),_(A,{key:5,modelValue:o.endPoint,"onUpdate:modelValue":t[8]||(t[8]=m=>o.endPoint=m),label:e.$t("CAMPAIGN.ADD.FORM.END_POINT.LABEL"),type:"text",class:C({error:s.v$.endPoint.$error}),error:s.v$.endPoint.$error?e.$t("CAMPAIGN.ADD.FORM.END_POINT.ERROR"):"",placeholder:e.$t("CAMPAIGN.ADD.FORM.END_POINT.PLACEHOLDER"),onBlur:s.v$.endPoint.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"])):p("",!0),s.isOngoingType?(n(),_(A,{key:6,modelValue:o.timeOnPage,"onUpdate:modelValue":t[9]||(t[9]=m=>o.timeOnPage=m),label:e.$t("CAMPAIGN.ADD.FORM.TIME_ON_PAGE.LABEL"),type:"text",class:C({error:s.v$.timeOnPage.$error}),error:s.v$.timeOnPage.$error?e.$t("CAMPAIGN.ADD.FORM.TIME_ON_PAGE.ERROR"):"",placeholder:e.$t("CAMPAIGN.ADD.FORM.TIME_ON_PAGE.PLACEHOLDER"),onBlur:s.v$.timeOnPage.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"])):p("",!0),s.isOngoingType?(n(),a("label",Ze,[P(u("input",{"onUpdate:modelValue":t[10]||(t[10]=m=>o.enabled=m),type:"checkbox",value:"enabled",name:"enabled"},null,512),[[v,o.enabled]]),h(" "+d(e.$t("CAMPAIGN.ADD.FORM.ENABLED")),1)])):p("",!0),s.isOngoingType?(n(),a("label",et,[P(u("input",{"onUpdate:modelValue":t[11]||(t[11]=m=>o.triggerOnlyDuringBusinessHours=m),type:"checkbox",value:"triggerOnlyDuringBusinessHours",name:"triggerOnlyDuringBusinessHours"},null,512),[[v,o.triggerOnlyDuringBusinessHours]]),h(" "+d(e.$t("CAMPAIGN.ADD.FORM.TRIGGER_ONLY_BUSINESS_HOURS")),1)])):p("",!0)]),u("div",tt,[c(S,{"is-loading":e.uiFlags.isCreating},{default:M(()=>[h(d(e.$t("CAMPAIGN.ADD.CREATE_BUTTON_TEXT")),1)]),_:1},8,["is-loading"]),c(S,{variant:"clear",onClick:L(r.onClose,["prevent"])},{default:M(()=>[h(d(e.$t("CAMPAIGN.ADD.CANCEL_BUTTON_TEXT")),1)]),_:1},8,["onClick"])])],32)])}const ot=f(ke,[["render",st],["__scopeId","data-v-319b8f2f"]]),nt={components:{Campaign:Le,AddCampaign:ot},setup(){const{isOngoingType:e}=R();return{isOngoingType:e}},data(){return{showAddPopup:!1}},computed:{buttonText(){return this.isOngoingType?this.$t("CAMPAIGN.HEADER_BTN_TXT.ONGOING"):this.$t("CAMPAIGN.HEADER_BTN_TXT.ONE_OFF")}},mounted(){this.$store.dispatch("campaigns/get")},methods:{openAddPopup(){this.showAddPopup=!0},hideAddPopup(){this.showAddPopup=!1}}},it={class:"flex-1 p-4 overflow-auto"};function lt(e,t,l,s,o,r){const O=g("woot-button"),A=g("Campaign"),D=g("AddCampaign"),E=g("woot-modal");return n(),a("div",it,[c(O,{"color-scheme":"success","class-names":"button--fixed-top",icon:"add-circle",onClick:r.openAddPopup},{default:M(()=>[h(d(r.buttonText),1)]),_:1},8,["onClick"]),c(A),c(E,{show:o.showAddPopup,"onUpdate:show":t[0]||(t[0]=i=>o.showAddPopup=i),"on-close":r.hideAddPopup},{default:M(()=>[c(D,{onOnClose:r.hideAddPopup},null,8,["onOnClose"])]),_:1},8,["show","on-close"])])}const Ft=f(nt,[["render",lt]]);export{Ft as default};
