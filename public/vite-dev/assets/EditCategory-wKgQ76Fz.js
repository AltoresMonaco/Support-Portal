import{u as _,r as h,m as L}from"./index-C2DForDf.js";import{a as A,u as N}from"./index-BaHWIRRA.js";import{ag as I,ab as f,a9 as O}from"./dashboard-CGLIihvy.js";import{_ as w,o as S,a as P,l as u,u as d,e as m,p as t,t as l,q as D,m as p,g as y,U as v,f as C}from"./_plugin-vue_export-helper-CvYNw_mv.js";import"./globalConfig-DaGjiImb.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./axios-CCb-kr4I.js";import"./mutationHelpers-3VTcoJiD.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./index-DaWXXnfb.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./Thumbnail-DLjRBBx8.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";const G={components:{CategoryNameIconInput:I},props:{show:{type:Boolean,default:!1},portalName:{type:String,default:""},locale:{type:String,default:""},category:{type:Object,default:()=>{}},selectedPortalSlug:{type:String,default:""}},emits:["update","cancel","update:show"],setup(){return{v$:_()}},data(){return{id:this.category.id,name:"",icon:"",slug:"",description:""}},validations:{name:{required:h,minLength:L(2)},slug:{required:h}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},slugError(){return this.v$.slug.$error?this.$t("HELP_CENTER.CATEGORY.ADD.SLUG.ERROR"):""}},mounted(){this.updateDataFromStore()},methods:{updateDataFromStore(){const{category:e}=this;this.name=e.name,this.icon=e.icon,this.slug=e.slug,this.description=e.description},changeName(e){this.name=e,this.slug=f(this.name)},onClickInsertEmoji(e){this.icon=e},onUpdate(){this.$emit("update")},onClose(){this.$emit("cancel")},async editCategory(){const{id:e,name:a,slug:r,icon:n,description:i}=this,o={id:e,name:a,icon:n,slug:r,description:i};if(this.v$.$touch(),!this.v$.$invalid)try{await this.$store.dispatch("categories/update",{portalSlug:this.selectedPortalSlug,categoryId:e,categoryObj:o}),this.alertMessage=this.$t("HELP_CENTER.CATEGORY.EDIT.API.SUCCESS_MESSAGE"),A(O.EDIT_CATEGORY),this.onClose()}catch(E){const c=E==null?void 0:E.message;this.alertMessage=c||this.$t("HELP_CENTER.CATEGORY.EDIT.API.ERROR_MESSAGE")}finally{N(this.alertMessage)}}}},H={class:"w-full"},Y={class:"flex flex-row w-full mx-0 mt-0 mb-4"},$={class:"w-[50%]"},b={class:"text-slate-600 dark:text-slate-400"},U={class:"w-[50%]"},B={class:"text-slate-600 dark:text-slate-400"},M=["placeholder"],k={class:"w-full"},x={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function V(e,a,r,n,i,o){const E=d("woot-modal-header"),c=d("CategoryNameIconInput"),g=d("woot-input"),T=d("woot-button"),R=d("woot-modal");return S(),P(R,{show:o.localShow,"onUpdate:show":a[3]||(a[3]=s=>o.localShow=s),"on-close":o.onClose},{default:u(()=>[m(E,{"header-title":e.$t("HELP_CENTER.CATEGORY.EDIT.TITLE"),"header-content":e.$t("HELP_CENTER.CATEGORY.EDIT.SUB_TITLE")},null,8,["header-title","header-content"]),t("form",{class:"w-full",onSubmit:a[2]||(a[2]=C((...s)=>o.onUpdate&&o.onUpdate(...s),["prevent"]))},[t("div",H,[t("div",Y,[t("div",$,[t("label",null,[t("span",null,l(e.$t("HELP_CENTER.CATEGORY.EDIT.PORTAL")),1),t("p",b,l(r.portalName),1)])]),t("div",U,[t("label",null,[t("span",null,l(e.$t("HELP_CENTER.CATEGORY.EDIT.LOCALE")),1),t("p",B,l(r.locale),1)])])]),m(c,{label:e.$t("HELP_CENTER.CATEGORY.EDIT.NAME.LABEL"),placeholder:e.$t("HELP_CENTER.CATEGORY.EDIT.NAME.PLACEHOLDER"),"help-text":e.$t("HELP_CENTER.CATEGORY.EDIT.NAME.HELP_TEXT"),"has-error":n.v$.name.$error,"error-message":e.$t("HELP_CENTER.CATEGORY.ADD.NAME.ERROR"),"existing-name":r.category.name,"saved-icon":r.category.icon,onNameChange:o.changeName,onIconChange:o.onClickInsertEmoji},null,8,["label","placeholder","help-text","has-error","error-message","existing-name","saved-icon","onNameChange","onIconChange"]),m(g,{modelValue:i.slug,"onUpdate:modelValue":a[0]||(a[0]=s=>i.slug=s),class:D([{error:n.v$.slug.$error},"w-full"]),error:o.slugError,label:e.$t("HELP_CENTER.CATEGORY.EDIT.SLUG.LABEL"),placeholder:e.$t("HELP_CENTER.CATEGORY.EDIT.SLUG.PLACEHOLDER"),"help-text":e.$t("HELP_CENTER.CATEGORY.EDIT.SLUG.HELP_TEXT"),onInput:n.v$.slug.$touch,onBlur:n.v$.slug.$touch},null,8,["modelValue","class","error","label","placeholder","help-text","onInput","onBlur"]),t("label",null,[p(l(e.$t("HELP_CENTER.CATEGORY.EDIT.DESCRIPTION.LABEL"))+" ",1),y(t("textarea",{"onUpdate:modelValue":a[1]||(a[1]=s=>i.description=s),rows:"3",type:"text",placeholder:e.$t("HELP_CENTER.CATEGORY.EDIT.DESCRIPTION.PLACEHOLDER")},null,8,M),[[v,i.description]])]),t("div",k,[t("div",x,[m(T,{class:"button clear",onClick:C(o.onClose,["prevent"])},{default:u(()=>[p(l(e.$t("HELP_CENTER.CATEGORY.EDIT.BUTTONS.CANCEL")),1)]),_:1},8,["onClick"]),m(T,{onClick:o.editCategory},{default:u(()=>[p(l(e.$t("HELP_CENTER.CATEGORY.EDIT.BUTTONS.CREATE")),1)]),_:1},8,["onClick"])])])])],32)]),_:1},8,["show","on-close"])}const Ce=w(G,[["render",V],["__scopeId","data-v-252815fa"]]);export{Ce as default};
