import{m as k}from"./globalConfig-DaGjiImb.js";import{b as v,_ as N,J as R,E as P,aa as C}from"./dashboard-CGLIihvy.js";import{S as H}from"./Spinner-B-aSVz3z.js";import{M as I}from"./MultiselectDropdownItems-DEUXvTsY.js";import{F as $,j as O}from"./DashboardIcon-CPXNa31t.js";import{_ as b,u as c,H as A,o as r,n as _,p as a,e as l,t as s,a as g,l as u,m as p,k as w,g as y,q as T}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as z}from"./timeHelper-BT38nsET.js";import{T as B}from"./Thumbnail-DLjRBBx8.js";import{_ as F}from"./TableFooter-DOGhqcuD.js";import{D as U}from"./vuedraggable.umd-rGNd3eNJ.js";import"./axios-CCb-kr4I.js";import"./_commonjsHelpers-BosuxZz1.js";import"./mutationHelpers-3VTcoJiD.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./index-DaWXXnfb.js";import"./globalConfigMixin-BNbqaRx5.js";import"./index-BaHWIRRA.js";import"./index-Y4OjWrJ-.js";import"./index-C2DForDf.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./utils.esm-CA3tRshB.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./exports-CsC-x4VI.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./index-BO4rcqbh.js";import"./Icon-Dtj3LCzD.js";const M={components:{FluentIcon:$,WootDropdownItem:v,WootDropdownMenu:N,MultiselectDropdownItems:I},props:{headerTitle:{type:String,default:""},count:{type:Number,default:0},selectedValue:{type:String,default:""},selectedLocale:{type:String,default:""},shouldShowSettings:{type:Boolean,default:!1},allLocales:{type:Array,default:()=>[]}},emits:["openModal","open","close","newArticlePage","changeLocale"],data(){return{showSortByDropdown:!1,showLocaleDropdown:!1}},computed:{shouldShowLocaleDropdown(){return this.allLocales.length>1},switchableLocales(){return this.allLocales.filter(e=>e.name!==this.selectedLocale)}},methods:{openFilterModal(){this.$emit("openModal")},openDropdown(){this.$emit("open"),this.showSortByDropdown=!0},closeDropdown(){this.$emit("close"),this.showSortByDropdown=!1},openLocaleDropdown(){this.showLocaleDropdown=!0},closeLocaleDropdown(){this.showLocaleDropdown=!1},onClickNewArticlePage(){this.$emit("newArticlePage")},onClickSelectItem(e){const{name:i,code:o}=e;this.closeLocaleDropdown(),!(!i||i===this.selectedLocale)&&this.$emit("changeLocale",o)}}},V={class:"sticky top-0 z-50 flex items-center justify-between w-full h-16 p-6 bg-white dark:bg-slate-900"},W={class:"flex items-center"},j={class:"flex items-center mx-2 my-0"},G={class:"mb-0 text-xl font-medium text-slate-800 dark:text-slate-100"},q={class:"text-sm text-slate-600 dark:text-slate-300 mx-2 mt-0.5"},J={class:"flex items-center gap-1"},Y={class:"inline-flex items-center ml-1 rtl:ml-0 rtl:mr-1 text-slate-800 dark:text-slate-100"},K={key:2,class:"dropdown-pane dropdown-pane--open"},Q={class:"relative"},X={class:"flex items-center justify-between w-full min-w-0"},Z={class:"inline-flex items-center ml-1 rtl:ml-0 rtl:mr-1 text-slate-800 dark:text-slate-100"},ee={key:1,class:"dropdown-pane dropdown-pane--open"};function te(e,i,o,h,m,t){const E=c("woot-sidemenu-icon"),d=c("woot-button"),f=c("FluentIcon"),n=c("WootDropdownItem"),L=c("WootDropdownMenu"),S=c("MultiselectDropdownItems"),x=A("on-clickaway"),D=A("tooltip");return r(),_("div",V,[a("div",W,[l(E),a("div",j,[a("h3",G,s(o.headerTitle),1),a("span",q,s(`(${o.count})`),1)])]),a("div",J,[o.shouldShowSettings?(r(),g(d,{key:0,icon:"filter","color-scheme":"secondary",variant:"hollow",size:"small",onClick:t.openFilterModal},{default:u(()=>[p(s(e.$t("HELP_CENTER.HEADER.FILTER")),1)]),_:1},8,["onClick"])):w("",!0),o.shouldShowSettings?(r(),g(d,{key:1,icon:"arrow-sort","color-scheme":"secondary",size:"small",variant:"hollow",onClick:t.openDropdown},{default:u(()=>[p(s(e.$t("HELP_CENTER.HEADER.SORT"))+" ",1),a("span",Y,[p(s(o.selectedValue)+" ",1),l(f,{class:"dropdown-arrow",icon:"chevron-down",size:"14"})])]),_:1},8,["onClick"])):w("",!0),m.showSortByDropdown?y((r(),_("div",K,[l(L,null,{default:u(()=>[l(n,null,{default:u(()=>[l(d,{variant:"clear","color-scheme":"secondary",size:"small",icon:"send-clock"},{default:u(()=>[p(s(e.$t("HELP_CENTER.HEADER.DROPDOWN_OPTIONS.PUBLISHED")),1)]),_:1})]),_:1}),l(n,null,{default:u(()=>[l(d,{variant:"clear","color-scheme":"secondary",size:"small",icon:"dual-screen-clock"},{default:u(()=>[p(s(e.$t("HELP_CENTER.HEADER.DROPDOWN_OPTIONS.DRAFT")),1)]),_:1})]),_:1}),l(n,null,{default:u(()=>[l(d,{variant:"clear","color-scheme":"secondary",size:"small",icon:"calendar-clock"},{default:u(()=>[p(s(e.$t("HELP_CENTER.HEADER.DROPDOWN_OPTIONS.ARCHIVED")),1)]),_:1})]),_:1})]),_:1})])),[[x,t.closeDropdown]]):w("",!0),o.shouldShowSettings?y((r(),g(d,{key:3,icon:"settings",variant:"hollow",size:"small","color-scheme":"secondary"},null,512)),[[D,e.$t("HELP_CENTER.HEADER.SETTINGS_BUTTON"),void 0,{"top-end":!0}]]):w("",!0),a("div",Q,[t.shouldShowLocaleDropdown?(r(),g(d,{key:0,icon:"globe","color-scheme":"secondary",size:"small",variant:"hollow",onClick:t.openLocaleDropdown},{default:u(()=>[a("div",X,[a("span",Z,[p(s(o.selectedLocale)+" ",1),l(f,{class:"dropdown-arrow",icon:"chevron-down",size:"14"})])])]),_:1},8,["onClick"])):w("",!0),m.showLocaleDropdown?y((r(),_("div",ee,[l(S,{options:t.switchableLocales,"has-thumbnail":!1,"selected-items":[o.selectedLocale],"input-placeholder":e.$t("HELP_CENTER.HEADER.LOCALE_SELECT.SEARCH_PLACEHOLDER"),"no-search-result":e.$t("HELP_CENTER.HEADER.LOCALE_SELECT.NO_RESULT"),onSelect:t.onClickSelectItem},null,8,["options","selected-items","input-placeholder","no-search-result","onSelect"])])),[[x,t.closeLocaleDropdown]]):w("",!0)]),l(d,{size:"small",icon:"add","color-scheme":"primary",onClick:t.onClickNewArticlePage},{default:u(()=>[p(s(e.$t("HELP_CENTER.HEADER.NEW_BUTTON")),1)]),_:1},8,["onClick"])])])}const oe=b(M,[["render",te],["__scopeId","data-v-e20c8a4e"]]),ae={components:{Thumbnail:B},mixins:[R],props:{showDragIcon:{type:Boolean,default:!1},id:{type:Number,required:!0},title:{type:String,required:!0},author:{type:Object,default:()=>{}},category:{type:Object,default:()=>{}},views:{type:Number,default:0},status:{type:String,default:"draft",values:["archived","draft","published"]},updatedAt:{type:Number,default:0}},computed:{lastUpdatedAt(){return z(this.updatedAt)},formattedViewCount(){return Number(this.views||0).toLocaleString("en")},readableViewCount(){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(this.views||0)},articleAuthorName(){var e;return((e=this.author)==null?void 0:e.name)||"-"},labelColor(){switch(this.status){case"archived":return"secondary";case"draft":return"warning";default:return"success"}}},methods:{getCategoryRoute(e){const{portalSlug:i,locale:o}=this.$route.params;return O(`accounts/${this.accountId}/portals/${i}/${o}/categories/${e}`)}}},se={class:"grid grid-cols-1 gap-4 px-6 py-3 my-0 -mx-4 bg-white border-b text-slate-700 dark:text-slate-100 last:border-b-0 dark:bg-slate-900 lg:grid-cols-12 border-slate-50 dark:border-slate-800"},le={class:"flex items-start col-span-6 gap-2 text-left"},re={class:"flex flex-col truncate"},ne=["title"],ce={class:"flex items-center gap-1"},ie={key:1,class:"flex items-center justify-center rounded w-3.5 h-3.5 bg-woot-100 dark:bg-woot-700"},de={class:"text-sm font-normal text-slate-700 dark:text-slate-200"},ue={class:"flex items-center col-span-2"},he=["title"],me=["title"],pe={class:"ml-1 lg:hidden"},ge={class:"flex items-center capitalize"},_e={class:"flex items-center justify-end col-span-2 text-xs first-letter:uppercase text-slate-700 dark:text-slate-100"};function Ee(e,i,o,h,m,t){const E=c("fluent-icon"),d=c("router-link"),f=c("Thumbnail"),n=c("woot-label"),L=A("tooltip");return r(),_("div",se,[a("span",le,[o.showDragIcon?(r(),g(E,{key:0,size:"20",class:"flex-shrink-0 block w-4 h-4 mt-1 cursor-move text-slate-200 dark:text-slate-700 hover:text-slate-400 hover:dark:text-slate-200",icon:"grab-handle"})):w("",!0),a("div",re,[l(d,{to:e.articleUrl(o.id)},{default:u(()=>[a("h6",{title:o.title,class:"text-base ltr:text-left rtl:text-right text-slate-800 dark:text-slate-100 mb-0.5 leading-6 font-medium hover:underline overflow-hidden whitespace-nowrap text-ellipsis"},s(o.title),9,ne)]),_:1},8,["to"]),a("div",ce,[o.author?(r(),g(f,{key:0,src:o.author.thumbnail,username:o.author.name,size:"14px"},null,8,["src","username"])):y((r(),_("div",ie,[l(E,{icon:"person",type:"filled",size:"10",class:"text-woot-300 dark:text-woot-300"})])),[[L,e.$t("HELP_CENTER.TABLE.COLUMNS.AUTHOR_NOT_AVAILABLE"),void 0,{right:!0}]]),a("span",de,s(t.articleAuthorName),1)])])]),a("span",ue,[l(d,{class:"text-sm hover:underline p-0.5 truncate hover:bg-slate-25 hover:rounded-md",to:t.getCategoryRoute(o.category.slug)},{default:u(()=>[a("span",{title:o.category.name},s(o.category.name),9,he)]),_:1},8,["to"])]),a("span",{class:"flex items-center text-xs lg:text-sm",title:t.formattedViewCount},[p(s(t.readableViewCount)+" ",1),a("span",pe,s(` ${e.$t("HELP_CENTER.TABLE.HEADERS.READ_COUNT")}`),1)],8,me),a("span",ge,[l(n,{class:"!mb-0",title:o.status,size:"small",variant:"smooth","color-scheme":t.labelColor},null,8,["title","color-scheme"])]),a("span",_e,s(t.lastUpdatedAt),1)])}const fe=b(ae,[["render",Ee]]),we={components:{ArticleItem:fe,TableFooter:F,Draggable:U},props:{articles:{type:Array,default:()=>[]},totalCount:{type:Number,default:0},currentPage:{type:Number,default:1},pageSize:{type:Number,default:25}},emits:["reorder","pageChange"],data(){return{localArticles:this.articles||[]}},computed:{dragEnabled(){return this.articles.length>1&&this.onCategoryPage},onCategoryPage(){return this.$route.name==="show_category"},showArticleFooter(){return this.currentPage===1?this.totalCount>25:this.articles.length>0}},watch:{articles(){this.localArticles=[...this.articles]}},methods:{onDragEnd(){const e=this.localArticles.map(h=>h.position).sort((h,m)=>h-m),o=this.localArticles.map(h=>h.id).reduce((h,m,t)=>(h[m]=e[t],h),{});this.$emit("reorder",o)},onPageChange(e){this.$emit("pageChange",e)}}},ye={class:"flex-1"},be={class:"col-span-6 px-0 py-2 text-sm font-semibold text-left capitalize text-slate-700 dark:text-slate-100 rtl:text-right"},Le={class:"col-span-2 px-0 py-2 text-sm font-semibold text-left capitalize text-slate-700 dark:text-slate-100 rtl:text-right"},Ae={class:"hidden px-0 py-2 text-sm font-semibold text-left capitalize text-slate-700 dark:text-slate-100 rtl:text-right lg:block"},xe={class:"px-0 py-2 text-sm font-semibold text-left capitalize text-slate-700 dark:text-slate-100 rtl:text-right"},Ce={class:"hidden col-span-2 px-0 py-2 text-sm font-semibold text-right capitalize text-slate-700 dark:text-slate-100 rtl:text-left md:block"};function Te(e,i,o,h,m,t){const E=c("ArticleItem"),d=c("Draggable"),f=c("TableFooter");return r(),_("div",ye,[a("div",{class:T(["sticky z-10 content-center hidden h-12 grid-cols-12 gap-4 px-6 py-0 bg-white border-b lg:grid border-slate-50 dark:border-slate-700 top-16 dark:bg-slate-900",{draggable:t.onCategoryPage}])},[a("div",be,s(e.$t("HELP_CENTER.TABLE.HEADERS.TITLE")),1),a("div",Le,s(e.$t("HELP_CENTER.TABLE.HEADERS.CATEGORY")),1),a("div",Ae,s(e.$t("HELP_CENTER.TABLE.HEADERS.READ_COUNT")),1),a("div",xe,s(e.$t("HELP_CENTER.TABLE.HEADERS.STATUS")),1),a("div",Ce,s(e.$t("HELP_CENTER.TABLE.HEADERS.LAST_EDITED")),1)],2),l(d,{tag:"div",class:"px-4 pb-4 border-t-0",disabled:!t.dragEnabled,list:m.localArticles,"ghost-class":"article-ghost-class","item-key":"id",onStart:i[0]||(i[0]=n=>e.dragging=!0),onEnd:t.onDragEnd},{item:u(({element:n})=>[(r(),g(E,{id:n.id,key:n.id,class:T({draggable:t.onCategoryPage}),title:n.title,author:n.author,"show-drag-icon":t.dragEnabled,category:n.category,views:n.views,status:n.status,"updated-at":n.updated_at},null,8,["id","class","title","author","show-drag-icon","category","views","status","updated-at"]))]),_:1},8,["disabled","list","onEnd"]),t.showArticleFooter?(r(),g(f,{key:0,"current-page":o.currentPage,"total-count":o.totalCount,"page-size":o.pageSize,class:"bottom-0 border-t dark:bg-slate-900 border-slate-75 dark:border-slate-700/50",onPageChange:t.onPageChange},null,8,["current-page","total-count","page-size","onPageChange"])):w("",!0)])}const Se=b(we,[["render",Te],["__scopeId","data-v-1cb339b1"]]),De={components:{ArticleHeader:oe,ArticleTable:Se,EmptyState:P,Spinner:H},emits:["reloadLocale"],data(){return{pageNumber:1}},computed:{...k({articles:"articles/allArticles",categories:"categories/allCategories",meta:"articles/getMeta",isFetching:"articles/isFetching",currentUserId:"getCurrentUserID",getPortalBySlug:"portals/portalBySlug"}),selectedCategory(){return this.categories.find(e=>e.slug===this.selectedCategorySlug)},shouldShowEmptyState(){return!this.isFetching&&!this.articles.length},selectedPortalSlug(){return this.$route.params.portalSlug},selectedCategorySlug(){const{categorySlug:e}=this.$route.params;return e},articleType(){return this.$route.path.split("/").pop()},headerTitle(){switch(this.articleType){case"mine":return this.$t("HELP_CENTER.HEADER.TITLES.MINE");case"draft":return this.$t("HELP_CENTER.HEADER.TITLES.DRAFT");case"archived":return this.$t("HELP_CENTER.HEADER.TITLES.ARCHIVED");default:return this.$route.name==="show_category"?this.headerTitleInCategoryView:this.$t("HELP_CENTER.HEADER.TITLES.ALL_ARTICLES")}},status(){switch(this.articleType){case"draft":return 0;case"published":return 1;case"archived":return 2;default:return}},author(){return this.articleType==="mine"?this.currentUserId:null},headerTitleInCategoryView(){return this.categories&&this.categories.length?this.selectedCategory.name:""},activeLocale(){return this.$route.params.locale},activeLocaleName(){return C[this.activeLocale]},portal(){return this.getPortalBySlug(this.selectedPortalSlug)},allowedLocales(){if(!this.portal)return[];const{allowed_locales:e}=this.portal.config;return e.map(i=>({id:i.code,name:C[i.code],code:i.code}))}},watch:{$route(){this.pageNumber=1,this.fetchArticles()}},mounted(){this.fetchArticles()},methods:{newArticlePage(){this.$router.push({name:"new_article"})},fetchArticles({pageNumber:e}={}){this.$store.dispatch("articles/index",{pageNumber:e||this.pageNumber,portalSlug:this.$route.params.portalSlug,locale:this.activeLocale,status:this.status,authorId:this.author,categorySlug:this.selectedCategorySlug})},onPageChange(e){this.fetchArticles({pageNumber:e})},onReorder(e){this.$store.dispatch("articles/reorder",{reorderedGroup:e,portalSlug:this.$route.params.portalSlug})},onChangeLocale(e){this.$router.push({name:"list_all_locale_articles",params:{portalSlug:this.$route.params.portalSlug,locale:e}}),this.$emit("reloadLocale")}}},ke={class:"flex flex-col w-full max-w-full px-0 py-0 overflow-auto bg-white dark:bg-slate-900"},ve={key:0,class:"flex items-center justify-center px-4 py-6 text-base text-slate-600 dark:text-slate-200"},Ne={class:"text-slate-600 dark:text-slate-200"},Re={key:2,class:"flex flex-1"};function Pe(e,i,o,h,m,t){const E=c("ArticleHeader"),d=c("Spinner"),f=c("EmptyState"),n=c("ArticleTable");return r(),_("div",ke,[l(E,{"header-title":t.headerTitle,count:e.meta.count,"selected-locale":t.activeLocaleName,"all-locales":t.allowedLocales,"selected-value":"Published",class:"border-b border-slate-50 dark:border-slate-700",onNewArticlePage:t.newArticlePage,onChangeLocale:t.onChangeLocale},null,8,["header-title","count","selected-locale","all-locales","onNewArticlePage","onChangeLocale"]),e.isFetching?(r(),_("div",ve,[l(d),a("span",Ne,s(e.$t("HELP_CENTER.TABLE.LOADING_MESSAGE")),1)])):t.shouldShowEmptyState?(r(),g(f,{key:1,title:e.$t("HELP_CENTER.TABLE.NO_ARTICLES")},null,8,["title"])):(r(),_("div",Re,[l(n,{articles:e.articles,"current-page":Number(e.meta.currentPage),"total-count":Number(e.meta.count),onPageChange:t.onPageChange,onReorder:t.onReorder},null,8,["articles","current-page","total-count","onPageChange","onReorder"])]))])}const dt=b(De,[["render",Pe]]);export{dt as default};
