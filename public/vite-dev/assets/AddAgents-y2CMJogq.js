import{m as u}from"./globalConfig-DaGjiImb.js";import{u as h}from"./index-BaHWIRRA.js";import{at as A,Y as f}from"./dashboard-CGLIihvy.js";import{A as _}from"./AgentSelector-CIdm-MKD.js";import{u as T}from"./index-C2DForDf.js";import{_ as S,o as i,n,p as r,e as m,t as w,k as E,f as v,u as d}from"./_plugin-vue_export-helper-CvYNw_mv.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./axios-CCb-kr4I.js";import"./mutationHelpers-3VTcoJiD.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./index-DaWXXnfb.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./Thumbnail-DLjRBBx8.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";const b={components:{PageHeader:A,AgentSelector:_},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}}},setup(){return{v$:T()}},data(){return{selectedAgents:[],isCreating:!1}},computed:{...u({agentList:"agents/getAgents"}),teamId(){return this.$route.params.teamId},headerTitle(){return this.$t("TEAMS_SETTINGS.ADD.TITLE",{teamName:this.currentTeam.name})},currentTeam(){return this.$store.getters["teams/getTeam"](this.teamId)}},mounted(){this.$store.dispatch("agents/get")},methods:{updateSelectedAgents(e){this.v$.selectedAgents.$touch(),this.selectedAgents=[...e]},selectAllAgents(){this.selectedAgents=this.agentList.map(e=>e.id)},async addAgents(){this.isCreating=!0;const{teamId:e,selectedAgents:t}=this;try{await this.$store.dispatch("teamMembers/create",{teamId:e,agentsList:t}),f.replace({name:"settings_teams_finish",params:{page:"new",teamId:e}}),this.$store.dispatch("teams/get")}catch(a){h(a.message)}this.isCreating=!1}}},D={class:"border border-slate-25 dark:border-slate-800/60 overflow-x-auto bg-white dark:bg-slate-900 h-full p-6 w-full max-w-full md:w-3/4 md:max-w-[75%] flex-shrink-0 flex-grow-0"},I={class:"w-full"},N={class:"w-full"},$={key:0},x={class:"error-message"};function k(e,t,a,l,o,s){const c=d("PageHeader"),p=d("AgentSelector");return i(),n("div",D,[r("form",{class:"flex flex-wrap mx-0 overflow-x-auto",onSubmit:t[0]||(t[0]=v((...g)=>s.addAgents&&s.addAgents(...g),["prevent"]))},[r("div",I,[m(c,{"header-title":s.headerTitle,"header-content":e.$t("TEAMS_SETTINGS.ADD.DESC")},null,8,["header-title","header-content"])]),r("div",N,[l.v$.selectedAgents.$error?(i(),n("div",$,[r("p",x,w(e.$t("TEAMS_SETTINGS.ADD.AGENT_VALIDATION_ERROR")),1)])):E("",!0),m(p,{"agent-list":e.agentList,"selected-agents":o.selectedAgents,"update-selected-agents":s.updateSelectedAgents,"is-working":o.isCreating,"submit-button-text":e.$t("TEAMS_SETTINGS.ADD.BUTTON_TEXT")},null,8,["agent-list","selected-agents","update-selected-agents","is-working","submit-button-text"])])],32)])}const oe=S(b,[["render",k]]);export{oe as default};
