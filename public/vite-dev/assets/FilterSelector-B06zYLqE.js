import{W as G}from"./DateRangePicker-BS8Sn4en.js";import{D as _,a as S}from"./constants-CvJgIWgr.js";import{_ as h,u as a,o as r,n as p,e as u,p as c,t as R,l as b,B as f,a as g,k as m}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{m as F,f as I}from"./globalConfig-DaGjiImb.js";import{s as $}from"./mutationHelpers-3VTcoJiD.js";import{b as E,c as y}from"./DateHelper-D7GM2F2-.js";const v="on-range-change",V={name:"ReportFiltersDateRange",data(){const e=Object.values(_).map(t=>({...t,name:this.$t(t.translationKey)}));return{selectedOption:e[0],options:e}},methods:{updateRange(e){this.selectedOption=e,this.$emit(v,e)}}},x={class:"multiselect-wrap--small"};function k(e,t,i,d,s,l){const o=a("multiselect");return r(),p("div",x,[u(o,{modelValue:s.selectedOption,"onUpdate:modelValue":t[0]||(t[0]=n=>s.selectedOption=n),class:"no-margin","track-by":"name",label:"name",placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:s.options,searchable:!1,"allow-empty":!1,onSelect:l.updateRange},null,8,["modelValue","placeholder","select-label","options","onSelect"])])}const U=h(V,[["render",k]]),N={name:"ReportsFiltersDateGroupBy",props:{validGroupOptions:{type:Array,default:()=>[S.DAY]},selectedOption:{type:Object,default:()=>S.DAY}},emits:["onGroupingChange"],data(){return{currentSelectedFilter:null}},computed:{translatedOptions(){return this.validGroupOptions.map(e=>({...e,groupBy:this.$t(e.translationKey)}))}},watch:{selectedOption:{handler(){this.currentSelectedFilter={...this.selectedOption,groupBy:this.$t(this.selectedOption.translationKey)}},immediate:!0}},methods:{changeFilterSelection(e){this.groupByOptions=this.$emit("onGroupingChange",e)}}},P={class:"multiselect-wrap--small"},M={"aria-hidden":"true",class:"hide"};function H(e,t,i,d,s,l){const o=a("multiselect");return r(),p("div",P,[c("p",M,R(e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL")),1),u(o,{modelValue:s.currentSelectedFilter,"onUpdate:modelValue":t[0]||(t[0]=n=>s.currentSelectedFilter=n),class:"no-margin","track-by":"id",label:"groupBy",placeholder:e.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:l.translatedOptions,"allow-empty":!1,"show-labels":!1,onSelect:l.changeFilterSelection},null,8,["modelValue","placeholder","options","onSelect"])])}const W=h(N,[["render",H]]),Y={name:"ReportsFiltersAgents",emits:["agentsFilterSelection"],data(){return{selectedOptions:[]}},computed:{...F({options:"agents/getAgents"})},mounted(){this.$store.dispatch("agents/get")},methods:{handleInput(){this.$emit("agentsFilterSelection",this.selectedOptions)}}},K={class:"multiselect-wrap--small"};function j(e,t,i,d,s,l){const o=a("multiselect");return r(),p("div",K,[u(o,{modelValue:s.selectedOptions,"onUpdate:modelValue":[t[0]||(t[0]=n=>s.selectedOptions=n),l.handleInput],class:"no-margin",options:e.options,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:e.$t("CSAT_REPORTS.FILTERS.AGENTS.PLACEHOLDER"),"selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE")},null,8,["modelValue","options","placeholder","select-label","deselect-label","onUpdate:modelValue"])])}const z=h(Y,[["render",j]]),X={name:"ReportsFiltersLabels",emits:["labelsFilterSelection"],data(){return{selectedOption:null}},computed:{...F({options:"labels/getLabels"})},mounted(){this.$store.dispatch("labels/get")},methods:{handleInput(){this.$emit("labelsFilterSelection",this.selectedOption)}}},q={class:"multiselect-wrap--small"},J={class:"flex items-center gap-2"},Q={class:"reports-option__desc"},Z={class:"my-0 text-slate-800 dark:text-slate-75"},ee={class:"flex items-center gap-2"},te={class:"reports-option__desc"},se={class:"my-0 text-slate-800 dark:text-slate-75"};function le(e,t,i,d,s,l){const o=a("multiselect");return r(),p("div",q,[u(o,{modelValue:s.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=n=>s.selectedOption=n),l.handleInput],class:"no-margin",placeholder:e.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),label:"title","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},{singleLabel:b(n=>[c("div",J,[c("div",{style:f({backgroundColor:n.option.color}),class:"w-5 h-5 rounded-full"},null,4),c("span",Q,[c("span",Z,R(n.option.title),1)])])]),option:b(n=>[c("div",ee,[c("div",{style:f({backgroundColor:n.option.color}),class:"flex-shrink-0 w-5 h-5 border border-solid rounded-full border-slate-100 dark:border-slate-800"},null,4),c("span",te,[c("span",se,R(n.option.title),1)])])]),_:1},8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const ne=h(X,[["render",le]]),oe={name:"ReportsFiltersInboxes",emits:["inboxFilterSelection"],data(){return{selectedOption:null}},computed:{...F({options:"inboxes/getInboxes"})},mounted(){this.$store.dispatch("inboxes/get")},methods:{handleInput(){this.$emit("inboxFilterSelection",this.selectedOption)}}},ie={class:"multiselect-wrap--small"};function ae(e,t,i,d,s,l){const o=a("multiselect");return r(),p("div",ie,[u(o,{modelValue:s.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=n=>s.selectedOption=n),l.handleInput],class:"no-margin",placeholder:e.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const re=h(oe,[["render",ae]]),ce={name:"ReportsFiltersTeams",emits:["teamFilterSelection"],data(){return{selectedOption:null}},computed:{...F({options:"teams/getTeams"})},mounted(){this.$store.dispatch("teams/get")},methods:{handleInput(){this.$emit("teamFilterSelection",this.selectedOption)}}},de={class:"multiselect-wrap--small"};function pe(e,t,i,d,s,l){const o=a("multiselect");return r(),p("div",de,[u(o,{modelValue:s.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=n=>s.selectedOption=n),l.handleInput],class:"no-margin",placeholder:e.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL"),label:"name","track-by":"id",options:e.options,"option-height":24,"show-labels":!1},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const ue=h(ce,[["render",pe]]),me={name:"ReportFiltersRatings",emits:["ratingFilterSelection"],data(){return{selectedOption:null,options:I.reverse().map(t=>({...t,label:this.$t(t.translationKey)}))}},methods:{handleInput(e){this.$emit("ratingFilterSelection",e)}}},he={class:"multiselect-wrap--small"};function ge(e,t,i,d,s,l){const o=a("multiselect");return r(),p("div",he,[u(o,{modelValue:s.selectedOption,"onUpdate:modelValue":[t[0]||(t[0]=n=>s.selectedOption=n),l.handleInput],class:"no-margin","option-height":24,placeholder:e.$t("FORMS.MULTISELECT.SELECT_ONE"),options:s.options,"show-labels":!1,"track-by":"value",label:"label"},null,8,["modelValue","placeholder","options","onUpdate:modelValue"])])}const _e=h(me,[["render",ge]]),Re={components:{WootDateRangePicker:G,ReportsFiltersDateRange:U,ReportsFiltersDateGroupBy:W,ReportsFiltersAgents:z,ReportsFiltersLabels:ne,ReportsFiltersInboxes:re,ReportsFiltersTeams:ue,ReportsFiltersRatings:_e},props:{showGroupByFilter:{type:Boolean,default:!1},showAgentsFilter:{type:Boolean,default:!1},showLabelsFilter:{type:Boolean,default:!1},showInboxFilter:{type:Boolean,default:!1},showRatingFilter:{type:Boolean,default:!1},showTeamFilter:{type:Boolean,default:!1},showBusinessHoursSwitch:{type:Boolean,default:!0}},emits:["filterChange"],data(){return{selectedDateRange:_.LAST_7_DAYS,selectedGroupByFilter:null,selectedLabel:null,selectedInbox:null,selectedTeam:null,selectedRating:null,selectedAgents:[],customDateRange:[new Date,new Date],businessHoursSelected:!1}},computed:{isDateRangeSelected(){return this.selectedDateRange.id===_.CUSTOM_DATE_RANGE.id},isGroupByPossible(){return this.selectedDateRange.id!==_.LAST_7_DAYS.id},to(){return this.isDateRangeSelected?E(this.customDateRange[1]):E(new Date)},from(){if(this.isDateRangeSelected)return y(this.customDateRange[0]);const{offset:e}=this.selectedDateRange,t=$(new Date,e);return y(t)},validGroupOptions(){return this.selectedDateRange.groupByOptions},validGroupBy(){return this.selectedGroupByFilter?this.validGroupOptions.map(t=>t.id).includes(this.selectedGroupByFilter.id)?this.selectedGroupByFilter:this.validGroupOptions[0]:this.validGroupOptions[0]}},watch:{businessHoursSelected(){this.emitChange()}},mounted(){this.emitChange()},methods:{emitChange(){const{from:e,to:t,selectedGroupByFilter:i,businessHoursSelected:d,selectedAgents:s,selectedLabel:l,selectedInbox:o,selectedTeam:n,selectedRating:O}=this;this.$emit("filterChange",{from:e,to:t,groupBy:i,businessHours:d,selectedAgents:s,selectedLabel:l,selectedInbox:o,selectedTeam:n,selectedRating:O})},onDateRangeChange(e){this.selectedDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onCustomDateRangeChange(e){this.customDateRange=e,this.selectedGroupByFilter=this.validGroupBy,this.emitChange()},onGroupingChange(e){this.selectedGroupByFilter=e,this.emitChange()},handleAgentsFilterSelection(e){this.selectedAgents=e,this.emitChange()},handleLabelsFilterSelection(e){this.selectedLabel=e,this.emitChange()},handleInboxFilterSelection(e){this.selectedInbox=e,this.emitChange()},handleTeamFilterSelection(e){this.selectedTeam=e,this.emitChange()},handleRatingFilterSelection(e){this.selectedRating=e,this.emitChange()}}},Fe={class:"flex flex-col justify-between gap-3 mb-4 md:flex-row"},Oe={class:"w-full grid gap-y-2 gap-x-1.5 grid-cols-[repeat(auto-fill,minmax(250px,1fr))]"},Se={key:0,class:"flex items-center"},be={class:"mx-2 text-sm whitespace-nowrap"};function fe(e,t,i,d,s,l){const o=a("ReportsFiltersDateRange"),n=a("WootDateRangePicker"),O=a("ReportsFiltersDateGroupBy"),T=a("ReportsFiltersAgents"),D=a("ReportsFiltersLabels"),L=a("ReportsFiltersTeams"),B=a("ReportsFiltersInboxes"),C=a("ReportsFiltersRatings"),w=a("woot-switch");return r(),p("div",Fe,[c("div",Oe,[u(o,{onOnRangeChange:l.onDateRangeChange},null,8,["onOnRangeChange"]),l.isDateRangeSelected?(r(),g(n,{key:0,"show-range":"",class:"no-margin auto-width",value:s.customDateRange,"confirm-text":e.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:e.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"),onChange:l.onCustomDateRangeChange},null,8,["value","confirm-text","placeholder","onChange"])):m("",!0),i.showGroupByFilter&&l.isGroupByPossible?(r(),g(O,{key:1,"valid-group-options":l.validGroupOptions,"selected-option":s.selectedGroupByFilter,onOnGroupingChange:l.onGroupingChange},null,8,["valid-group-options","selected-option","onOnGroupingChange"])):m("",!0),i.showAgentsFilter?(r(),g(T,{key:2,onAgentsFilterSelection:l.handleAgentsFilterSelection},null,8,["onAgentsFilterSelection"])):m("",!0),i.showLabelsFilter?(r(),g(D,{key:3,onLabelsFilterSelection:l.handleLabelsFilterSelection},null,8,["onLabelsFilterSelection"])):m("",!0),i.showTeamFilter?(r(),g(L,{key:4,onTeamFilterSelection:l.handleTeamFilterSelection},null,8,["onTeamFilterSelection"])):m("",!0),i.showInboxFilter?(r(),g(B,{key:5,onInboxFilterSelection:l.handleInboxFilterSelection},null,8,["onInboxFilterSelection"])):m("",!0),i.showRatingFilter?(r(),g(C,{key:6,onRatingFilterSelection:l.handleRatingFilterSelection},null,8,["onRatingFilterSelection"])):m("",!0)]),i.showBusinessHoursSwitch?(r(),p("div",Se,[c("span",be,R(e.$t("REPORT.BUSINESS_HOURS")),1),c("span",null,[u(w,{modelValue:s.businessHoursSelected,"onUpdate:modelValue":t[0]||(t[0]=A=>s.businessHoursSelected=A)},null,8,["modelValue"])])])):m("",!0)])}const Ce=h(Re,[["render",fe]]);export{Ce as R};
