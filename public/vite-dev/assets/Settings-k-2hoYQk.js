import{u as z,m as y}from"./globalConfig-DaGjiImb.js";import{e as Ie}from"./Validators-eX6_8wdj.js";import{u as p}from"./index-BaHWIRRA.js";import{u as v,r as w,m as ie,c as pe}from"./index-C2DForDf.js";import{S as ge}from"./SettingIntroBanner-Be4SfdXr.js";import{_ as f,o as i,n as d,p as l,t as n,k as b,b as Y,m as O,q as M,a as B,u as c,r as K,c as j,l as A,e as r,g as S,a1 as L,U,a0 as D,f as R,F as P,i as x,B as W}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{M as Se,ao as Ae,ap as Me,aq as Ne,o as ne,B as q,V as Oe,L as Be,ar as fe,F as Ge}from"./dashboard-CGLIihvy.js";import{c as Le}from"./exports-CsC-x4VI.js";import{D as De}from"./vuedraggable.umd-rGNd3eNJ.js";import{i as we,g as ye,d as te,a as Pe,t as se,b as xe}from"./businessHour-BNp1n6b4.js";import{p as k}from"./mutationHelpers-3VTcoJiD.js";import{d as H}from"./index-ChSFqGPn.js";import{R as Ce}from"./timeHelper-BT38nsET.js";import{T as ae}from"./Thumbnail-DLjRBBx8.js";import{F as V}from"./Index-CtF_0wrY.js";import{g as ve}from"./globalConfigMixin-BNbqaRx5.js";import{d as Re,L as le}from"./DashboardIcon-CPXNa31t.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./axios-CCb-kr4I.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./utils.esm-CA3tRshB.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./Spinner-B-aSVz3z.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./index-DaWXXnfb.js";import"./index-BO4rcqbh.js";import"./Icon-Dtj3LCzD.js";const Ue={props:{title:{type:String,default:""},subTitle:{type:String,default:""},showBorder:{type:Boolean,default:!0},note:{type:String,default:""}}},ke={class:"w-full xl:w-1/4 min-w-0 xl:max-w-[30%] pr-12"},$e={key:0,class:"text-base text-woot-500 dark:text-woot-500 mb-0 font-medium"},We={class:"text-sm mb-2 text-slate-700 dark:text-slate-300 leading-5 tracking-normal mt-2"},Xe={key:1},Fe={class:"font-semibold"},He={class:"w-full xl:w-1/2 min-w-0 xl:max-w-[50%]"};function Ve(e,t,a,_,s,o){return i(),d("div",{class:M(["ml-0 mr-0 flex py-8 w-full xl:w-3/4 flex-col xl:flex-row",{"border-b border-solid border-slate-50 dark:border-slate-700/30":a.showBorder}])},[l("div",ke,[a.title?(i(),d("p",$e,n(a.title),1)):b("",!0),l("p",We,[a.subTitle?Y(e.$slots,"subTitle",{key:0},()=>[O(n(a.subTitle),1)]):b("",!0)]),a.note?(i(),d("p",Xe,[l("span",Fe,n(e.$t("INBOX_MGMT.NOTE")),1),O(" "+n(a.note),1)])):b("",!0)]),l("div",He,[Y(e.$slots,"default")])],2)}const C=f(Ue,[["render",Ve]]),Z={__name:"InboxReconnectionRequired",emits:["reauthorize"],setup(e,{emit:t}){const a=t;return(_,s)=>(i(),B(Se,{"color-scheme":"alert",class:"justify-start rounded-md","banner-message":_.$t("INBOX_MGMT.RECONNECTION_REQUIRED"),"action-button-label":_.$t("INBOX_MGMT.CLICK_TO_RECONNECT"),"has-action-button":"",onPrimaryAction:s[0]||(s[0]=o=>a("reauthorize"))},null,8,["banner-message","action-button-label"]))}},Ye={components:{InboxReconnectionRequired:Z},props:{inbox:{type:Object,required:!0}},computed:{inboxId(){return this.inbox.id}},mounted(){window.fbAsyncInit=this.runFBInit},methods:{runFBInit(){FB.init({appId:window.chatwootConfig.fbAppId,xfbml:!0,version:window.chatwootConfig.fbApiVersion,status:!0}),window.fbSDKLoaded=!0,FB.AppEvents.logPageView()},async loadFBsdk(){return Ae("https://connect.facebook.net/en_US/sdk.js",{id:"facebook-jssdk"})},async startLogin(){this.hasLoginStarted=!0;try{await this.loadFBsdk(),this.runFBInit(),this.tryFBlogin()}catch(e){e.name==="ScriptLoaderError"?p(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_LOADING")):(Le(e),p(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")))}},tryFBlogin(){FB.login(e=>{e.status==="connected"?this.reauthorizeFBPage(e.authResponse.accessToken):e.status==="not_authorized"?p(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH")):p(this.$t("INBOX_MGMT.DETAILS.ERROR_FB_AUTH"))},{scope:"pages_manage_metadata,business_management,pages_messaging,instagram_basic,pages_show_list,pages_read_engagement,instagram_manage_messages",auth_type:"reauthorize"})},async reauthorizeFBPage(e){try{await this.$store.dispatch("inboxes/reauthorizeFacebookPage",{omniauthToken:e,inboxId:this.inboxId}),p(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_SUCCESS"))}catch{p(this.$t("INBOX_MGMT.FACEBOOK_REAUTHORIZE.MESSAGE_ERROR"))}}}};function ze(e,t,a,_,s,o){const u=c("InboxReconnectionRequired");return i(),B(u,{class:"mx-8 mt-5",onReauthorize:o.startLogin},null,8,["onReauthorize"])}const Ke=f(Ye,[["render",ze],["__scopeId","data-v-9e13ef14"]]),je={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:a}=z(),_=K(!1);async function s(){try{_.value=!0;const o=await Me.generateAuthorization({email:t.inbox.email}),{data:{url:u}}=o;window.location.href=u}catch{p(a("INBOX_MGMT.ADD.MICROSOFT.ERROR_MESSAGE"))}finally{_.value=!1}}return(o,u)=>(i(),B(Z,{class:"mx-8 mt-5",onReauthorize:s}))}},qe={__name:"Reauthorize",props:{inbox:{type:Object,default:()=>({})}},setup(e){const t=e,{t:a}=z(),_=K(!1),s=j(()=>t.inbox.imap_login&&t.inbox.imap_enabled?t.inbox.imap_login:t.inbox.email);async function o(){try{_.value=!0;const u=await Ne.generateAuthorization({email:s.value}),{data:{url:h}}=u;window.location.href=h}catch{p(a("INBOX_MGMT.ADD.GOOGLE.ERROR_MESSAGE"))}finally{_.value=!1}}return(u,h)=>(i(),B(Z,{class:"mx-8 mt-5",onReauthorize:o}))}},Ze={components:{Draggable:De},props:{preChatFields:{type:Array,default:()=>[]}},emits:["update","dragEnd"],data(){return{preChatFieldOptions:this.preChatFields}},watch:{preChatFields(){this.preChatFieldOptions=this.preChatFields}},methods:{isFieldEditable(e){return!e.enabled},handlePreChatFieldOptions(e,t,a){this.$emit("update",e,t,a)},onDragEnd(){this.$emit("dragEnd",this.preChatFieldOptions)}}},Je={class:"pre-chat-field"},Qe={class:"pre-chat-field"},et={class:"pre-chat-field"},tt=["onUpdate:modelValue","value","disabled","onClick"],st=["onUpdate:modelValue","disabled"],lt=["onUpdate:modelValue","disabled"];function ot(e,t,a,_,s,o){const u=c("fluent-icon"),h=c("woot-switch"),T=c("Draggable");return i(),B(T,{modelValue:s.preChatFieldOptions,"onUpdate:modelValue":t[0]||(t[0]=E=>s.preChatFieldOptions=E),tag:"tbody","item-key":"name",onEnd:o.onDragEnd},{item:A(({element:E})=>[l("tr",null,[l("td",Je,[r(u,{icon:"drag"})]),l("td",Qe,[r(h,{"model-value":E.enabled,onInput:I=>o.handlePreChatFieldOptions(I,"enabled",E)},null,8,["model-value","onInput"])]),l("td",{class:M(["pre-chat-field",{"disabled-text":!E.enabled}])},n(E.name),3),l("td",{class:M(["pre-chat-field",{"disabled-text":!E.enabled}])},n(E.type),3),l("td",et,[S(l("input",{"onUpdate:modelValue":I=>E.required=I,type:"checkbox",value:`${E.name}-required`,disabled:!E.enabled,onClick:I=>o.handlePreChatFieldOptions(I,"required",E)},null,8,tt),[[L,E.required]])]),l("td",{class:M(["pre-chat-field",{"disabled-text":!E.enabled}])},[S(l("input",{"onUpdate:modelValue":I=>E.label=I,type:"text",disabled:o.isFieldEditable(E)},null,8,st),[[U,E.label]])],2),l("td",{class:M(["pre-chat-field",{"disabled-text":!E.enabled}])},[S(l("input",{"onUpdate:modelValue":I=>E.placeholder=I,type:"text",disabled:o.isFieldEditable(E)},null,8,lt),[[U,E.placeholder]])],2)])]),_:1},8,["modelValue","onEnd"])}const it=f(Ze,[["render",ot],["__scopeId","data-v-b5db85e5"]]),X=Object.fromEntries(Object.entries(we).filter(([e])=>e.includes("en"))).en,nt={emailAddress:{key:"EMAIL_ADDRESS",label:"Email Id",placeholder:"Please enter your email address"},fullName:{key:"FULL_NAME",label:"Full Name",placeholder:"Please enter your full name"},phoneNumber:{key:"PHONE_NUMBER",label:"Phone Number",placeholder:"Please enter your phone number"}},at=({key:e,label:t})=>X.PRE_CHAT_FORM.FIELDS[e]?X.PRE_CHAT_FORM.FIELDS[e].LABEL:t,rt=({key:e,placeholder:t})=>X.PRE_CHAT_FORM.FIELDS[e]?X.PRE_CHAT_FORM.FIELDS[e].PLACEHOLDER:t,dt=({standardFields:e,customAttributes:t})=>{let a=[];const{pre_chat_fields:_}=e;return t.forEach(s=>{_.find(u=>u.name===s.attribute_key)||a.push({label:s.attribute_display_name,placeholder:s.attribute_display_name,name:s.attribute_key,type:s.attribute_display_type,values:s.attribute_values,field_type:s.attribute_model,regex_pattern:s.regex_pattern,regex_cue:s.regex_cue,required:!1,enabled:!1})}),a},_t=({preChatFields:e})=>e.map(t=>({...t,label:at({key:t.name,label:t.label?t.label:t.name}),placeholder:rt({key:t.name,placeholder:t.placeholder?t.placeholder:t.name})})),ut=({preChatFormOptions:e={},customAttributes:t=[]})=>{const{pre_chat_message:a,pre_chat_fields:_}=e;let s={},o={};const u=_t({preChatFields:_});return s=dt({standardFields:{pre_chat_fields:u},customAttributes:t}),o=[...u,...s],{pre_chat_message:a,pre_chat_fields:o}},ct={components:{PreChatFields:it,WootMessageEditor:ne},props:{inbox:{type:Object,default:()=>({})}},data(){return{preChatFormEnabled:!1,preChatMessage:"",preChatFields:[]}},computed:{...y({uiFlags:"inboxes/getUIFlags",customAttributes:"attributes/getAttributes"}),preChatFieldOptions(){const{pre_chat_form_options:e}=this.inbox;return ut({preChatFormOptions:e,customAttributes:this.customAttributes})}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{pre_chat_form_enabled:e}=this.inbox;this.preChatFormEnabled=e;const{pre_chat_message:t,pre_chat_fields:a}=this.preChatFieldOptions||{};this.preChatMessage=t,this.preChatFields=a},isFieldEditable(e){return!!nt[e.name]||!e.enabled},handlePreChatFieldOptions(e,t,a){this.preChatFields.forEach((_,s)=>{_.name===a.name&&(this.preChatFields[s][t]=!a[t])})},changePreChatFieldFieldsOrder(e){this.preChatFields=e},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{pre_chat_form_enabled:this.preChatFormEnabled,pre_chat_form_options:{pre_chat_message:this.preChatMessage,pre_chat_fields:this.preChatFields}}};await this.$store.dispatch("inboxes/updateInbox",e),p(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{p(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}}},Et={class:"mx-8 my-2 text-base"},ht={class:"mx-0 mt-6 mb-3"},mt={class:"w-1/4"},bt={value:!0},Tt={value:!1},It={key:0},pt={class:"w-[70%]"},gt={class:"w-[70%] mt-4"},St={class:"table w-full table-striped woot-table"},At={class:"thead-dark"},Mt={scope:"col"},Nt={scope:"col"},Ot={scope:"col"},Bt={scope:"col"},ft={scope:"col"},Gt={class:"w-auto my-4"};function Lt(e,t,a,_,s,o){const u=c("WootMessageEditor"),h=c("PreChatFields"),T=c("woot-submit-button");return i(),d("div",Et,[l("div",ht,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.DESCRIPTION")),1),l("form",{class:"flex flex-col",onSubmit:t[2]||(t[2]=R((...E)=>o.updateInbox&&o.updateInbox(...E),["prevent"]))},[l("label",mt,[O(n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.LABEL"))+" ",1),S(l("select",{"onUpdate:modelValue":t[0]||(t[0]=E=>s.preChatFormEnabled=E)},[l("option",bt,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.ENABLED")),1),l("option",Tt,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.ENABLE.OPTIONS.DISABLED")),1)],512),[[D,s.preChatFormEnabled]])]),s.preChatFormEnabled?(i(),d("div",It,[l("div",pt,[l("label",null,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.LABEL")),1),r(u,{modelValue:s.preChatMessage,"onUpdate:modelValue":t[1]||(t[1]=E=>s.preChatMessage=E),class:"message-editor",placeholder:e.$t("INBOX_MGMT.PRE_CHAT_FORM.PRE_CHAT_MESSAGE.PLACEHOLDER")},null,8,["modelValue","placeholder"])]),l("div",gt,[l("label",null,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS")),1),l("table",St,[l("thead",At,[l("tr",null,[t[3]||(t[3]=l("th",{scope:"col"},null,-1)),t[4]||(t[4]=l("th",{scope:"col"},null,-1)),l("th",Mt,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.KEY")),1),l("th",Nt,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.TYPE")),1),l("th",Ot,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.REQUIRED")),1),l("th",Bt,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.LABEL")),1),l("th",ft,n(e.$t("INBOX_MGMT.PRE_CHAT_FORM.SET_FIELDS_HEADER.PLACE_HOLDER")),1)])]),r(h,{"pre-chat-fields":s.preChatFields,onUpdate:o.handlePreChatFieldOptions,onDragEnd:o.changePreChatFieldFieldsOrder},null,8,["pre-chat-fields","onUpdate","onDragEnd"])])])])):b("",!0),l("div",Gt,[r(T,{"button-text":e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE_PRE_CHAT_FORM_SETTINGS"),loading:e.uiFlags.isUpdating},null,8,["button-text","loading"])])],32)])}const Dt=f(ct,[["render",Lt],["__scopeId","data-v-d1b16df3"]]),$=ye(30),wt={components:{},props:{dayName:{type:String,required:!0},timeSlot:{type:Object,default:()=>({from:"",to:""})}},emits:["update"],computed:{fromTimeSlots(){return $},toTimeSlots(){return $.filter(e=>e!=="12:00 AM")},isDayEnabled:{get(){return!!(this.timeSlot.from&&this.timeSlot.to)},set(e){const t=e?{...this.timeSlot,from:$[0],to:$[16],valid:!0,openAllDay:!1}:{...this.timeSlot,from:"",to:"",valid:!1,openAllDay:!1};this.$emit("update",t)}},fromTime:{get(){return this.timeSlot.from},set(e){const t=k(e,"hh:mm a",new Date),a=H(this.toDate,t)/60>0;this.$emit("update",{...this.timeSlot,from:e,valid:a})}},toTime:{get(){return this.timeSlot.to},set(e){const t=k(e,"hh:mm a",new Date);if(e==="12:00 AM")this.$emit("update",{...this.timeSlot,to:e,valid:!0});else{const a=H(t,this.fromDate)/60>0;this.$emit("update",{...this.timeSlot,to:e,valid:a})}}},fromDate(){return k(this.fromTime,"hh:mm a",new Date)},toDate(){return k(this.toTime,"hh:mm a",new Date)},totalHours(){return this.timeSlot.openAllDay?24:H(this.toDate,this.fromDate)/60},hasError(){return!this.timeSlot.valid},isOpenAllDay:{get(){return this.timeSlot.openAllDay},set(e){e?this.$emit("update",{...this.timeSlot,from:"12:00 AM",to:"11:59 PM",valid:!0,openAllDay:e}):this.$emit("update",{...this.timeSlot,from:"09:00 AM",to:"05:00 PM",valid:!0,openAllDay:e})}}}},yt={class:"day-wrap flex py-2 px-0 min-h-[3rem] box-content border-b border-solid border-slate-50 dark:border-slate-600"},Pt={class:"checkbox-wrap flex items-center"},xt=["title"],Ct={class:"day flex items-center py-0 px-3 text-sm font-medium flex-shrink-0 min-w-28"},vt={key:0,class:"flex flex-col flex-shrink-0 flex-grow relative"},Rt={class:"flex items-center flex-shrink-0 flex-grow"},Ut={class:"checkbox-wrap flex items-center open-all-day mr-6"},kt=["title"],$t={class:"text-sm font-medium ml-1"},Wt={class:"separator-icon flex items-center py-0 px-3"},Xt={key:0,class:"date-error pt-1"},Ft={class:"error text-xs text-red-300 dark:text-red-500"},Ht={key:1,class:"flex items-center flex-shrink-0 flex-grow text-sm text-slate-500 dark:text-slate-300"},Vt={key:0,class:"label bg-woot-50 dark:bg-woot-600 text-woot-700 dark:text-woot-100 text-xs inline-block px-2 py-1 rounded-sm cursor-default whitespace-nowrap"};function Yt(e,t,a,_,s,o){const u=c("multiselect"),h=c("fluent-icon");return i(),d("div",yt,[l("div",Pt,[S(l("input",{"onUpdate:modelValue":t[0]||(t[0]=T=>o.isDayEnabled=T),name:"enable-day",class:"m-0",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.ENABLE")},null,8,xt),[[L,o.isDayEnabled]])]),l("div",Ct,[l("span",null,n(a.dayName),1)]),o.isDayEnabled?(i(),d("div",vt,[l("div",Rt,[l("div",Ut,[S(l("input",{"onUpdate:modelValue":t[1]||(t[1]=T=>o.isOpenAllDay=T),name:"enable-open-all-day",class:"enable-checkbox text-sm font-medium",type:"checkbox",title:e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")},null,8,kt),[[L,o.isOpenAllDay]]),l("span",$t,n(e.$t("INBOX_MGMT.BUSINESS_HOURS.ALL_DAY")),1)]),r(u,{modelValue:o.fromTime,"onUpdate:modelValue":t[2]||(t[2]=T=>o.fromTime=T),options:o.fromTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:o.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"]),l("div",Wt,[r(h,{icon:"subtract",type:"solid",size:"16"})]),r(u,{modelValue:o.toTime,"onUpdate:modelValue":t[3]||(t[3]=T=>o.toTime=T),options:o.toTimeSlots,"deselect-label":"","select-label":"","selected-label":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1,disabled:o.isOpenAllDay},null,8,["modelValue","options","placeholder","disabled"])]),o.hasError?(i(),d("div",Xt,[l("span",Ft,n(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.VALIDATION_ERROR")),1)])):b("",!0)])):(i(),d("div",Ht,[l("span",null,n(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.UNAVAILABLE")),1)])),l("div",null,[o.isDayEnabled&&!o.hasError?(i(),d("span",Vt,n(o.totalHours)+" "+n(e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.HOURS")),1)):b("",!0)])])}const zt=f(wt,[["render",Yt],["__scopeId","data-v-4f3d05af"]]),oe={label:"Pacific Time (US & Canada) (GMT-07:00)",value:"America/Los_Angeles"},Kt={components:{SettingsSection:C,BusinessDay:zt,WootMessageEditor:ne},mixins:[q],props:{inbox:{type:Object,default:()=>({})}},data(){return{isBusinessHoursEnabled:!1,unavailableMessage:"",timeZone:oe,dayNames:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},timeSlots:[...te]}},computed:{...y({uiFlags:"inboxes/getUIFlags"}),hasError(){return this.isBusinessHoursEnabled?this.timeSlots.filter(e=>e.from&&!e.valid).length>0:!1},timeZones(){return[...Pe()]},isRichEditorEnabled(){return!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{working_hours_enabled:e=!1,out_of_office_message:t,working_hours:a=[],timezone:_}=this.inbox,s=se(a).length?se(a):te;this.isBusinessHoursEnabled=e,this.unavailableMessage=t||"",this.timeSlots=s,this.timeZone=this.timeZones.find(o=>_===o.value)||oe},onSlotUpdate(e,t){this.timeSlots=this.timeSlots.map(a=>a.day===e?t:a)},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,working_hours_enabled:this.isBusinessHoursEnabled,out_of_office_message:this.unavailableMessage,working_hours:xe(this.timeSlots),timezone:this.timeZone.value,channel:{}};await this.$store.dispatch("inboxes/updateInbox",e),p(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){p(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},jt={class:"mx-8"},qt={for:"toggle-business-hours",class:"toggle-input-wrap"},Zt={class:"mb-4 text-slate-700 dark:text-slate-300"},Jt={key:0,class:"mb-6"},Qt={class:"max-w-[37.5rem]"},es={class:"unavailable-input-wrap"},ts={key:0,class:"px-4 py-0 mx-0 mt-0 mb-4 bg-white border border-solid rounded-md border-slate-200 dark:border-slate-600 dark:bg-slate-900"},ss={class:"timezone-input-wrap"};function ls(e,t,a,_,s,o){const u=c("WootMessageEditor"),h=c("multiselect"),T=c("BusinessDay"),E=c("woot-submit-button"),I=c("SettingsSection");return i(),d("div",jt,[r(I,{title:e.$t("INBOX_MGMT.BUSINESS_HOURS.TITLE"),"sub-title":e.$t("INBOX_MGMT.BUSINESS_HOURS.SUBTITLE")},{default:A(()=>[l("form",{onSubmit:t[4]||(t[4]=R((...g)=>o.updateInbox&&o.updateInbox(...g),["prevent"]))},[l("label",qt,[S(l("input",{"onUpdate:modelValue":t[0]||(t[0]=g=>s.isBusinessHoursEnabled=g),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-business-hours"},null,512),[[L,s.isBusinessHoursEnabled]]),O(" "+n(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_AVAILABILITY")),1)]),l("p",Zt,n(e.$t("INBOX_MGMT.BUSINESS_HOURS.TOGGLE_HELP")),1),s.isBusinessHoursEnabled?(i(),d("div",Jt,[l("div",Qt,[l("label",es,n(e.$t("INBOX_MGMT.BUSINESS_HOURS.UNAVAILABLE_MESSAGE_LABEL")),1),o.isRichEditorEnabled?(i(),d("div",ts,[r(u,{modelValue:s.unavailableMessage,"onUpdate:modelValue":t[1]||(t[1]=g=>s.unavailableMessage=g),"enable-variables":"","is-format-mode":"",class:"message-editor","min-height":4},null,8,["modelValue"])])):S((i(),d("textarea",{key:1,"onUpdate:modelValue":t[2]||(t[2]=g=>s.unavailableMessage=g),type:"text"},null,512)),[[U,s.unavailableMessage]])]),l("div",ss,[l("label",null,n(e.$t("INBOX_MGMT.BUSINESS_HOURS.TIMEZONE_LABEL")),1),r(h,{modelValue:s.timeZone,"onUpdate:modelValue":t[3]||(t[3]=g=>s.timeZone=g),options:o.timeZones,"deselect-label":"","select-label":"","selected-label":"","track-by":"value",label:"label","close-on-select":"",placeholder:e.$t("INBOX_MGMT.BUSINESS_HOURS.DAY.CHOOSE"),"allow-empty":!1},null,8,["modelValue","options","placeholder"])]),l("label",null,n(e.$t("INBOX_MGMT.BUSINESS_HOURS.WEEKLY_TITLE")),1),(i(!0),d(P,null,x(s.timeSlots,g=>(i(),B(T,{key:g.day,"day-name":s.dayNames[g.day],"time-slot":g,onUpdate:G=>o.onSlotUpdate(g.day,G)},null,8,["day-name","time-slot","onUpdate"]))),128))])):b("",!0),r(E,{"button-text":e.$t("INBOX_MGMT.BUSINESS_HOURS.UPDATE"),loading:e.uiFlags.isUpdating,disabled:o.hasError},null,8,["button-text","loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const os=f(Kt,[["render",ls],["__scopeId","data-v-a5dc4778"]]),is={components:{SettingsSection:C},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:v()}},data(){return{isIMAPEnabled:!1,address:"",port:"",login:"",password:"",isSSLEnabled:!0}},validations:{address:{required:w},port:{required:w,minLength:ie(2)},login:{required:w},password:{required:w}},computed:{...y({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{imap_enabled:e,imap_address:t,imap_port:a,imap_login:_,imap_password:s,imap_enable_ssl:o}=this.inbox;this.isIMAPEnabled=e,this.address=t,this.port=a,this.login=_,this.password=s,this.isSSLEnabled=o},async updateInbox(){try{this.loading=!0;let e={id:this.inbox.id,formData:!1,channel:{imap_enabled:this.isIMAPEnabled,imap_address:this.address,imap_port:this.port,imap_login:this.login,imap_password:this.password,imap_enable_ssl:this.isSSLEnabled}};this.isIMAPEnabled||(e.channel.smtp_enabled=!1),await this.$store.dispatch("inboxes/updateInboxIMAP",e),p(this.$t("INBOX_MGMT.IMAP.EDIT.SUCCESS_MESSAGE"))}catch(e){p(e.message)}}}},ns={class:"mx-8"},as={for:"toggle-imap-enable"},rs={key:0,class:"mb-6"},ds={for:"toggle-enable-ssl"};function _s(e,t,a,_,s,o){const u=c("woot-input"),h=c("woot-submit-button"),T=c("SettingsSection");return i(),d("div",ns,[r(T,{title:e.$t("INBOX_MGMT.IMAP.TITLE"),"sub-title":e.$t("INBOX_MGMT.IMAP.SUBTITLE"),note:e.$t("INBOX_MGMT.IMAP.NOTE_TEXT")},{default:A(()=>[l("form",{onSubmit:t[6]||(t[6]=R((...E)=>o.updateInbox&&o.updateInbox(...E),["prevent"]))},[l("label",as,[S(l("input",{"onUpdate:modelValue":t[0]||(t[0]=E=>s.isIMAPEnabled=E),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-imap-enable"},null,512),[[L,s.isIMAPEnabled]]),O(" "+n(e.$t("INBOX_MGMT.IMAP.TOGGLE_AVAILABILITY")),1)]),l("p",null,n(e.$t("INBOX_MGMT.IMAP.TOGGLE_HELP")),1),s.isIMAPEnabled?(i(),d("div",rs,[r(u,{modelValue:s.address,"onUpdate:modelValue":t[1]||(t[1]=E=>s.address=E),class:M([{error:_.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.ADDRESS.PLACE_HOLDER"),onBlur:_.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),r(u,{modelValue:s.port,"onUpdate:modelValue":t[2]||(t[2]=E=>s.port=E),type:"number",class:M([{error:_.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PORT.PLACE_HOLDER"),onBlur:_.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),r(u,{modelValue:s.login,"onUpdate:modelValue":t[3]||(t[3]=E=>s.login=E),class:M([{error:_.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.LOGIN.PLACE_HOLDER"),onBlur:_.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),r(u,{modelValue:s.password,"onUpdate:modelValue":t[4]||(t[4]=E=>s.password=E),class:M([{error:_.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.IMAP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.IMAP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:_.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),l("label",ds,[S(l("input",{"onUpdate:modelValue":t[5]||(t[5]=E=>s.isSSLEnabled=E),type:"checkbox",class:"ltr:mr-2 rtl:ml-2",name:"toggle-enable-ssl"},null,512),[[L,s.isSSLEnabled]]),O(" "+n(e.$t("INBOX_MGMT.IMAP.ENABLE_SSL")),1)])])):b("",!0),r(h,{"button-text":e.$t("INBOX_MGMT.IMAP.UPDATE"),loading:e.uiFlags.isUpdatingIMAP,disabled:_.v$.$invalid&&s.isIMAPEnabled||e.uiFlags.isUpdatingIMAP},null,8,["button-text","loading","disabled"])],32)]),_:1},8,["title","sub-title","note"])])}const us=f(is,[["render",_s]]),cs={props:{name:{type:String,default:"string"},label:{type:String,default:""},items:{type:Array,default:()=>[]},action:{type:Function,default:()=>{}}}},Es={class:"radio-group-label"},hs={class:"radio-group"},ms={class:"radio-group-item-label"},bs=["name","checked","onChange"];function Ts(e,t,a,_,s,o){return i(),d("div",null,[l("label",Es,n(a.label),1),l("div",hs,[(i(!0),d(P,null,x(a.items,u=>(i(),d("div",{key:u.id,class:"radio-group-item"},[l("label",ms,[l("input",{class:"radio-input",name:`${a.name} -radio-input`,type:"radio",checked:u.checked,onChange:h=>a.action({...u,checked:!0})},null,40,bs),l("span",null,n(u.title),1)])]))),128))])])}const J=f(cs,[["render",Ts],["__scopeId","data-v-e4089570"]]),Is={props:{label:{type:String,default:""},options:{type:Array,default:()=>[]},selected:{type:String,default:""},action:{type:Function,default:()=>{}}},data(){return{value:this.selected}}},ps={for:"dropdown-select"};function gs(e,t,a,_,s,o){return i(),d("div",null,[l("label",ps,n(a.label),1),S(l("select",{id:"dropdown-select","onUpdate:modelValue":t[0]||(t[0]=u=>s.value=u),name:"dropdown-select",onChange:t[1]||(t[1]=u=>a.action(s.value))},[(i(!0),d(P,null,x(a.options,u=>(i(),d("option",{key:u.key},n(u.value),1))),128))],544),[[D,s.value]])])}const Ss=f(Is,[["render",gs]]),As={components:{SettingsSection:C,InputRadioGroup:J,SingleSelectDropdown:Ss},props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:v()}},data(){return{isSMTPEnabled:!1,address:"",port:"",login:"",password:"",domain:"",ssl:!1,starttls:!0,openSSLVerifyMode:"none",authMechanism:"login",encryptionProtocols:[{id:"ssl",title:"SSL/TLS",checked:!1},{id:"starttls",title:"STARTTLS",checked:!0}],openSSLVerifyModes:[{key:1,value:"none"},{key:2,value:"peer"},{key:3,value:"client_once"},{key:4,value:"fail_if_no_peer_cert"}],authMechanisms:[{key:1,value:"plain"},{key:2,value:"login"},{key:3,value:"cram-md5"},{key:4,value:"xoauth"},{key:5,value:"xoauth2"},{key:6,value:"ntlm"},{key:7,value:"gssapi"}]}},validations:{address:{required:w},port:{required:w,minLength:ie(2)},login:{required:w},password:{required:w},domain:{required:w}},computed:{...y({uiFlags:"inboxes/getUIFlags"})},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){const{smtp_enabled:e,smtp_address:t,smtp_port:a,smtp_login:_,smtp_password:s,smtp_domain:o,smtp_enable_starttls_auto:u,smtp_enable_ssl_tls:h,smtp_openssl_verify_mode:T,smtp_authentication:E}=this.inbox;this.isSMTPEnabled=e,this.address=t,this.port=a,this.login=_,this.password=s,this.domain=o,this.starttls=u,this.ssl=h,this.openSSLVerifyMode=T,this.authMechanism=E,this.encryptionProtocols=[{id:"ssl",title:"SSL/TLS",checked:h},{id:"starttls",title:"STARTTLS",checked:u}]},handleEncryptionChange(e){e.id==="ssl"?(this.ssl=!0,this.starttls=!1):(this.ssl=!1,this.starttls=!0)},handleSSLModeChange(e){this.openSSLVerifyMode=e},handleAuthMechanismChange(e){this.authMechanism=e},async updateInbox(){try{const e={id:this.inbox.id,channel:{smtp_enabled:this.isSMTPEnabled,smtp_address:this.address,smtp_port:this.port,smtp_login:this.login,smtp_password:this.password,smtp_domain:this.domain,smtp_enable_ssl_tls:this.ssl,smtp_enable_starttls_auto:this.starttls,smtp_openssl_verify_mode:this.openSSLVerifyMode,smtp_authentication:this.authMechanism}};await this.$store.dispatch("inboxes/updateInboxSMTP",e),p(this.$t("INBOX_MGMT.SMTP.EDIT.SUCCESS_MESSAGE"))}catch{p(this.$t("INBOX_MGMT.SMTP.EDIT.ERROR_MESSAGE"))}}}},Ms={class:"mx-8"},Ns={for:"toggle-enable-smtp"},Os={key:0,class:"mb-6"};function Bs(e,t,a,_,s,o){const u=c("woot-input"),h=c("InputRadioGroup"),T=c("SingleSelectDropdown"),E=c("woot-submit-button"),I=c("SettingsSection");return i(),d("div",Ms,[r(I,{title:e.$t("INBOX_MGMT.SMTP.TITLE"),"sub-title":e.$t("INBOX_MGMT.SMTP.SUBTITLE")},{default:A(()=>[l("form",{onSubmit:t[6]||(t[6]=R((...g)=>o.updateInbox&&o.updateInbox(...g),["prevent"]))},[l("label",Ns,[S(l("input",{"onUpdate:modelValue":t[0]||(t[0]=g=>s.isSMTPEnabled=g),type:"checkbox",name:"toggle-enable-smtp"},null,512),[[L,s.isSMTPEnabled]]),O(" "+n(e.$t("INBOX_MGMT.SMTP.TOGGLE_AVAILABILITY")),1)]),l("p",null,n(e.$t("INBOX_MGMT.SMTP.TOGGLE_HELP")),1),s.isSMTPEnabled?(i(),d("div",Os,[r(u,{modelValue:s.address,"onUpdate:modelValue":t[1]||(t[1]=g=>s.address=g),class:M([{error:_.v$.address.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.ADDRESS.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.ADDRESS.PLACE_HOLDER"),onBlur:_.v$.address.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),r(u,{modelValue:s.port,"onUpdate:modelValue":t[2]||(t[2]=g=>s.port=g),type:"number",class:M([{error:_.v$.port.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PORT.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PORT.PLACE_HOLDER"),onBlur:_.v$.port.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),r(u,{modelValue:s.login,"onUpdate:modelValue":t[3]||(t[3]=g=>s.login=g),class:M([{error:_.v$.login.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.LOGIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.LOGIN.PLACE_HOLDER"),onBlur:_.v$.login.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),r(u,{modelValue:s.password,"onUpdate:modelValue":t[4]||(t[4]=g=>s.password=g),class:M([{error:_.v$.password.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.PASSWORD.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.PASSWORD.PLACE_HOLDER"),type:"password",onBlur:_.v$.password.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),r(u,{modelValue:s.domain,"onUpdate:modelValue":t[5]||(t[5]=g=>s.domain=g),class:M([{error:_.v$.domain.$error},"max-w-[75%] w-full"]),label:e.$t("INBOX_MGMT.SMTP.DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.SMTP.DOMAIN.PLACE_HOLDER"),onBlur:_.v$.domain.$touch},null,8,["modelValue","class","label","placeholder","onBlur"]),r(h,{label:e.$t("INBOX_MGMT.SMTP.ENCRYPTION"),items:s.encryptionProtocols,action:o.handleEncryptionChange},null,8,["label","items","action"]),r(T,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.OPEN_SSL_VERIFY_MODE"),selected:s.openSSLVerifyMode,options:s.openSSLVerifyModes,action:o.handleSSLModeChange},null,8,["label","selected","options","action"]),r(T,{class:"max-w-[75%] w-full",label:e.$t("INBOX_MGMT.SMTP.AUTH_MECHANISM"),selected:s.authMechanism,options:s.authMechanisms,action:o.handleAuthMechanismChange},null,8,["label","selected","options","action"])])):b("",!0),r(E,{"button-text":e.$t("INBOX_MGMT.SMTP.UPDATE"),loading:e.uiFlags.isUpdatingSMTP,disabled:_.v$.$invalid&&s.isSMTPEnabled||e.uiFlags.isUpdatingSMTP},null,8,["button-text","loading","disabled"])],32)]),_:1},8,["title","sub-title"])])}const fs=f(As,[["render",Bs]]),Gs={components:{SettingsSection:C,ImapSettings:us,SmtpSettings:fs},mixins:[q],props:{inbox:{type:Object,default:()=>({})}},setup(){return{v$:v()}},data(){return{hmacMandatory:!1,whatsAppInboxAPIKey:""}},validations:{whatsAppInboxAPIKey:{required:w}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){this.hmacMandatory=this.inbox.hmac_mandatory||!1},handleHmacFlag(){this.updateInbox()},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,channel:{hmac_mandatory:this.hmacMandatory}};await this.$store.dispatch("inboxes/updateInbox",e),p(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{p(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},async updateWhatsAppInboxAPIKey(){try{const e={id:this.inbox.id,formData:!1,channel:{}};e.channel.provider_config={...this.inbox.provider_config,api_key:this.whatsAppInboxAPIKey},await this.$store.dispatch("inboxes/updateInbox",e),p(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{p(this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}}}},Ls={key:0,class:"mx-8"},Ds={key:1,class:"mx-8"},ws={key:2},ys={class:"mx-8"},Ps={target:"_blank",rel:"noopener noreferrer",href:"https://www.altores.app/docs/product/channels/live-chat/sdk/identity-validation/"},xs={class:"flex items-center gap-2"},Cs={for:"hmacMandatory"},vs={key:3,class:"mx-8"},Rs={class:"flex items-center gap-2"},Us={for:"hmacMandatory"},ks={key:4},$s={class:"mx-8"},Ws={key:5},Xs={key:0,class:"mx-8"},Fs={class:"flex items-center justify-between flex-1 mt-2 whatsapp-settings--content"};function Hs(e,t,a,_,s,o){const u=c("woot-code"),h=c("SettingsSection"),T=c("ImapSettings"),E=c("SmtpSettings"),I=c("woot-input"),g=c("woot-button");return e.isATwilioChannel?(i(),d("div",Ls,[r(h,{title:e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.TWILIO.API_CALLBACK.SUBTITLE")},{default:A(()=>[r(u,{script:a.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isALineChannel?(i(),d("div",Ds,[r(h,{title:e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.TITLE"),"sub-title":e.$t("INBOX_MGMT.ADD.LINE_CHANNEL.API_CALLBACK.SUBTITLE")},{default:A(()=>[r(u,{script:a.inbox.callback_webhook_url,lang:"html"},null,8,["script"])]),_:1},8,["title","sub-title"])])):e.isAWebWidgetInbox?(i(),d("div",ws,[l("div",ys,[r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_HEADING"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.MESSENGER_SUB_HEAD")},{default:A(()=>[r(u,{script:a.inbox.web_widget_script,lang:"html","codepen-title":`${a.inbox.name} - Altores Widget Test`,"enable-code-pen":""},null,8,["script","codepen-title"])]),_:1},8,["title","sub-title"]),r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION")},{subTitle:A(()=>[O(n(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION"))+" ",1),l("a",Ps,n(e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_LINK_TO_DOCS")),1)]),default:A(()=>[r(u,{script:a.inbox.hmac_token},null,8,["script"])]),_:1},8,["title"]),r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:A(()=>[l("div",xs,[S(l("input",{id:"hmacMandatory","onUpdate:modelValue":t[0]||(t[0]=G=>s.hmacMandatory=G),type:"checkbox",onChange:t[1]||(t[1]=(...G)=>o.handleHmacFlag&&o.handleHmacFlag(...G))},null,544),[[L,s.hmacMandatory]]),l("label",Cs,n(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])])):e.isAPIInbox?(i(),d("div",vs,[r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_IDENTIFIER_SUB_TEXT")},{default:A(()=>[r(u,{script:a.inbox.inbox_identifier},null,8,["script"])]),_:1},8,["title","sub-title"]),r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_DESCRIPTION")},{default:A(()=>[r(u,{script:a.inbox.hmac_token},null,8,["script"])]),_:1},8,["title","sub-title"]),r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_VERIFICATION"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.HMAC_MANDATORY_DESCRIPTION")},{default:A(()=>[l("div",Rs,[S(l("input",{id:"hmacMandatory","onUpdate:modelValue":t[2]||(t[2]=G=>s.hmacMandatory=G),type:"checkbox",onChange:t[3]||(t[3]=(...G)=>o.handleHmacFlag&&o.handleHmacFlag(...G))},null,544),[[L,s.hmacMandatory]]),l("label",Us,n(e.$t("INBOX_MGMT.EDIT.ENABLE_HMAC.LABEL")),1)])]),_:1},8,["title","sub-title"])])):e.isAnEmailChannel?(i(),d("div",ks,[l("div",$s,[r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.FORWARD_EMAIL_SUB_TEXT")},{default:A(()=>[r(u,{script:a.inbox.forward_to_email},null,8,["script"])]),_:1},8,["title","sub-title"])]),r(T,{inbox:a.inbox},null,8,["inbox"]),a.inbox.imap_enabled?(i(),B(E,{key:0,inbox:a.inbox},null,8,["inbox"])):b("",!0)])):e.isAWhatsAppChannel&&!e.isATwilioChannel?(i(),d("div",Ws,[a.inbox.provider_config?(i(),d("div",Xs,[r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_WEBHOOK_SUBHEADER")},{default:A(()=>[r(u,{script:a.inbox.provider_config.webhook_verify_token},null,8,["script"])]),_:1},8,["title","sub-title"]),r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_SUBHEADER")},{default:A(()=>[r(u,{script:a.inbox.provider_config.api_key},null,8,["script"])]),_:1},8,["title","sub-title"]),r(h,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_SUBHEADER")},{default:A(()=>[l("div",Fs,[r(I,{modelValue:s.whatsAppInboxAPIKey,"onUpdate:modelValue":t[4]||(t[4]=G=>s.whatsAppInboxAPIKey=G),type:"text",class:"flex-1 mr-2",placeholder:e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_PLACEHOLDER")},null,8,["modelValue","placeholder"]),r(g,{disabled:_.v$.whatsAppInboxAPIKey.$invalid,onClick:o.updateWhatsAppInboxAPIKey},{default:A(()=>[O(n(e.$t("INBOX_MGMT.SETTINGS_POPUP.WHATSAPP_SECTION_UPDATE_BUTTON")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["title","sub-title"])])):b("",!0)])):b("",!0)}const Vs=f(Gs,[["render",Hs],["__scopeId","data-v-4695f447"]]),Ys={components:{SettingsSection:C},props:{inbox:{type:Object,default:()=>({})}},setup(){const{isEnterprise:e}=Oe();return{v$:v(),isEnterprise:e}},data(){return{selectedAgents:[],isAgentListUpdating:!1,enableAutoAssignment:!1,maxAssignmentLimit:null}},computed:{...y({agentList:"agents/getAgents"}),maxAssignmentLimitErrors(){return this.v$.maxAssignmentLimit.$error?this.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_RANGE_ERROR"):""}},watch:{inbox(){this.setDefaults()}},mounted(){this.setDefaults()},methods:{setDefaults(){var e,t;this.enableAutoAssignment=this.inbox.enable_auto_assignment,this.maxAssignmentLimit=((t=(e=this.inbox)==null?void 0:e.auto_assignment_config)==null?void 0:t.max_assignment_limit)||null,this.fetchAttachedAgents()},async fetchAttachedAgents(){try{const e=await this.$store.dispatch("inboxMembers/get",{inboxId:this.inbox.id}),{data:{payload:t}}=e;this.selectedAgents=t}catch{}},handleEnableAutoAssignment(){this.updateInbox()},async updateAgents(){const e=this.selectedAgents.map(t=>t.id);this.isAgentListUpdating=!0;try{await this.$store.dispatch("inboxMembers/create",{inboxId:this.inbox.id,agentList:e}),p(this.$t("AGENT_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{p(this.$t("AGENT_MGMT.EDIT.API.ERROR_MESSAGE"))}this.isAgentListUpdating=!1},async updateInbox(){try{const e={id:this.inbox.id,formData:!1,enable_auto_assignment:this.enableAutoAssignment,auto_assignment_config:{max_assignment_limit:this.maxAssignmentLimit}};await this.$store.dispatch("inboxes/updateInbox",e),p(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch{p(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}}},validations:{selectedAgents:{isEmpty(){return!!this.selectedAgents.length}},maxAssignmentLimit:{minValue:pe(1)}}},zs={class:"w-3/4 settings-item"},Ks={class:"flex items-center gap-2"},js={for:"enableAutoAssignment"},qs={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},Zs={key:0,class:"max-assignment-container"},Js={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"};function Qs(e,t,a,_,s,o){const u=c("multiselect"),h=c("woot-submit-button"),T=c("SettingsSection"),E=c("woot-input");return i(),d("div",null,[r(T,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_AGENTS_SUB_TEXT")},{default:A(()=>[r(u,{modelValue:s.selectedAgents,"onUpdate:modelValue":t[0]||(t[0]=I=>s.selectedAgents=I),options:e.agentList,"track-by":"id",label:"name",multiple:"","close-on-select":!1,"clear-on-select":!1,"hide-selected":"",placeholder:"Pick some","selected-label":"","select-label":e.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":e.$t("FORMS.MULTISELECT.ENTER_TO_REMOVE"),onSelect:_.v$.selectedAgents.$touch},null,8,["modelValue","options","select-label","deselect-label","onSelect"]),r(h,{"button-text":e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),loading:s.isAgentListUpdating,onClick:o.updateAgents},null,8,["button-text","loading","onClick"])]),_:1},8,["title","sub-title"]),r(T,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.AGENT_ASSIGNMENT_SUB_TEXT")},{default:A(()=>[l("label",zs,[l("div",Ks,[S(l("input",{id:"enableAutoAssignment","onUpdate:modelValue":t[1]||(t[1]=I=>s.enableAutoAssignment=I),type:"checkbox",onChange:t[2]||(t[2]=(...I)=>o.handleEnableAutoAssignment&&o.handleEnableAutoAssignment(...I))},null,544),[[L,s.enableAutoAssignment]]),l("label",js,n(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT")),1)]),l("p",qs,n(e.$t("INBOX_MGMT.SETTINGS_POPUP.AUTO_ASSIGNMENT_SUB_TEXT")),1)]),s.enableAutoAssignment&&_.isEnterprise?(i(),d("div",Zs,[r(E,{modelValue:s.maxAssignmentLimit,"onUpdate:modelValue":t[3]||(t[3]=I=>s.maxAssignmentLimit=I),type:"number",class:M({error:_.v$.maxAssignmentLimit.$error}),error:o.maxAssignmentLimitErrors,label:e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT"),onBlur:_.v$.maxAssignmentLimit.$touch},null,8,["modelValue","class","error","label","onBlur"]),l("p",Js,n(e.$t("INBOX_MGMT.AUTO_ASSIGNMENT.MAX_ASSIGNMENT_LIMIT_SUB_TEXT")),1),r(h,{"button-text":e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),disabled:_.v$.maxAssignmentLimit.$invalid,onClick:o.updateInbox},null,8,["button-text","disabled","onClick"])])):b("",!0)]),_:1},8,["title","sub-title"])])}const el=f(Ys,[["render",Qs],["__scopeId","data-v-da787900"]]),tl={class:"relative top-px"},sl={class:"flex items-center justify-start"},ll=["src"],ol={key:1},il={class:"flex items-center justify-start gap-1"},nl={class:"text-base font-medium leading-3 text-slate-900 dark:text-white"},al={key:0,class:"w-2 h-2 bg-green-500 rounded-full"},rl={class:"mt-1 text-xs text-slate-600 dark:text-slate-400"},dl={key:0,class:"overflow-auto max-h-60"},_l={class:"mb-2 text-2xl break-words text-slate-900 dark:text-white"},ul={class:"text-sm break-words text-slate-600 dark:text-slate-100"},cl={__name:"WidgetHead",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,a=j(()=>t.config.isDefaultScreen&&(t.config.welcomeHeading&&t.config.welcomeHeading.length!==0||t.config.welcomeTagLine&&t.config.welcomeTagline.length!==0));return(_,s)=>(i(),d("div",{class:M(["rounded-t-lg flex-shrink-0 transition-[max-height] duration-300",a.value?"bg-slate-25 dark:bg-slate-800 px-4 py-5":"bg-white dark:bg-slate-900 p-4"])},[l("div",tl,[l("div",sl,[e.config.logo?(i(),d("img",{key:0,src:e.config.logo,class:M(["mr-2 rounded-full logo",a.value?"h-12 w-12 mb-2":"h-8 w-8 mb-1"])},null,10,ll)):b("",!0),a.value?b("",!0):(i(),d("div",ol,[l("div",il,[l("span",nl,n(e.config.websiteName),1),e.config.isOnline?(i(),d("div",al)):b("",!0)]),l("span",rl,n(e.config.replyTime),1)]))]),a.value?(i(),d("div",dl,[l("h2",_l,n(e.config.welcomeHeading),1),l("p",ul,n(e.config.welcomeTagline),1)])):b("",!0)])],2))}},El={class:"h-[calc(2rem*10)] px-4 overflow-y-auto"},hl={class:"items-end flex justify-end ml-auto mb-1 mt-0 max-w-[85%] text-right"},ml={class:"m-0"},bl={class:"bg-white shadow rounded-[1.25rem] rounded-bl-[0.25rem] px-4 py-3 inline-block text-sm text-slate-900 dark:text-white dark:bg-slate-700"},Tl={class:"m-0"},Il={__name:"WidgetBody",props:{config:{type:Object,default:()=>({})}},setup(e){return(t,a)=>(i(),d("div",El,[l("div",null,[l("div",null,[l("div",hl,[l("div",{class:"rounded-[1.25rem] rounded-br-[0.25rem] text-white dark:text-white text-sm px-4 py-3",style:W({background:e.config.color})},[l("p",ml,n(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.USER_MESSAGE")),1)],4)])]),l("div",bl,[l("div",null,[l("p",Tl,n(t.$t("INBOX_MGMT.WIDGET_BUILDER.BODY.AGENT_MESSAGE")),1)])])])]))}},pl={class:"relative flex flex-col w-full px-4"},gl={key:0,class:"p-4 bg-white rounded-md shadow-sm dark:bg-slate-700"},Sl={class:"flex items-center justify-between"},Al={class:"text-sm font-medium leading-4 text-slate-700 dark:text-slate-50"},Ml={class:"mt-1 text-xs text-slate-500 dark:text-slate-100"},Nl={class:"pr-2 text-xs"},Ol={class:"flex items-center gap-2 px-2"},Bl={__name:"WidgetFooter",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,{t:a}=z(),_=K(!1),s=j(()=>t.config.isOnline?a("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.ONLINE"):a("INBOX_MGMT.WIDGET_BUILDER.BODY.TEAM_AVAILABILITY.OFFLINE"));return(o,u)=>(i(),d("div",pl,[e.config.isDefaultScreen?(i(),d("div",gl,[l("div",Sl,[l("div",null,[l("div",Al,n(s.value),1),l("div",Ml,n(e.config.replyTime),1)]),r(ae,{username:"C",size:"34px"})]),e.config.isDefaultScreen?(i(),d("button",{key:0,class:"inline-flex items-center justify-between px-2 py-1 mt-1 -ml-2 font-medium leading-6 bg-transparent rounded-md text-slate-800 dark:bg-transparent dark:text-slate-50 hover:bg-slate-25 dark:hover:bg-slate-800",style:W({color:e.config.color})},[l("span",Nl,n(o.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.START_CONVERSATION_BUTTON_TEXT")),1),r(V,{icon:"arrow-right",size:"14"})],4)):b("",!0)])):(i(),d("div",{key:1,class:M(["flex items-center h-10 bg-white rounded-md dark:bg-slate-700",{"ring-2 ring-woot-500 dark:ring-woot-400":_.value}])},[r(Ce,{id:"chat-input",rows:1,placeholder:o.$t("INBOX_MGMT.WIDGET_BUILDER.FOOTER.CHAT_INPUT_PLACEHOLDER"),class:"flex-grow !bg-white border-0 border-none h-8 text-sm dark:!bg-slate-700 pb-0 !pt-1.5 resize-none px-3 !mb-0 focus:outline-none rounded-md",onFocus:u[0]||(u[0]=h=>_.value=!0),onBlur:u[1]||(u[1]=h=>_.value=!1)},null,8,["placeholder"]),l("div",Ol,[r(V,{icon:"emoji"}),r(V,{class:"icon-send",icon:"send"})])],2))]))}},fl="data:image/svg+xml,%3csvg%20width='66'%20height='66'%20viewBox='0%200%2066%2066'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M63%2063H32.9976C16.4591%2063%202.99996%2049.5399%202.99996%2032.9973C2.99996%2016.4601%2016.4591%203%2032.9979%203C49.5408%203%2063%2016.4601%2063%2032.9973V63Z'%20fill='white'%20stroke='white'%20stroke-width='6'/%3e%3c/svg%3e",Gl={name:"Widget",components:{WidgetHead:cl,WidgetBody:Il,WidgetFooter:Bl,InputRadioGroup:J},mixins:[ve],props:{welcomeHeading:{type:String,default:""},welcomeTagline:{type:String,default:""},websiteName:{type:String,required:!0},logo:{type:String,default:""},isOnline:{type:Boolean,default:!0},replyTime:{type:String,default:""},color:{type:String,default:""},widgetBubblePosition:{type:String,default:""},widgetBubbleLauncherTitle:{type:String,default:""},widgetBubbleType:{type:String,default:""}},data(){return{widgetScreens:[{id:"default",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.DEFAULT"),checked:!0},{id:"chat",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_SCREEN.CHAT"),checked:!1}],isDefaultScreen:!0,isWidgetVisible:!0}},computed:{...y({globalConfig:"globalConfig/get"}),getWidgetConfig(){return{welcomeHeading:this.welcomeHeading,welcomeTagline:this.welcomeTagline,websiteName:this.websiteName,logo:this.logo,isDefaultScreen:this.isDefaultScreen,isOnline:this.isOnline,replyTime:this.replyTimeText,color:this.color}},replyTimeText(){switch(this.replyTime){case"in_a_few_minutes":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_MINUTES");case"in_a_day":return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_DAY");default:return this.$t("INBOX_MGMT.WIDGET_BUILDER.REPLY_TIME.IN_A_FEW_HOURS")}},getBubblePositionStyle(){return{justifyContent:this.widgetBubblePosition==="left"?"start":"end"}},isBubbleExpanded(){return!this.isWidgetVisible&&this.widgetBubbleType==="expanded_bubble"},getWidgetBubbleLauncherTitle(){return this.isWidgetVisible||this.widgetBubbleType==="standard"?" ":this.widgetBubbleLauncherTitle}},methods:{handleScreenChange(e){this.isDefaultScreen=e.id==="default"},toggleWidget(){this.isWidgetVisible=!this.isWidgetVisible,this.isDefaultScreen=!0}}},Ll={key:0,class:"flex flex-col items-center"},Dl={key:1,class:"widget-wrapper flex flex-col justify-between rounded-lg shadow-md bg-slate-25 dark:bg-slate-800 h-[500px] w-[320px]"},wl={class:"py-2.5 flex justify-center"},yl={class:"items-center gap-0.5 text-slate-500 dark:text-slate-400 cursor-pointer flex filter grayscale opacity-90 hover:grayscale-0 hover:opacity-100 text-xxs"},Pl=["src"],xl={key:0,src:fl,alt:"",draggable:"false",class:"w-6 h-6 mx-auto"},Cl={key:1,class:"ltr:pl-2.5 rtl:pr-2.5"},vl={key:2,class:"relative"};function Rl(e,t,a,_,s,o){const u=c("InputRadioGroup"),h=c("WidgetHead"),T=c("WidgetBody"),E=c("WidgetFooter");return i(),d("div",null,[s.isWidgetVisible?(i(),d("div",Ll,[r(u,{name:"widget-screen",items:s.widgetScreens,action:o.handleScreenChange},null,8,["items","action"])])):b("",!0),s.isWidgetVisible?(i(),d("div",Dl,[r(h,{config:o.getWidgetConfig},null,8,["config"]),l("div",null,[o.getWidgetConfig.isDefaultScreen?b("",!0):(i(),B(T,{key:0,config:o.getWidgetConfig},null,8,["config"])),r(E,{config:o.getWidgetConfig},null,8,["config"]),l("div",wl,[l("a",yl,[l("img",{class:"max-w-2.5 max-h-2.5",src:e.globalConfig.logoThumbnail},null,8,Pl),l("span",null,n(e.useInstallationName(e.$t("INBOX_MGMT.WIDGET_BUILDER.BRANDING_TEXT"),"Altores")),1)])])])])):b("",!0),l("div",{class:"flex mt-4 w-[320px]",style:W(o.getBubblePositionStyle)},[l("button",{class:M(["relative flex items-center justify-center rounded-full cursor-pointer",o.isBubbleExpanded?"w-auto font-medium text-base text-white dark:text-white h-12 px-4":"w-16 h-16"]),style:W({background:a.color}),onClick:t[0]||(t[0]=(...I)=>o.toggleWidget&&o.toggleWidget(...I))},[s.isWidgetVisible?b("",!0):(i(),d("img",xl)),o.isBubbleExpanded?(i(),d("div",Cl,n(o.getWidgetBubbleLauncherTitle),1)):b("",!0),s.isWidgetVisible?(i(),d("div",vl,t[1]||(t[1]=[l("div",{class:"absolute w-0.5 h-8 rotate-45 -translate-y-1/2 bg-white"},null,-1),l("div",{class:"absolute w-0.5 h-8 -rotate-45 -translate-y-1/2 bg-white"},null,-1)]))):b("",!0)],6)],4)])}const Ul=f(Gl,[["render",Rl]]),kl={components:{Widget:Ul,InputRadioGroup:J},props:{inbox:{type:Object,default:()=>{}}},setup(){return{v$:v()}},data(){return{isWidgetPreview:!0,color:"#1f93ff",websiteName:"",welcomeHeading:"",welcomeTagline:"",replyTime:"in_a_few_minutes",avatarFile:null,avatarUrl:"",widgetBubblePosition:"right",widgetBubbleLauncherTitle:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.DEFAULT"),widgetBubbleType:"standard",widgetBubblePositions:[{id:"left",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.LEFT"),checked:!1},{id:"right",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION.RIGHT"),checked:!0}],widgetBubbleTypes:[{id:"standard",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.STANDARD"),checked:!0},{id:"expanded_bubble",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE.EXPANDED_BUBBLE"),checked:!1}]}},computed:{...y({uiFlags:"inboxes/getUIFlags"}),storageKey(){return`${Re.WIDGET_BUILDER}${this.inbox.id}`},widgetScript(){let e={position:this.widgetBubblePosition,type:this.widgetBubbleType,launcherTitle:this.widgetBubbleLauncherTitle},t=this.inbox.web_widget_script;return t.substring(0,13)+this.$t("INBOX_MGMT.WIDGET_BUILDER.SCRIPT_SETTINGS",{options:JSON.stringify(e)})+t.substring(13)},getWidgetViewOptions(){return[{id:"preview",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.PREVIEW"),checked:!0},{id:"script",title:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_VIEW_OPTION.SCRIPT"),checked:!1}]},getReplyTimeOptions(){return[{key:"in_a_few_minutes",value:"in_a_few_minutes",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_MINUTES")},{key:"in_a_few_hours",value:"in_a_few_hours",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_FEW_HOURS")},{key:"in_a_day",value:"in_a_day",text:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.IN_A_DAY")}]},websiteNameValidationErrorMsg(){return this.v$.websiteName.$error?this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.ERROR"):""}},mounted(){this.setDefaults()},validations:{websiteName:{required:w}},methods:{setDefaults(){const{name:e,welcome_title:t,welcome_tagline:a,widget_color:_,reply_time:s,avatar_url:o}=this.inbox;this.websiteName=e,this.welcomeHeading=t,this.welcomeTagline=a,this.color=_,this.replyTime=s,this.avatarUrl=o;const u=this.getSavedInboxInformation();u&&(this.widgetBubblePositions=this.widgetBubblePositions.map(h=>(h.id===u.position&&(h.checked=!0,this.widgetBubblePosition=h.id),h)),this.widgetBubbleTypes=this.widgetBubbleTypes.map(h=>(h.id===u.type&&(h.checked=!0,this.widgetBubbleType=h.id),h)),this.widgetBubbleLauncherTitle=u.launcherTitle||"Chat with us")},handleWidgetBubblePositionChange(e){this.widgetBubblePosition=e.id},handleWidgetBubbleTypeChange(e){this.widgetBubbleType=e.id},handleWidgetViewChange(e){this.isWidgetPreview=e.id==="preview"},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.inbox.id),this.avatarFile=null,this.avatarUrl="",p(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.SUCCESS_MESSAGE"))}catch(e){p(e.message?e.message:this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.DELETE.API.ERROR_MESSAGE"))}},async updateWidget(){const e={position:this.widgetBubblePosition,launcherTitle:this.widgetBubbleLauncherTitle,type:this.widgetBubbleType};le.set(this.storageKey,e);try{const t={id:this.inbox.id,name:this.websiteName,channel:{widget_color:this.color,welcome_title:this.welcomeHeading,welcome_tagline:this.welcomeTagline,reply_time:this.replyTime}};this.avatarFile&&(t.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",t),p(this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.SUCCESS_MESSAGE"))}catch(t){p(t.message||this.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.API.ERROR_MESSAGE"))}},getSavedInboxInformation(){return le.get(this.storageKey)}}},$l={class:"mx-8"},Wl={class:"flex p-2.5"},Xl={class:"w-100 lg:w-[40%]"},Fl={class:"min-h-full py-4 overflow-y-scroll"},Hl=["value"],Vl={class:"w-100 lg:w-3/5"},Yl={key:0,class:"flex flex-col items-center justify-end min-h-[40.625rem] mx-5 mb-5 p-2.5 bg-slate-50 dark:bg-slate-900/50 rounded-lg"},zl={key:1,class:"mx-5 p-2.5 bg-slate-50 rounded-lg dark:bg-slate-700"};function Kl(e,t,a,_,s,o){const u=c("woot-avatar-uploader"),h=c("woot-input"),T=c("woot-color-picker"),E=c("InputRadioGroup"),I=c("woot-submit-button"),g=c("Widget"),G=c("woot-code");return i(),d("div",$l,[l("div",Wl,[l("div",Xl,[l("div",Fl,[l("form",{onSubmit:t[6]||(t[6]=R((...N)=>o.updateWidget&&o.updateWidget(...N),["prevent"]))},[r(u,{label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.AVATAR.LABEL"),src:s.avatarUrl,"delete-avatar":"",onOnAvatarSelect:o.handleImageUpload,onOnAvatarDelete:o.handleAvatarDelete},null,8,["label","src","onOnAvatarSelect","onOnAvatarDelete"]),r(h,{modelValue:s.websiteName,"onUpdate:modelValue":t[0]||(t[0]=N=>s.websiteName=N),class:M({error:_.v$.websiteName.$error}),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WEBSITE_NAME.PLACE_HOLDER"),error:o.websiteNameValidationErrorMsg,onBlur:_.v$.websiteName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),r(h,{modelValue:s.welcomeHeading,"onUpdate:modelValue":t[1]||(t[1]=N=>s.welcomeHeading=N),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_HEADING.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),r(h,{modelValue:s.welcomeTagline,"onUpdate:modelValue":t[2]||(t[2]=N=>s.welcomeTagline=N),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WELCOME_TAGLINE.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),l("label",null,[O(n(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.REPLY_TIME.LABEL"))+" ",1),S(l("select",{"onUpdate:modelValue":t[3]||(t[3]=N=>s.replyTime=N)},[(i(!0),d(P,null,x(o.getReplyTimeOptions,N=>(i(),d("option",{key:N.key,value:N.value},n(N.text),9,Hl))),128))],512),[[D,s.replyTime]])]),l("label",null,[O(n(e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_COLOR_LABEL"))+" ",1),r(T,{modelValue:s.color,"onUpdate:modelValue":t[4]||(t[4]=N=>s.color=N)},null,8,["modelValue"])]),r(E,{name:"widget-bubble-position",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_POSITION_LABEL"),items:s.widgetBubblePositions,action:o.handleWidgetBubblePositionChange},null,8,["label","items","action"]),r(E,{name:"widget-bubble-type",label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_TYPE_LABEL"),items:s.widgetBubbleTypes,action:o.handleWidgetBubbleTypeChange},null,8,["label","items","action"]),r(h,{modelValue:s.widgetBubbleLauncherTitle,"onUpdate:modelValue":t[5]||(t[5]=N=>s.widgetBubbleLauncherTitle=N),label:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.WIDGET_BUBBLE_LAUNCHER_TITLE.PLACE_HOLDER")},null,8,["modelValue","label","placeholder"]),r(I,{class:"mt-4","button-text":e.$t("INBOX_MGMT.WIDGET_BUILDER.WIDGET_OPTIONS.UPDATE.BUTTON_TEXT"),loading:e.uiFlags.isUpdating,disabled:_.v$.$invalid||e.uiFlags.isUpdating},null,8,["button-text","loading","disabled"])],32)])]),l("div",Vl,[r(E,{name:"widget-view-options",class:"text-center",items:o.getWidgetViewOptions,action:o.handleWidgetViewChange},null,8,["items","action"]),s.isWidgetPreview?(i(),d("div",Yl,[r(g,{"welcome-heading":s.welcomeHeading,"welcome-tagline":s.welcomeTagline,"website-name":s.websiteName,logo:s.avatarUrl,"is-online":"","reply-time":s.replyTime,color:s.color,"widget-bubble-position":s.widgetBubblePosition,"widget-bubble-launcher-title":s.widgetBubbleLauncherTitle,"widget-bubble-type":s.widgetBubbleType},null,8,["welcome-heading","welcome-tagline","website-name","logo","reply-time","color","widget-bubble-position","widget-bubble-launcher-title","widget-bubble-type"])])):(i(),d("div",zl,[r(G,{script:o.widgetScript},null,8,["script"])]))])])])}const jl=f(kl,[["render",Kl]]),ql={components:{LoadingState:Be,SettingsSection:C},props:{inbox:{type:Object,default:()=>({})}},data(){return{selectedAgentBotId:null}},computed:{...y({agentBots:"agentBots/getBots",uiFlags:"agentBots/getUIFlags"}),activeAgentBot(){return this.$store.getters["agentBots/getActiveAgentBot"](this.inbox.id)}},watch:{activeAgentBot(){this.selectedAgentBotId=this.activeAgentBot.id}},mounted(){this.$store.dispatch("agentBots/get"),this.$store.dispatch("agentBots/fetchAgentBotInbox",this.inbox.id)},methods:{async updateActiveAgentBot(){try{await this.$store.dispatch("agentBots/setAgentBotInbox",{inboxId:this.inbox.id,botId:this.selectedAgentBotId?this.selectedAgentBotId:void 0}),p(this.$t("AGENT_BOTS.BOT_CONFIGURATION.SUCCESS_MESSAGE"))}catch{p(this.$t("AGENT_BOTS.BOT_CONFIGURATION.ERROR_MESSAGE"))}},async disconnectBot(){try{await this.$store.dispatch("agentBots/disconnectBot",{inboxId:this.inbox.id}),p(this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_SUCCESS_MESSAGE"))}catch(e){p((e==null?void 0:e.message)||this.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECTED_ERROR_MESSAGE"))}}}},Zl={class:"mx-8"},Jl={class:"w-3/5"},Ql={value:"",disabled:"",selected:""},eo=["value"],to={class:"button-container"};function so(e,t,a,_,s,o){const u=c("LoadingState"),h=c("woot-submit-button"),T=c("woot-button"),E=c("SettingsSection");return i(),d("div",Zl,[e.uiFlags.isFetching||e.uiFlags.isFetchingAgentBot?(i(),B(u,{key:0})):(i(),d("form",{key:1,class:"flex flex-wrap mx-0",onSubmit:t[1]||(t[1]=R((...I)=>o.updateActiveAgentBot&&o.updateActiveAgentBot(...I),["prevent"]))},[r(E,{title:e.$t("AGENT_BOTS.BOT_CONFIGURATION.TITLE"),"sub-title":e.$t("AGENT_BOTS.BOT_CONFIGURATION.DESC")},{default:A(()=>[l("div",Jl,[l("label",null,[S(l("select",{"onUpdate:modelValue":t[0]||(t[0]=I=>s.selectedAgentBotId=I)},[l("option",Ql,n(e.$t("AGENT_BOTS.BOT_CONFIGURATION.SELECT_PLACEHOLDER")),1),(i(!0),d(P,null,x(e.agentBots,I=>(i(),d("option",{key:I.id,value:I.id},n(I.name),9,eo))),128))],512),[[D,s.selectedAgentBotId]])]),l("div",to,[r(h,{"button-text":e.$t("AGENT_BOTS.BOT_CONFIGURATION.SUBMIT"),loading:e.uiFlags.isSettingAgentBot},null,8,["button-text","loading"]),r(T,{type:"button",disabled:!s.selectedAgentBotId,loading:e.uiFlags.isDisconnecting,variant:"smooth","color-scheme":"alert",class:"button--disconnect",onClick:o.disconnectBot},{default:A(()=>[O(n(e.$t("AGENT_BOTS.BOT_CONFIGURATION.DISCONNECT")),1)]),_:1},8,["disabled","loading","onClick"])])])]),_:1},8,["title","sub-title"])],32))])}const lo=f(ql,[["render",so],["__scopeId","data-v-d031b38c"]]),oo={props:{heading:{type:String,default:""},content:{type:String,default:""},active:{type:Boolean,default:!1},src:{type:String,default:""}}},io={class:"flex items-center p-1 text-sm font-medium"},no={class:"text-slate-700 dark:text-slate-200 text-xs leading-[1.4] px-3 pt-3 pb-0 text-start"},ao={key:0,class:"p-3"},ro=["src"];function _o(e,t,a,_,s,o){const u=c("fluent-icon");return i(),d("div",{class:M(["flex flex-col min-w-[15rem] max-h-[21.25rem] max-w-[23.75rem] rounded-md border border-solid border-slate-75 dark:border-slate-600",{"bg-woot-25 dark:bg-slate-700 border border-solid border-woot-300 dark:border-woot-400":a.active}])},[l("div",{class:M(["flex justify-between items-center px-2 w-full h-10 bg-slate-50 dark:bg-slate-900 rounded-t-[5px] border-b border-solid border-slate-50 dark:border-slate-600",{"bg-woot-50 border-b border-solid border-woot-75 dark:border-woot-700":a.active}])},[l("div",io,n(a.heading),1),a.active?(i(),B(u,{key:0,icon:"checkmark-circle",type:"solid",size:"24",class:"text-woot-500 dark:text-woot-500"})):b("",!0)],2),l("div",no,n(a.content),1),a.src?(i(),d("div",ao,[l("img",{src:a.src,class:M(["border border-solid rounded-md",a.active?"border-woot-75 dark:border-woot-700":"border-slate-50 dark:border-slate-600"])},null,10,ro)])):Y(e.$slots,"default",{key:1})],2)}const uo=f(oo,[["render",_o]]),co={components:{PreviewCard:uo,Thumbnail:ae},props:{senderNameType:{type:String,default:"friendly"},businessName:{type:String,default:""}},emits:["update"],data(){return{senderNameKeyOptions:[{key:"friendly",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.SUBTITLE"),preview:{senderName:"Smith",businessName:"Altores",email:"<support@yourbusiness.com>"}},{key:"professional",heading:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.TITLE"),content:this.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.PROFESSIONAL.SUBTITLE"),preview:{senderName:"",businessName:"Altores",email:"<support@yourbusiness.com>"}}]}},methods:{isKeyOptionFriendly(e){return e==="friendly"},userName(e){return this.isKeyOptionFriendly(e.key)?e.preview.senderName:e.preview.businessName},toggleSenderNameType(e){this.$emit("update",e)}}},Eo={class:"flex flex-row items-center gap-4"},ho=["onClick"],mo={class:"flex flex-col items-start p-3 gap-2"},bo={class:"text-xs"},To={class:"flex flex-row items-center gap-2"},Io={class:"flex flex-col items-start gap-1"},po={class:"items-center flex flex-row gap-0.5 max-w-[18rem]"},go={key:0,class:"text-xs font-semibold leading-tight"},So={key:1,class:"text-xs"},Ao={class:"text-xs font-semibold leading-tight overflow-hidden whitespace-nowrap text-ellipsis"},Mo={class:"text-xs"};function No(e,t,a,_,s,o){const u=c("Thumbnail"),h=c("PreviewCard");return i(),d("div",Eo,[(i(!0),d(P,null,x(s.senderNameKeyOptions,T=>(i(),d("button",{key:T.key,class:"text-slate-800 dark:text-slate-100 cursor-pointer p-0",onClick:E=>o.toggleSenderNameType(T.key)},[r(h,{heading:T.heading,content:T.content,active:T.key===a.senderNameType},{default:A(()=>[l("div",mo,[l("span",bo,n(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FOR_EG")),1),l("div",To,[r(u,{username:o.userName(T),size:"32px"},null,8,["username"]),l("div",Io,[l("div",po,[o.isKeyOptionFriendly(T.key)?(i(),d("span",go,n(T.preview.senderName),1)):b("",!0),o.isKeyOptionFriendly(T.key)?(i(),d("span",So,n(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.FRIENDLY.FROM")),1)):b("",!0),l("span",Ao,n(a.businessName||T.preview.businessName),1)]),l("span",Mo,n(T.preview.email),1)])])])]),_:2},1032,["heading","content","active"])],8,ho))),128))])}const Oo=f(co,[["render",No]]),Bo={components:{BotConfiguration:lo,CollaboratorsPage:el,ConfigurationPage:Vs,FacebookReauthorize:Ke,GreetingsEditor:fe,PreChatFormSettings:Dt,SettingIntroBanner:ge,SettingsSection:C,WeeklyAvailability:os,WidgetBuilder:jl,SenderNameExamplePreview:Oo,MicrosoftReauthorize:je,GoogleReauthorize:qe},mixins:[q],setup(){return{v$:v()}},data(){return{avatarFile:null,avatarUrl:"",greetingEnabled:!0,greetingMessage:"",emailCollectEnabled:!1,csatSurveyEnabled:!1,senderNameType:"friendly",businessName:"",locktoSingleConversation:!1,allowMessagesAfterResolved:!0,continuityViaEmail:!0,selectedInboxName:"",channelWebsiteUrl:"",webhookUrl:"",channelWelcomeTitle:"",channelWelcomeTagline:"",selectedFeatureFlags:[],replyTime:"",selectedTabIndex:0,selectedPortalSlug:"",showBusinessNameInput:!1}},computed:{...y({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",uiFlags:"inboxes/getUIFlags",portals:"portals/allPortals"}),selectedTabKey(){var e;return(e=this.tabs[this.selectedTabIndex])==null?void 0:e.key},whatsAppAPIProviderName(){return this.isAWhatsAppCloudChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.WHATSAPP_CLOUD"):this.is360DialogWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.360_DIALOG"):this.isATwilioWhatsAppChannel?this.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.TWILIO"):""},tabs(){let e=[{key:"inbox_settings",name:this.$t("INBOX_MGMT.TABS.SETTINGS")},{key:"collaborators",name:this.$t("INBOX_MGMT.TABS.COLLABORATORS")},{key:"businesshours",name:this.$t("INBOX_MGMT.TABS.BUSINESS_HOURS")}];return this.isAWebWidgetInbox&&(e=[...e,{key:"preChatForm",name:this.$t("INBOX_MGMT.TABS.PRE_CHAT_FORM")},{key:"widgetBuilder",name:this.$t("INBOX_MGMT.TABS.WIDGET_BUILDER")}]),(this.isATwilioChannel||this.isALineChannel||this.isAPIInbox||this.isAnEmailChannel&&!this.inbox.provider||this.isAMicrosoftInbox||this.isAGoogleInbox||this.isAWhatsAppChannel||this.isAWebWidgetInbox)&&(e=[...e,{key:"configuration",name:this.$t("INBOX_MGMT.TABS.CONFIGURATION")}]),this.isFeatureEnabledonAccount(this.accountId,Ge.AGENT_BOTS)&&!(this.isAnEmailChannel||this.isATwitterInbox)&&(e=[...e,{key:"botConfiguration",name:this.$t("INBOX_MGMT.TABS.BOT_CONFIGURATION")}]),e},currentInboxId(){return this.$route.params.inboxId},inbox(){return this.$store.getters["inboxes/getInbox"](this.currentInboxId)},inboxName(){return this.isATwilioSMSChannel||this.isATwilioWhatsAppChannel?`${this.inbox.name} (${this.inbox.messaging_service_sid||this.inbox.phone_number})`:this.isAWhatsAppChannel?`${this.inbox.name} (${this.inbox.phone_number})`:this.isAnEmailChannel?`${this.inbox.name} (${this.inbox.email})`:this.inbox.name},canLocktoSingleConversation(){return this.isASmsInbox||this.isAWhatsAppChannel||this.isAFacebookInbox},inboxNameLabel(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.LABEL"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.LABEL")},inboxNamePlaceHolder(){return this.isAWebWidgetInbox?this.$t("INBOX_MGMT.ADD.WEBSITE_NAME.PLACEHOLDER"):this.$t("INBOX_MGMT.ADD.CHANNEL_NAME.PLACEHOLDER")},textAreaChannels(){return!!(this.isATwilioChannel||this.isATwitterInbox||this.isAFacebookInbox)},microsoftUnauthorized(){return this.isAMicrosoftInbox&&this.inbox.reauthorization_required},facebookUnauthorized(){return this.isAFacebookInbox&&this.inbox.reauthorization_required},googleUnauthorized(){const e=["imap.gmail.com","imap.google.com"].includes(this.inbox.imap_address);return(this.isAGoogleInbox||e)&&this.inbox.reauthorization_required}},watch:{$route(e){e.name==="settings_inbox_show"&&this.fetchInboxSettings()}},mounted(){this.fetchInboxSettings(),this.fetchPortals()},methods:{fetchPortals(){this.$store.dispatch("portals/index")},handleFeatureFlag(e){this.selectedFeatureFlags=this.toggleInput(this.selectedFeatureFlags,e.target.value)},toggleInput(e,t){return e.includes(t)?e.filter(_=>_!==t):[...e,t]},onTabChange(e){this.selectedTabIndex=e},fetchInboxSettings(){this.selectedTabIndex=0,this.selectedAgents=[],this.$store.dispatch("agents/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get"),this.$store.dispatch("inboxes/get").then(()=>{this.avatarUrl=this.inbox.avatar_url,this.selectedInboxName=this.inbox.name,this.webhookUrl=this.inbox.webhook_url,this.greetingEnabled=this.inbox.greeting_enabled||!1,this.greetingMessage=this.inbox.greeting_message||"",this.emailCollectEnabled=this.inbox.enable_email_collect,this.csatSurveyEnabled=this.inbox.csat_survey_enabled,this.senderNameType=this.inbox.sender_name_type,this.businessName=this.inbox.business_name,this.allowMessagesAfterResolved=this.inbox.allow_messages_after_resolved,this.continuityViaEmail=this.inbox.continuity_via_email,this.channelWebsiteUrl=this.inbox.website_url,this.channelWelcomeTitle=this.inbox.welcome_title,this.channelWelcomeTagline=this.inbox.welcome_tagline,this.selectedFeatureFlags=this.inbox.selected_feature_flags||[],this.replyTime=this.inbox.reply_time,this.locktoSingleConversation=this.inbox.lock_to_single_conversation,this.selectedPortalSlug=this.inbox.help_center?this.inbox.help_center.slug:""})},async updateInbox(){try{const e={id:this.currentInboxId,name:this.selectedInboxName,enable_email_collect:this.emailCollectEnabled,csat_survey_enabled:this.csatSurveyEnabled,allow_messages_after_resolved:this.allowMessagesAfterResolved,greeting_enabled:this.greetingEnabled,greeting_message:this.greetingMessage||"",portal_id:this.selectedPortalSlug?this.portals.find(t=>t.slug===this.selectedPortalSlug).id:null,lock_to_single_conversation:this.locktoSingleConversation,sender_name_type:this.senderNameType,business_name:this.businessName||null,channel:{widget_color:this.inbox.widget_color,website_url:this.channelWebsiteUrl,webhook_url:this.webhookUrl,welcome_title:this.channelWelcomeTitle||"",welcome_tagline:this.channelWelcomeTagline||"",selectedFeatureFlags:this.selectedFeatureFlags,reply_time:this.replyTime||"in_a_few_minutes",continuity_via_email:this.continuityViaEmail}};this.avatarFile&&(e.avatar=this.avatarFile),await this.$store.dispatch("inboxes/updateInbox",e),p(this.$t("INBOX_MGMT.EDIT.API.SUCCESS_MESSAGE"))}catch(e){p(e.message||this.$t("INBOX_MGMT.EDIT.API.ERROR_MESSAGE"))}},handleImageUpload({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async handleAvatarDelete(){try{await this.$store.dispatch("inboxes/deleteInboxAvatar",this.currentInboxId),this.avatarFile=null,this.avatarUrl="",p(this.$t("INBOX_MGMT.DELETE.API.AVATAR_SUCCESS_MESSAGE"))}catch(e){p(e.message?e.message:this.$t("INBOX_MGMT.DELETE.API.AVATAR_ERROR_MESSAGE"))}},toggleSenderNameType(e){this.senderNameType=e},onClickShowBusinessNameInput(){this.showBusinessNameInput=!this.showBusinessNameInput,this.showBusinessNameInput&&this.$nextTick(()=>{this.$refs.businessNameInput.focus()})}},validations:{webhookUrl:{shouldBeUrl:Ie},selectedInboxName:{}}},fo={class:"flex-grow flex-shrink w-full min-w-0 pl-0 pr-0 overflow-auto bg-white settings dark:bg-slate-800"},Go={key:3,class:"mx-8"},Lo={key:4,class:"w-3/4 pb-4"},Do={key:5,class:"w-3/4 pb-4"},wo={class:"w-3/4 pb-4"},yo={value:!0},Po={value:!1},xo={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},Co={key:6,class:"pb-4"},vo={key:7,class:"w-3/4 pb-4"},Ro={key:"in_a_few_minutes",value:"in_a_few_minutes"},Uo={key:"in_a_few_hours",value:"in_a_few_hours"},ko={key:"in_a_day",value:"in_a_day"},$o={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},Wo={key:8,class:"w-3/4 pb-4"},Xo={value:!0},Fo={value:!1},Ho={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},Vo={class:"w-3/4 pb-4"},Yo={value:!0},zo={value:!1},Ko={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},jo={key:9,class:"w-3/4 pb-4"},qo={value:!0},Zo={value:!1},Jo={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},Qo={key:10,class:"w-3/4 pb-4"},ei={value:!0},ti={value:!1},si={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},li={class:"w-3/4 pb-4"},oi={value:""},ii=["value"],ni={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},ai={key:11,class:"w-3/4 pb-4"},ri={value:!0},di={value:!1},_i={class:"pb-1 text-sm not-italic text-slate-600 dark:text-slate-400"},ui={key:12},ci={key:13,class:"flex gap-2 pt-2 pb-4"},Ei={for:"attachments"},hi={key:14,class:"flex gap-2 pb-4"},mi={for:"emoji_picker"},bi={key:15,class:"flex gap-2 pb-4"},Ti={for:"end_conversation"},Ii={key:16,class:"flex gap-2 pb-4"},pi={for:"use_inbox_avatar_for_bot"},gi={class:"w-3/4 pb-4"},Si={class:"flex flex-col items-start gap-2 mt-2"},Ai={key:0,class:"flex gap-2 w-[80%]"},Mi=["placeholder"],Ni={key:4,class:"mx-8"},Oi={key:5},Bi={key:6},fi={key:7},Gi={key:8},Li={key:9};function Di(e,t,a,_,s,o){const u=c("woot-tabs-item"),h=c("woot-tabs"),T=c("SettingIntroBanner"),E=c("MicrosoftReauthorize"),I=c("FacebookReauthorize"),g=c("GoogleReauthorize"),G=c("woot-avatar-uploader"),N=c("woot-input"),re=c("woot-color-picker"),de=c("GreetingsEditor"),F=c("SettingsSection"),_e=c("SenderNameExamplePreview"),Q=c("woot-button"),ee=c("woot-submit-button"),ue=c("CollaboratorsPage"),ce=c("ConfigurationPage"),Ee=c("PreChatFormSettings"),he=c("WeeklyAvailability"),me=c("WidgetBuilder"),be=c("BotConfiguration");return i(),d("div",fo,[r(T,{"header-image":o.inbox.avatarUrl,"header-title":o.inboxName},{default:A(()=>[r(h,{class:"settings--tabs",index:s.selectedTabIndex,border:!1,onChange:o.onTabChange},{default:A(()=>[(i(!0),d(P,null,x(o.tabs,(m,Te)=>(i(),B(u,{key:m.key,index:Te,name:m.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index","onChange"])]),_:1},8,["header-image","header-title"]),o.microsoftUnauthorized?(i(),B(E,{key:0,inbox:o.inbox},null,8,["inbox"])):b("",!0),o.facebookUnauthorized?(i(),B(I,{key:1,inbox:o.inbox},null,8,["inbox"])):b("",!0),o.googleUnauthorized?(i(),B(g,{key:2,inbox:o.inbox},null,8,["inbox"])):b("",!0),o.selectedTabKey==="inbox_settings"?(i(),d("div",Go,[r(F,{title:e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_TITLE"),"sub-title":e.$t("INBOX_MGMT.SETTINGS_POPUP.INBOX_UPDATE_SUB_TEXT"),"show-border":!1},{default:A(()=>[r(G,{label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_AVATAR.LABEL"),src:s.avatarUrl,class:"pb-4","delete-avatar":"",onOnAvatarSelect:o.handleImageUpload,onOnAvatarDelete:o.handleAvatarDelete},null,8,["label","src","onOnAvatarSelect","onOnAvatarDelete"]),r(N,{modelValue:s.selectedInboxName,"onUpdate:modelValue":t[0]||(t[0]=m=>s.selectedInboxName=m),class:M(["w-3/4 pb-4",{error:_.v$.selectedInboxName.$error}]),label:o.inboxNameLabel,placeholder:o.inboxNamePlaceHolder,error:_.v$.selectedInboxName.$error?e.$t("INBOX_MGMT.ADD.CHANNEL_NAME.ERROR"):"",onBlur:_.v$.selectedInboxName.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"]),e.isAPIInbox?(i(),B(N,{key:0,modelValue:s.webhookUrl,"onUpdate:modelValue":t[1]||(t[1]=m=>s.webhookUrl=m),class:M(["w-3/4 pb-4",{error:_.v$.webhookUrl.$error}]),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.PLACEHOLDER"),error:_.v$.webhookUrl.$error?e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WEBHOOK_URL.ERROR"):"",onBlur:_.v$.webhookUrl.$touch},null,8,["modelValue","class","label","placeholder","error","onBlur"])):b("",!0),e.isAWebWidgetInbox?(i(),B(N,{key:1,modelValue:s.channelWebsiteUrl,"onUpdate:modelValue":t[2]||(t[2]=m=>s.channelWebsiteUrl=m),class:"w-3/4 pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_DOMAIN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):b("",!0),e.isAWebWidgetInbox?(i(),B(N,{key:2,modelValue:s.channelWelcomeTitle,"onUpdate:modelValue":t[3]||(t[3]=m=>s.channelWelcomeTitle=m),class:"w-3/4 pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TITLE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):b("",!0),e.isAWebWidgetInbox?(i(),B(N,{key:3,modelValue:s.channelWelcomeTagline,"onUpdate:modelValue":t[4]||(t[4]=m=>s.channelWelcomeTagline=m),class:"w-3/4 pb-4",label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_WELCOME_TAGLINE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):b("",!0),e.isAWebWidgetInbox?(i(),d("label",Lo,[O(n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.WIDGET_COLOR.LABEL"))+" ",1),r(re,{modelValue:o.inbox.widget_color,"onUpdate:modelValue":t[5]||(t[5]=m=>o.inbox.widget_color=m)},null,8,["modelValue"])])):b("",!0),e.isAWhatsAppChannel?(i(),d("label",Do,[O(n(e.$t("INBOX_MGMT.ADD.WHATSAPP.PROVIDERS.LABEL"))+" ",1),S(l("input",{"onUpdate:modelValue":t[6]||(t[6]=m=>o.whatsAppAPIProviderName=m),type:"text",disabled:""},null,512),[[U,o.whatsAppAPIProviderName]])])):b("",!0),l("label",wo,[O(n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.LABEL"))+" ",1),S(l("select",{"onUpdate:modelValue":t[7]||(t[7]=m=>s.greetingEnabled=m)},[l("option",yo,n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.ENABLED")),1),l("option",Po,n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.DISABLED")),1)],512),[[D,s.greetingEnabled]]),l("p",xo,n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_TOGGLE.HELP_TEXT")),1)]),s.greetingEnabled?(i(),d("div",Co,[r(de,{modelValue:s.greetingMessage,"onUpdate:modelValue":t[8]||(t[8]=m=>s.greetingMessage=m),label:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.LABEL"),placeholder:e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.CHANNEL_GREETING_MESSAGE.PLACEHOLDER"),richtext:!o.textAreaChannels},null,8,["modelValue","label","placeholder","richtext"])])):b("",!0),e.isAWebWidgetInbox?(i(),d("label",vo,[O(n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.TITLE"))+" ",1),S(l("select",{"onUpdate:modelValue":t[9]||(t[9]=m=>s.replyTime=m)},[l("option",Ro,n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_MINUTES")),1),l("option",Uo,n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_FEW_HOURS")),1),l("option",ko,n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.IN_A_DAY")),1)],512),[[D,s.replyTime]]),l("p",$o,n(e.$t("INBOX_MGMT.ADD.WEBSITE_CHANNEL.REPLY_TIME.HELP_TEXT")),1)])):b("",!0),e.isAWebWidgetInbox?(i(),d("label",Wo,[O(n(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX"))+" ",1),S(l("select",{"onUpdate:modelValue":t[10]||(t[10]=m=>s.emailCollectEnabled=m)},[l("option",Xo,n(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.ENABLED")),1),l("option",Fo,n(e.$t("INBOX_MGMT.EDIT.EMAIL_COLLECT_BOX.DISABLED")),1)],512),[[D,s.emailCollectEnabled]]),l("p",Ho,n(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_EMAIL_COLLECT_BOX_SUB_TEXT")),1)])):b("",!0),l("label",Vo,[O(n(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CSAT"))+" ",1),S(l("select",{"onUpdate:modelValue":t[11]||(t[11]=m=>s.csatSurveyEnabled=m)},[l("option",Yo,n(e.$t("INBOX_MGMT.EDIT.ENABLE_CSAT.ENABLED")),1),l("option",zo,n(e.$t("INBOX_MGMT.EDIT.ENABLE_CSAT.DISABLED")),1)],512),[[D,s.csatSurveyEnabled]]),l("p",Ko,n(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CSAT_SUB_TEXT")),1)]),e.isAWebWidgetInbox?(i(),d("label",jo,[O(n(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED"))+" ",1),S(l("select",{"onUpdate:modelValue":t[12]||(t[12]=m=>s.allowMessagesAfterResolved=m)},[l("option",qo,n(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.ENABLED")),1),l("option",Zo,n(e.$t("INBOX_MGMT.EDIT.ALLOW_MESSAGES_AFTER_RESOLVED.DISABLED")),1)],512),[[D,s.allowMessagesAfterResolved]]),l("p",Jo,n(e.$t("INBOX_MGMT.SETTINGS_POPUP.ALLOW_MESSAGES_AFTER_RESOLVED_SUB_TEXT")),1)])):b("",!0),e.isAWebWidgetInbox?(i(),d("label",Qo,[O(n(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL"))+" ",1),S(l("select",{"onUpdate:modelValue":t[13]||(t[13]=m=>s.continuityViaEmail=m)},[l("option",ei,n(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.ENABLED")),1),l("option",ti,n(e.$t("INBOX_MGMT.EDIT.ENABLE_CONTINUITY_VIA_EMAIL.DISABLED")),1)],512),[[D,s.continuityViaEmail]]),l("p",si,n(e.$t("INBOX_MGMT.SETTINGS_POPUP.ENABLE_CONTINUITY_VIA_EMAIL_SUB_TEXT")),1)])):b("",!0),l("div",li,[l("label",null,n(e.$t("INBOX_MGMT.HELP_CENTER.LABEL")),1),S(l("select",{"onUpdate:modelValue":t[14]||(t[14]=m=>s.selectedPortalSlug=m),class:"filter__question"},[l("option",oi,n(e.$t("INBOX_MGMT.HELP_CENTER.PLACEHOLDER")),1),(i(!0),d(P,null,x(e.portals,m=>(i(),d("option",{key:m.slug,value:m.slug},n(m.name),9,ii))),128))],512),[[D,s.selectedPortalSlug]]),l("p",ni,n(e.$t("INBOX_MGMT.HELP_CENTER.SUB_TEXT")),1)]),o.canLocktoSingleConversation?(i(),d("label",ai,[O(n(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION"))+" ",1),S(l("select",{"onUpdate:modelValue":t[15]||(t[15]=m=>s.locktoSingleConversation=m)},[l("option",ri,n(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.ENABLED")),1),l("option",di,n(e.$t("INBOX_MGMT.EDIT.LOCK_TO_SINGLE_CONVERSATION.DISABLED")),1)],512),[[D,s.locktoSingleConversation]]),l("p",_i,n(e.$t("INBOX_MGMT.SETTINGS_POPUP.LOCK_TO_SINGLE_CONVERSATION_SUB_TEXT")),1)])):b("",!0),e.isAWebWidgetInbox?(i(),d("label",ui,n(e.$t("INBOX_MGMT.FEATURES.LABEL")),1)):b("",!0),e.isAWebWidgetInbox?(i(),d("div",ci,[S(l("input",{"onUpdate:modelValue":t[16]||(t[16]=m=>s.selectedFeatureFlags=m),type:"checkbox",value:"attachments",onInput:t[17]||(t[17]=(...m)=>o.handleFeatureFlag&&o.handleFeatureFlag(...m))},null,544),[[L,s.selectedFeatureFlags]]),l("label",Ei,n(e.$t("INBOX_MGMT.FEATURES.DISPLAY_FILE_PICKER")),1)])):b("",!0),e.isAWebWidgetInbox?(i(),d("div",hi,[S(l("input",{"onUpdate:modelValue":t[18]||(t[18]=m=>s.selectedFeatureFlags=m),type:"checkbox",value:"emoji_picker",onInput:t[19]||(t[19]=(...m)=>o.handleFeatureFlag&&o.handleFeatureFlag(...m))},null,544),[[L,s.selectedFeatureFlags]]),l("label",mi,n(e.$t("INBOX_MGMT.FEATURES.DISPLAY_EMOJI_PICKER")),1)])):b("",!0),e.isAWebWidgetInbox?(i(),d("div",bi,[S(l("input",{"onUpdate:modelValue":t[20]||(t[20]=m=>s.selectedFeatureFlags=m),type:"checkbox",value:"end_conversation",onInput:t[21]||(t[21]=(...m)=>o.handleFeatureFlag&&o.handleFeatureFlag(...m))},null,544),[[L,s.selectedFeatureFlags]]),l("label",Ti,n(e.$t("INBOX_MGMT.FEATURES.ALLOW_END_CONVERSATION")),1)])):b("",!0),e.isAWebWidgetInbox?(i(),d("div",Ii,[S(l("input",{"onUpdate:modelValue":t[22]||(t[22]=m=>s.selectedFeatureFlags=m),type:"checkbox",value:"use_inbox_avatar_for_bot",onInput:t[23]||(t[23]=(...m)=>o.handleFeatureFlag&&o.handleFeatureFlag(...m))},null,544),[[L,s.selectedFeatureFlags]]),l("label",pi,n(e.$t("INBOX_MGMT.FEATURES.USE_INBOX_AVATAR_FOR_BOT")),1)])):b("",!0)]),_:1},8,["title","sub-title"]),e.isAWebWidgetInbox||e.isAnEmailChannel?(i(),B(F,{key:0,title:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.TITLE"),"sub-title":e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.SUB_TEXT"),"show-border":!1},{default:A(()=>[l("div",gi,[r(_e,{"sender-name-type":s.senderNameType,"business-name":s.businessName,onUpdate:o.toggleSenderNameType},null,8,["sender-name-type","business-name","onUpdate"]),l("div",Si,[r(Q,{variant:"clear","color-scheme":"primary",onClick:o.onClickShowBusinessNameInput},{default:A(()=>[O(n(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.BUTTON_TEXT")),1)]),_:1},8,["onClick"]),s.showBusinessNameInput?(i(),d("div",Ai,[S(l("input",{ref:"businessNameInput","onUpdate:modelValue":t[24]||(t[24]=m=>s.businessName=m),placeholder:e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.PLACEHOLDER"),class:"mb-0",type:"text"},null,8,Mi),[[U,s.businessName]]),r(Q,{"color-scheme":"primary",onClick:o.updateInbox},{default:A(()=>[O(n(e.$t("INBOX_MGMT.EDIT.SENDER_NAME_SECTION.BUSINESS_NAME.SAVE_BUTTON_TEXT")),1)]),_:1},8,["onClick"])])):b("",!0)])])]),_:1},8,["title","sub-title"])):b("",!0),r(F,{"show-border":!1},{default:A(()=>[e.isAPIInbox?(i(),B(ee,{key:0,type:"submit",disabled:_.v$.webhookUrl.$invalid,"button-text":e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),loading:e.uiFlags.isUpdating,onClick:o.updateInbox},null,8,["disabled","button-text","loading","onClick"])):(i(),B(ee,{key:1,type:"submit",disabled:_.v$.$invalid,"button-text":e.$t("INBOX_MGMT.SETTINGS_POPUP.UPDATE"),loading:e.uiFlags.isUpdating,onClick:o.updateInbox},null,8,["disabled","button-text","loading","onClick"]))]),_:1})])):b("",!0),o.selectedTabKey==="collaborators"?(i(),d("div",Ni,[r(ue,{inbox:o.inbox},null,8,["inbox"])])):b("",!0),o.selectedTabKey==="configuration"?(i(),d("div",Oi,[r(ce,{inbox:o.inbox},null,8,["inbox"])])):b("",!0),o.selectedTabKey==="preChatForm"?(i(),d("div",Bi,[r(Ee,{inbox:o.inbox},null,8,["inbox"])])):b("",!0),o.selectedTabKey==="businesshours"?(i(),d("div",fi,[r(he,{inbox:o.inbox},null,8,["inbox"])])):b("",!0),o.selectedTabKey==="widgetBuilder"?(i(),d("div",Gi,[r(me,{inbox:o.inbox},null,8,["inbox"])])):b("",!0),o.selectedTabKey==="botConfiguration"?(i(),d("div",Li,[r(be,{inbox:o.inbox},null,8,["inbox"])])):b("",!0)])}const _n=f(Bo,[["render",Di],["__scopeId","data-v-e6448c37"]]);export{_n as default};
