import{r as O,c,ab as R,o as A,n as y,p as D,e as m,l as v,a as N,k as b,u as w,m as k,t as x}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{L as I,A as M}from"./AddLocale-XHnnsO-D.js";import{a9 as T}from"./dashboard-CGLIihvy.js";import{a as S,u as B}from"./index-BaHWIRRA.js";import{u as G,c as H}from"./mutationHelpers-3VTcoJiD.js";import{u as V}from"./vue-router-CNCrM2WK.js";import{u as U}from"./globalConfig-DaGjiImb.js";import"./index-C2DForDf.js";import"./axios-CCb-kr4I.js";import"./_commonjsHelpers-BosuxZz1.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./Thumbnail-DLjRBBx8.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./index-BP-sUqpX.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./index-Y4OjWrJ-.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./index-DaWXXnfb.js";const j={class:"w-full h-full max-w-6xl space-y-4 bg-white dark:bg-slate-900"},$={class:"flex justify-end"},ve=Object.assign({name:"EditPortalLocales"},{__name:"EditPortalLocales",setup(F){const s=O(!1),i=G(),p=H(),n=V(),{t:d}=U(),L=c(()=>n.params.portalSlug),r=c(()=>{const e=L.value;return e?i["portals/portalBySlug"].value(e):i["portals/allPortals"].value[0]}),u=c(()=>{var e;return(e=r.value)==null?void 0:e.config.allowed_locales}),f=c(()=>Object.keys(u.value).map(e=>u.value[e].code));async function h(){await p.dispatch("portals/index")}R(()=>{h()});async function E({newAllowedLocales:e,defaultLocale:a,messageKey:l}){let o="";try{await p.dispatch("portals/update",{portalSlug:L.value,config:{default_locale:a,allowed_locales:e}}),o=d(`HELP_CENTER.PORTAL.${l}.API.SUCCESS_MESSAGE`)}catch(t){o=(t==null?void 0:t.message)||d(`HELP_CENTER.PORTAL.${l}.API.ERROR_MESSAGE`)}finally{B(o)}}function P({localeCode:e}){E({newAllowedLocales:f.value,defaultLocale:e,messageKey:"CHANGE_DEFAULT_LOCALE"}),S(T.SET_DEFAULT_LOCALE,{newLocale:e,from:n.name})}function g({localeCode:e}){var o;const a=f.value.filter(t=>t!==e),l=(o=r.value)==null?void 0:o.meta.default_locale;E({newAllowedLocales:a,defaultLocale:l,messageKey:"DELETE_LOCALE"}),S(T.DELETE_LOCALE,{deletedLocale:e,from:n.name})}function _(){s.value=!1}function C(){s.value=!0}return(e,a)=>{const l=w("woot-button"),o=w("woot-modal");return A(),y("div",j,[D("div",$,[m(l,{variant:"smooth",size:"small","color-scheme":"primary",class:"header-action-buttons",onClick:C},{default:v(()=>[k(x(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.HEADER.ADD")),1)]),_:1})]),r.value?(A(),N(I,{key:0,locales:u.value,"selected-locale-code":r.value.meta.default_locale,onChangeDefaultLocale:P,onDelete:g},null,8,["locales","selected-locale-code"])):b("",!0),m(o,{show:s.value,"onUpdate:show":a[0]||(a[0]=t=>s.value=t),"on-close":_},{default:v(()=>[m(M,{show:s.value,portal:r.value,onCancel:_},null,8,["show","portal"])]),_:1},8,["show"])])}}});export{ve as default};
