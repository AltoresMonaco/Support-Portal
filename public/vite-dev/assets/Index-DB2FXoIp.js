import{m as V}from"./globalConfig-DaGjiImb.js";import{u as _}from"./index-BaHWIRRA.js";import{o as q,az as K,F as X,aA as J,aB as Q,aC as Z,u as B,h as ee,G as te}from"./dashboard-CGLIihvy.js";import{K as se,p as z,R as G,C as D,f as ae}from"./DashboardIcon-CPXNa31t.js";import{g as le}from"./globalConfigMixin-BNbqaRx5.js";import{c as I,o as u,n as m,b as L,m as C,t as p,q as g,B as oe,r as x,u as h,a as F,k as v,p as n,e as c,as as ne,C as ie,_ as P,l as f,f as U,w as re,L as W,g as H,a1 as ue,F as O,i as N,af as de}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{r as ce}from"./Thumbnail-DLjRBBx8.js";import{u as j,r as k,m as M,e as me}from"./index-C2DForDf.js";import{_ as pe}from"./TableHeaderCell-CHSVvL6I.js";import{W as he}from"./WithLabel-DjXD7ol1.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./axios-CCb-kr4I.js";import"./mutationHelpers-3VTcoJiD.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./index-DaWXXnfb.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./Icon-Dtj3LCzD.js";const Se={__name:"InitialsAvatar",props:{name:{type:String,default:""},size:{type:Number,default:72}},setup(e){const t=e,o={1:"bg-ash-200 text-ash-900",2:"bg-amber-200 text-amber-900",3:"bg-pink-100 text-pink-800",4:"bg-purple-100 text-purple-800",5:"bg-indigo-100 text-indigo-800",6:"bg-grass-100 text-grass-800",7:"bg-mint-100 text-mint-800",8:"bg-orange-100 text-orange-800"},s=I(()=>({fontSize:`${Math.floor(t.size/2.5)}px`})),a=I(()=>o[t.name.length%8+1]),l=I(()=>se(t.name));return(i,d)=>(u(),m("div",{class:g(["rounded-xl flex leading-[100%] font-medium items-center justify-center text-center cursor-default",`h-[${e.size}px] w-[${e.size}px] ${a.value}`]),style:oe(s.value),"aria-hidden":"true"},[L(i.$slots,"default",{},()=>[C(p(l.value),1)])],6))}},Ee={class:"relative rounded-xl h-[72px] w-[72px] cursor-pointe group"},fe=["alt","src"],_e={class:"hidden group-hover:block"},Ie={__name:"ProfileAvatar",props:{src:{type:String,default:""},name:{type:String,default:""}},emits:["change","delete"],setup(e,{emit:t}){const o=e,s=t,a=x(!1),l=x(!1),i=x(null),d=I(()=>o.src&&!l.value),r=()=>{l.value=!0},S=()=>{a.value=!0,l.value=!1},E=()=>{i.value.click()},T=A=>{const[b]=A.target.files;s("change",{file:b,url:b?URL.createObjectURL(b):null})},R=()=>{s("delete")};return(A,b)=>{const $=h("fluent-icon");return u(),m("div",Ee,[d.value?(u(),m("img",{key:0,class:"rounded-xl h-[72px] w-[72px]",alt:e.name,src:e.src,draggable:"false",onLoad:S,onError:r},null,40,fe)):d.value?v("",!0):(u(),F(Se,{key:1,name:e.name,size:72},null,8,["name"])),n("input",{ref_key:"fileInputRef",ref:i,type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",hidden:"",onChange:T},null,544),n("div",_e,[e.src?(u(),m("button",{key:0,class:"absolute z-10 flex items-center justify-center w-6 h-6 p-1 border border-white rounded-full select-none dark:border-ash-75 reset-base -top-2 -right-2 bg-ash-300",onClick:R},[c($,{icon:"dismiss",size:"16",class:"text-ash-900"})])):v("",!0),n("button",{class:"reset-base absolute h-[72px] w-[72px] top-0 left-0 rounded-xl select-none flex items-center justify-center bg-modal-backdrop-dark dark:bg-modal-backdrop-dark",onClick:E},[c($,{icon:"avatar-upload",size:"32",class:"text-white"})])])])}}},ge={class:"flex flex-col gap-2"},Te={class:"text-sm font-medium text-ash-900"},Oe={__name:"UserProfilePicture",props:{src:{type:String,default:""},name:{type:String,default:""}},emits:["change","delete"],setup(e,{emit:t}){const o=e,s=t,a=I(()=>ce(o.name)),l=d=>{s("change",d)},i=()=>{s("delete")};return(d,r)=>(u(),m("div",ge,[n("span",Te,p(d.$t("PROFILE_SETTINGS.FORM.PICTURE")),1),c(Ie,{src:e.src,name:a.value,onChange:l,onDelete:i},null,8,["src","name"])]))}},Ne={key:1,class:"text-sm font-medium truncate ltr:text-left rtl:text-right"},w={__name:"Button",props:{variant:{type:String,default:"solid",validator:e=>["outline","ghost","solid"].includes(e)},size:{type:String,default:"large",validator:e=>["medium","large"].includes(e)},icon:{type:String,default:""},colorScheme:{type:String,default:"primary",validator:e=>["primary","secondary","danger"].includes(e)},trailingIcon:{type:Boolean,default:!1}},setup(e){const t=e,o=ne(),s={outline:"outline outline-1 -outline-offset-1",ghost:"hover:text-600 active:text-600 focus:outline focus:outline-offset-1",solid:"hover:bg-700 active:bg-700 focus:outline focus:outline-offset-1 focus:outline-2"},a=I(()=>{if(o.disabled)return"bg-ash-200 text-ash-600 cursor-not-allowed";const r={primary:{outline:`${s.outline} outline-primary-400 hover:text-primary-600 active:text-primary-600`,ghost:`${s.ghost} focus:outline-primary-400`,solid:`${s.solid} bg-primary-600 text-white focus:outline-primary-400`},secondary:{outline:`${s.outline} outline-ash-400 hover:text-ash-900 active:text-ash-900 `,ghost:`${s.ghost} focus:outline-ash-400`,solid:`${s.solid} bg-ash-100 text-ash-900 focus:outline-ash-400`},danger:{outline:`${s.outline} outline-ruby-400 hover:text-ruby-600 active:text-ruby-600`,ghost:`${s.ghost} focus:outline-ruby-400`,solid:`${s.solid} bg-ruby-600 text-white focus:outline-ruby-400`}}[t.colorScheme];return r[t.variant]||r.solid}),l=I(()=>t.size==="medium"?"h-8 px-3 py-1.5 text-sm":"h-10 px-4 py-2.5 text"),i=I(()=>[a.value,l.value]);return(d,r)=>{const S=h("fluent-icon");return u(),m("button",ie({class:["inline-flex items-center gap-1 text-sm font-medium reset-base rounded-xl w-fit",i.value]},d.$attrs),[e.icon&&!e.trailingIcon?(u(),F(S,{key:0,size:"1.16em",icon:e.icon,class:"flex-shrink-0"},null,8,["icon"])):v("",!0),d.$slots.default?(u(),m("span",Ne,[L(d.$slots,"default")])):v("",!0),e.icon&&e.trailingIcon?(u(),F(S,{key:2,size:"1.16em",icon:e.icon,class:"flex-shrink-0"},null,8,["icon"])):v("",!0)],16)}}},ve={components:{FormButton:w},props:{name:{type:String,default:""},email:{type:String,default:""},displayName:{type:String,default:""},emailEnabled:{type:Boolean,default:!1}},emits:["updateUser"],setup(){return{v$:j()}},data(){return{userName:this.name,userDisplayName:this.displayName,userEmail:this.email,inputStyles:{borderRadius:"12px",padding:"6px 12px",fontSize:"14px",marginBottom:"2px"}}},validations:{userName:{required:k,minLength:M(1)},userDisplayName:{},userEmail:{required:k,email:me}},watch:{name:{handler(e){this.userName=e},immediate:!0},displayName:{handler(e){this.userDisplayName=e},immediate:!0},email:{handler(e){this.userEmail=e},immediate:!0}},methods:{async updateUser(){if(this.v$.$touch(),this.v$.$invalid){_(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}this.$emit("updateUser",{name:this.userName,displayName:this.userDisplayName,email:this.userEmail})}}};function Re(e,t,o,s,a,l){const i=h("woot-input"),d=h("FormButton");return u(),m("form",{class:"flex flex-col gap-4",onSubmit:t[3]||(t[3]=U(r=>l.updateUser("profile"),["prevent"]))},[c(i,{modelValue:a.userName,"onUpdate:modelValue":t[0]||(t[0]=r=>a.userName=r),styles:a.inputStyles,class:g({error:s.v$.userName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.NAME.PLACEHOLDER"),error:`${s.v$.userName.$error?e.$t("PROFILE_SETTINGS.FORM.NAME.ERROR"):""}`,onInput:s.v$.userName.$touch,onBlur:s.v$.userName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),c(i,{modelValue:a.userDisplayName,"onUpdate:modelValue":t[1]||(t[1]=r=>a.userDisplayName=r),styles:a.inputStyles,class:g({error:s.v$.userDisplayName.$error}),label:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.PLACEHOLDER"),error:`${s.v$.userDisplayName.$error?e.$t("PROFILE_SETTINGS.FORM.DISPLAY_NAME.ERROR"):""}`,onInput:s.v$.userDisplayName.$touch,onBlur:s.v$.userDisplayName.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),o.emailEnabled?(u(),F(i,{key:0,modelValue:a.userEmail,"onUpdate:modelValue":t[2]||(t[2]=r=>a.userEmail=r),styles:a.inputStyles,class:g({error:s.v$.userEmail.$error}),label:e.$t("PROFILE_SETTINGS.FORM.EMAIL.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.EMAIL.PLACEHOLDER"),error:`${s.v$.userEmail.$error?e.$t("PROFILE_SETTINGS.FORM.EMAIL.ERROR"):""}`,onInput:s.v$.userEmail.$touch,onBlur:s.v$.userEmail.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"])):v("",!0),c(d,{type:"submit","color-scheme":"primary",variant:"solid",size:"large"},{default:f(()=>[C(p(e.$t("PROFILE_SETTINGS.BTN_TEXT")),1)]),_:1})],32)}const be=P(ve,[["render",Re]]),ye={__name:"MessageSignature",props:{messageSignature:{type:String,default:""}},emits:["updateSignature"],setup(e,{emit:t}){const o=e,s=t,a=K,l=x(o.messageSignature);re(()=>o.messageSignature??"",d=>{l.value=d});const i=()=>{s("updateSignature",l.value)};return(d,r)=>(u(),m("form",{class:"flex flex-col gap-6",onSubmit:r[1]||(r[1]=U(S=>i(),["prevent"]))},[c(q,{id:"message-signature-input",modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=S=>l.value=S),class:"message-editor h-[10rem] !px-3","is-format-mode":"",placeholder:d.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE.PLACEHOLDER"),"enabled-menu-options":W(a),"enable-suggestions":!1,"show-image-resize-toolbar":""},null,8,["modelValue","placeholder","enabled-menu-options"]),c(w,{type:"submit","color-scheme":"primary",variant:"solid",size:"large"},{default:f(()=>[C(p(d.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.BTN_TEXT")),1)]),_:1})],32))}},Fe={class:"flex flex-col gap-2 items-center w-full rounded-t-[5px]"},Ae={class:"flex items-center justify-between w-full gap-1"},Pe={class:"flex items-center text-base font-medium text-ash-900"},xe=["checked","name"],Ce={class:"text-ash-900 text-sm line-clamp-2 leading-[1.4] text-start"},$e=["src","alt"],Le=["src","alt"],we={__name:"HotKeyCard",props:{active:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""},lightImage:{type:String,default:""},darkImage:{type:String,default:""}},setup(e){return(t,o)=>(u(),m("button",{class:g(["flex flex-col gap-4 w-full h-fit sm:max-h-[220px] p-4 sm:max-w-[350px] rounded-md border border-solid border-ash-200",{"border-primary-300 ":e.active}])},[n("div",Fe,[n("div",Ae,[n("div",Pe,p(e.title),1),n("input",{checked:e.active,type:"radio",name:`hotkey-${e.title}`,class:"shadow cursor-pointer grid place-items-center border-2 border-ash-200 appearance-none rounded-full w-5 h-5 checked:bg-primary-600 before:content-[''] before:bg-primary-600 before:border-4 before:rounded-full before:border-ash-25 checked:before:w-[18px] checked:before:h-[18px] checked:border checked:border-primary-600"},null,8,xe)]),n("span",Ce,p(e.description),1)]),n("div",null,[n("img",{src:e.lightImage,alt:`Light themed image for ${e.title}`,class:"block object-cover w-full dark:hidden"},null,8,$e),n("img",{src:e.darkImage,alt:`Dark themed image for ${e.title}`,class:"hidden object-cover w-full dark:block"},null,8,Le)])],2))}},ke={components:{FormButton:w},setup(){return{v$:j()}},data(){return{currentPassword:"",password:"",passwordConfirmation:"",isPasswordChanging:!1,errorMessage:"",inputStyles:{borderRadius:"12px",padding:"6px 12px",fontSize:"14px",marginBottom:"2px"}}},validations:{currentPassword:{required:k},password:{minLength:M(6)},passwordConfirmation:{minLength:M(6),isEqPassword(e){return e===this.password}}},computed:{isButtonDisabled(){return!this.currentPassword||!this.passwordConfirmation||!this.v$.passwordConfirmation.isEqPassword}},methods:{async changePassword(){if(this.v$.$touch(),this.v$.$invalid){_(this.$t("PROFILE_SETTINGS.FORM.ERROR"));return}let e=this.$t("PROFILE_SETTINGS.PASSWORD_UPDATE_SUCCESS");try{await this.$store.dispatch("updateProfile",{password:this.password,password_confirmation:this.passwordConfirmation,current_password:this.currentPassword})}catch(t){e=z(t)||this.$t("RESET_PASSWORD.API.ERROR_MESSAGE")}finally{_(e)}}}},Me={class:"flex flex-col w-full gap-4"};function Ue(e,t,o,s,a,l){const i=h("woot-input"),d=h("FormButton");return u(),m("form",{onSubmit:t[3]||(t[3]=U(r=>l.changePassword(),["prevent"]))},[n("div",Me,[c(i,{modelValue:a.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=r=>a.currentPassword=r),type:"password",styles:a.inputStyles,class:g({error:s.v$.currentPassword.$error}),label:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.PLACEHOLDER"),error:`${s.v$.currentPassword.$error?e.$t("PROFILE_SETTINGS.FORM.CURRENT_PASSWORD.ERROR"):""}`,onInput:s.v$.currentPassword.$touch,onBlur:s.v$.currentPassword.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),c(i,{modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=r=>a.password=r),type:"password",styles:a.inputStyles,class:g({error:s.v$.password.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD.PLACEHOLDER"),error:`${s.v$.password.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD.ERROR"):""}`,onInput:s.v$.password.$touch,onBlur:s.v$.password.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),c(i,{modelValue:a.passwordConfirmation,"onUpdate:modelValue":t[2]||(t[2]=r=>a.passwordConfirmation=r),type:"password",styles:a.inputStyles,class:g({error:s.v$.passwordConfirmation.$error}),label:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.LABEL"),placeholder:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.PLACEHOLDER"),error:`${s.v$.passwordConfirmation.$error?e.$t("PROFILE_SETTINGS.FORM.PASSWORD_CONFIRMATION.ERROR"):""}`,onInput:s.v$.passwordConfirmation.$touch,onBlur:s.v$.passwordConfirmation.$touch},null,8,["modelValue","styles","class","label","placeholder","error","onInput","onBlur"]),c(d,{type:"submit","color-scheme":"primary",variant:"solid",size:"large",disabled:l.isButtonDisabled},{default:f(()=>[C(p(e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.BTN_TEXT")),1)]),_:1},8,["disabled"])])],32)}const Ge=P(ke,[["render",Ue]]),De=["id","value"],Y={__name:"CheckBox",props:{isChecked:{type:Boolean,default:!1},value:{type:String,default:null}},emits:["update"],setup(e,{emit:t}){const o=e,s=t,a=I({get:()=>o.isChecked,set:l=>s("update",o.value,l)});return(l,i)=>H((u(),m("input",{id:e.value,"onUpdate:modelValue":i[0]||(i[0]=d=>a.value=d),type:"checkbox",value:e.value,class:"flex-shrink-0 mt-0.5 border-ash-200 border bg-ash-50 checked:border-none checked:bg-primary-600 dark:checked:bg-primary-600 shadow-sm appearance-none rounded-[4px] w-4 h-4 focus:ring-1 after:content-[''] after:text-white checked:after:content-['âœ“'] after:flex after:items-center after:justify-center after:text-center after:text-xs after:font-bold after:relative"},null,8,De)),[[ue,a.value]])}},Ve={props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],methods:{onClick(){this.$emit("update:modelValue",!this.modelValue)}}},Be=["aria-checked"];function ze(e,t,o,s,a,l){return u(),m("button",{type:"button",class:g(["relative flex-shrink-0 h-4 p-0 border-none shadow-inner w-7 rounded-3xl",o.modelValue?"bg-primary-600 shadow-primary-800":"shadow-ash-400 bg-ash-200"]),role:"switch","aria-checked":o.modelValue.toString(),onClick:t[0]||(t[0]=(...i)=>l.onClick&&l.onClick(...i))},[n("span",{"aria-hidden":"true",class:g(["rounded-full bg-white top-0.5 absolute dark:bg-white w-3 h-3 translate-y-0 duration-200 transition-transform ease-in-out",o.modelValue?"ltr:translate-x-0 rtl:translate-x-[12px]":"ltr:-translate-x-[12px] rtl:translate-x-0"])},null,2)],10,Be)}const We=P(Ve,[["render",ze]]),He=[{label:"PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPES.CONVERSATION_CREATED",value:"conversation_creation"},{label:"PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPES.CONVERSATION_ASSIGNED",value:"conversation_assignment"},{label:"PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPES.CONVERSATION_MENTION",value:"conversation_mention"},{label:"PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPES.ASSIGNED_CONVERSATION_NEW_MESSAGE",value:"assigned_conversation_new_message"},{label:"PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPES.PARTICIPATING_CONVERSATION_NEW_MESSAGE",value:"participating_conversation_new_message"},{label:"PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPES.SLA_MISSED_FIRST_RESPONSE",value:"sla_missed_first_response"},{label:"PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPES.SLA_MISSED_NEXT_RESPONSE",value:"sla_missed_next_response"},{label:"PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPES.SLA_MISSED_RESOLUTION",value:"sla_missed_resolution"}],je=[{value:"none",label:"none"},{value:"mine",label:"mine"},{value:"all",label:"all"}],Ye={components:{TableHeaderCell:pe,FormSwitch:We,CheckBox:Y},data(){return{selectedEmailFlags:[],selectedPushFlags:[],enableAudioAlerts:!1,hasEnabledPushPermissions:!1,notificationTypes:He}},computed:{...V({accountId:"getCurrentAccountId",emailFlags:"userNotificationSettings/getSelectedEmailFlags",pushFlags:"userNotificationSettings/getSelectedPushFlags",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"}),hasPushAPISupport(){return"Notification"in window},isSLAEnabled(){return this.isFeatureEnabledonAccount(this.accountId,X.SLA)},filteredNotificationTypes(){return this.notificationTypes.filter(e=>this.isSLAEnabled?!0:!["sla_missed_first_response","sla_missed_next_response","sla_missed_resolution"].includes(e.value))}},watch:{emailFlags(e){this.selectedEmailFlags=e},pushFlags(e){this.selectedPushFlags=e}},mounted(){J()&&this.getPushSubscription(),this.$store.dispatch("userNotificationSettings/get")},methods:{checkFlagStatus(e,t){return(e==="email"?this.selectedEmailFlags:this.selectedPushFlags).includes(`${e}_${t}`)},onRegistrationSuccess(){this.hasEnabledPushPermissions=!0},onRequestPermissions(){Q({onSuccess:this.onRegistrationSuccess})},getPushSubscription(){Z(e=>e.pushManager.getSubscription().then(t=>{t?this.hasEnabledPushPermissions=!0:this.hasEnabledPushPermissions=!1}).catch(t=>console.log(t)))},async updateNotificationSettings(){try{this.$store.dispatch("userNotificationSettings/update",{selectedEmailFlags:this.selectedEmailFlags,selectedPushFlags:this.selectedPushFlags}),_(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))}catch{_(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_ERROR"))}},handleInput(e,t){e==="email"?this.handleEmailInput(t):this.handlePushInput(t)},handleEmailInput(e){this.selectedEmailFlags=this.toggleInput(this.selectedEmailFlags,e),this.updateNotificationSettings()},handlePushInput(e){this.selectedPushFlags=this.toggleInput(this.selectedPushFlags,e),this.updateNotificationSettings()},toggleInput(e,t){return e.includes(t)?e.filter(s=>s!==t):[...e,t]}}},qe={id:"profile-settings-notifications",class:"flex flex-col gap-6"},Ke={class:"hidden sm:block"},Xe={class:"grid content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},Je={class:"text-sm font-normal normal-case text-ash-800"},Qe={class:"text-sm font-medium normal-case text-ash-900"},Ze={class:"flex items-center justify-between gap-1"},et={class:"text-sm font-medium normal-case text-ash-900 whitespace-nowrap"},tt={class:"grid items-center content-center h-12 grid-cols-12 gap-4 py-0 rounded-t-xl"},st={class:"flex flex-row items-start gap-2 col-span-7 px-0 py-2 text-sm tracking-[0.5] rtl:text-right"},at={class:"text-sm text-ash-900"},lt={class:"flex flex-col gap-6 sm:hidden"},ot={class:"text-sm font-medium normal-case text-ash-900"},nt={class:"flex flex-col gap-4"},it={class:"text-sm text-ash-900"},rt={class:"flex items-center justify-start gap-2"},ut={class:"text-sm font-medium normal-case text-ash-900"},dt={class:"flex flex-col gap-4"},ct={class:"text-sm text-ash-900"},mt={class:"flex items-center justify-between w-full gap-2 p-4 border border-solid border-ash-200 rounded-xl"},pt={class:"flex flex-row items-center gap-2"},ht={class:"text-sm text-ash-900"};function St(e,t,o,s,a,l){const i=h("TableHeaderCell"),d=h("CheckBox"),r=h("fluent-icon"),S=h("FormSwitch");return u(),m("div",qe,[n("div",Ke,[n("div",Xe,[c(i,{span:7,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE')}`"},{default:f(()=>[n("span",Je,p(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TYPE_TITLE")),1)]),_:1}),c(i,{span:2,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL')}`"},{default:f(()=>[n("span",Qe,p(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.EMAIL")),1)]),_:1}),c(i,{span:3,label:"`${$t('PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH')}`"},{default:f(()=>[n("div",Ze,[n("span",et,p(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.PUSH")),1)])]),_:1})]),(u(!0),m(O,null,N(l.filteredNotificationTypes,(E,T)=>(u(),m("div",{key:T},[n("div",tt,[n("div",st,[n("span",at,p(e.$t(E.label)),1)]),(u(),m(O,null,N(["email","push"],(R,A)=>n("div",{key:A,class:g(["flex items-start gap-2 px-0 text-sm tracking-[0.5] text-left rtl:text-right",`col-span-${R==="push"?3:2}`])},[c(d,{value:`${R}_${E.value}`,"is-checked":l.checkFlagStatus(R,E.value,a.selectedPushFlags),onUpdate:b=>l.handleInput(R,b)},null,8,["value","is-checked","onUpdate"])],2)),64))])]))),128))]),n("div",lt,[n("span",ot,p(e.$t("PROFILE_SETTINGS.FORM.EMAIL_NOTIFICATIONS_SECTION.TITLE")),1),n("div",nt,[(u(!0),m(O,null,N(l.filteredNotificationTypes,(E,T)=>(u(),m("div",{key:T,class:"flex flex-row items-start gap-2"},[c(d,{id:`email_${E.value}`,value:`email_${E.value}`,"is-checked":l.checkFlagStatus("email",E.value),onUpdate:l.handleEmailInput},null,8,["id","value","is-checked","onUpdate"]),n("span",it,p(e.$t(E.label)),1)]))),128))]),n("div",rt,[n("span",ut,p(e.$t("PROFILE_SETTINGS.FORM.PUSH_NOTIFICATIONS_SECTION.TITLE")),1)]),n("div",dt,[(u(!0),m(O,null,N(l.filteredNotificationTypes,(E,T)=>(u(),m("div",{key:T,class:"flex flex-row items-start gap-2"},[c(d,{id:`push_${E.value}`,value:`push_${E.value}`,"is-checked":l.checkFlagStatus("push",E.value),onUpdate:l.handlePushInput},null,8,["id","value","is-checked","onUpdate"]),n("span",ct,p(e.$t(E.label)),1)]))),128))])]),n("div",mt,[n("div",pt,[c(r,{icon:"alert",class:"flex-shrink-0 text-ash-900",size:"18"}),n("span",ht,p(e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.BROWSER_PERMISSION")),1)]),c(S,{"model-value":a.hasEnabledPushPermissions,"onUpdate:modelValue":l.onRequestPermissions},null,8,["model-value","onUpdate:modelValue"])])])}const Et=P(Ye,[["render",St]]),ft={components:{WithLabel:he},props:{id:{type:String,default:""},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},name:{type:String,required:!0},icon:{type:String,default:""},label:{type:String,required:!0},modelValue:{type:String,default:""},hasError:{type:Boolean,default:!1},errorMessage:{type:String,default:""}},emits:["update:modelValue"],methods:{onInput(e){this.$emit("update:modelValue",e.target.value)}}},_t=["id","selected","name"],It={value:"",disabled:"",selected:"",class:"hidden"},gt=["value"];function Tt(e,t,o,s,a,l){const i=h("WithLabel");return u(),F(i,{label:o.label,icon:o.icon,name:o.name,"has-error":o.hasError,"error-message":o.errorMessage},{default:f(()=>[n("select",{id:o.id,selected:o.modelValue,name:o.name,class:g([{"text-ash-400":!o.modelValue,"text-ash-900":o.modelValue,"pl-9":o.icon},"block w-full px-3 py-2 pr-6 mb-0 border-0 shadow-sm outline-none appearance-none rounded-xl select-caret ring-ash-200 ring-1 ring-inset placeholder:text-ash-900 focus:ring-2 focus:ring-inset focus:ring-primary-500 sm:text-sm sm:leading-6"]),onInput:t[0]||(t[0]=(...d)=>l.onInput&&l.onInput(...d))},[n("option",It,p(o.placeholder),1),L(e.$slots,"default",{},()=>[(u(!0),m(O,null,N(o.options,d=>(u(),m("option",{key:d.value,value:d.value},p(d.label),9,gt))),128))],!0)],42,_t)]),_:3},8,["label","icon","name","has-error","error-message"])}const Ot=P(ft,[["render",Tt],["__scopeId","data-v-e1979149"]]),Nt=["value","selected"],vt={__name:"AudioAlertTone",props:{value:{type:String,required:!0,validator:e=>["ding","bell"].includes(e)},label:{type:String,default:""}},emits:["change"],setup(e,{emit:t}){const o=e,s=t,a=I(()=>[{value:"ding",label:"Ding"},{value:"bell",label:"Bell"}]),l=I({get:()=>o.value,set:i=>{s("change",i)}});return(i,d)=>(u(),F(Ot,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=r=>l.value=r),name:"alertTone",spacing:"compact",value:l.value,options:a.value,label:e.label,class:"max-w-xl"},{default:f(()=>[(u(!0),m(O,null,N(a.value,r=>(u(),m("option",{key:r.label,value:r.value,selected:r.value===l.value},p(r.label),9,Nt))),128))]),_:1},8,["modelValue","value","options","label"]))}},Rt={class:"flex justify-between pb-1 text-sm font-medium leading-6 text-ash-900"},bt={class:"flex flex-row justify-between h-10 max-w-xl p-2 border border-solid rounded-xl border-ash-200"},yt=["id","value"],Ft=["for"],At={__name:"AudioAlertEvent",props:{label:{type:String,default:""},value:{type:String,default:"all"}},emits:["update"],setup(e,{emit:t}){const o=e,s=t,a=je,l=I({get:()=>o.value,set:i=>{s("update",i)}});return(i,d)=>(u(),m("div",null,[n("label",Rt,p(e.label),1),n("div",bt,[(u(!0),m(O,null,N(W(a),r=>(u(),m("div",{key:r.value,class:"flex flex-row items-center justify-center gap-2 px-4 border-r border-ash-200 grow last:border-r-0"},[H(n("input",{id:`radio-${r.value}`,"onUpdate:modelValue":d[0]||(d[0]=S=>l.value=S),class:"shadow-sm cursor-pointer grid place-items-center border-2 border-ash-200 appearance-none rounded-full w-4 h-4 checked:bg-primary-600 before:content-[''] before:bg-primary-600 before:border-4 before:rounded-full before:border-ash-25 checked:before:w-[14px] checked:before:h-[14px] checked:border checked:border-primary-600",type:"radio",value:r.value},null,8,yt),[[de,l.value]]),n("label",{for:`radio-${r.value}`,class:g(["text-sm font-medium",l.value===r.value?"text-ash-900":"text-ash-800"])},p(i.$t(`PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_TYPES.${r.label.toUpperCase()}`)),11,Ft)]))),128))])]))}},Pt={class:"flex justify-between pb-1 text-sm font-medium leading-6 text-ash-900"},xt={class:"flex flex-col gap-4"},Ct={class:"text-sm font-normal text-ash-900"},$t={__name:"AudioAlertCondition",props:{label:{type:String,required:!0},items:{type:Array,required:!0}},emits:["change"],setup(e,{emit:t}){const o=t,s=(a,l)=>{o("change",a,l)};return(a,l)=>(u(),m("div",null,[n("label",Pt,p(e.label),1),n("div",xt,[(u(!0),m(O,null,N(e.items,i=>(u(),m("div",{key:i.id,class:"flex flex-row items-start gap-2"},[c(Y,{"is-checked":i.model,value:i.value,onUpdate:s},null,8,["is-checked","value"]),n("label",Ct,p(i.label),1)]))),128))])]))}},Lt={components:{AudioAlertEvent:At,AudioAlertTone:vt,AudioAlertCondition:$t},setup(){const{uiSettings:e,updateUISettings:t}=B();return{uiSettings:e,updateUISettings:t}},data(){return{audioAlert:"",playAudioWhenTabIsInactive:!1,alertIfUnreadConversationExist:!1,alertTone:"ding",audioAlertConditions:[]}},watch:{uiSettings(e){this.notificationUISettings(e)}},mounted(){this.notificationUISettings(this.uiSettings),this.$store.dispatch("userNotificationSettings/get")},methods:{notificationUISettings(e){const{enable_audio_alerts:t="",always_play_audio_alert:o,alert_if_unread_assigned_conversation_exist:s,notification_tone:a}=e;this.audioAlert=t,this.playAudioWhenTabIsInactive=!o,this.alertIfUnreadConversationExist=s,this.audioAlertConditions=[{id:"audio1",label:this.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.CONDITIONS.CONDITION_ONE"),model:this.playAudioWhenTabIsInactive,value:"tab_is_inactive"},{id:"audio2",label:this.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.CONDITIONS.CONDITION_TWO"),model:this.alertIfUnreadConversationExist,value:"conversations_are_read"}],this.alertTone=a||"ding"},handAudioAlertChange(e){this.audioAlert=e,this.updateUISettings({enable_audio_alerts:this.audioAlert}),_(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))},handleAudioAlertConditions(e,t){e==="tab_is_inactive"?this.updateUISettings({always_play_audio_alert:!t}):e==="conversations_are_read"&&this.updateUISettings({alert_if_unread_assigned_conversation_exist:t}),_(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))},handleAudioToneChange(e){this.updateUISettings({notification_tone:e}),_(this.$t("PROFILE_SETTINGS.FORM.API.UPDATE_SUCCESS"))}}},wt={id:"profile-settings-notifications",class:"flex flex-col gap-6"};function kt(e,t,o,s,a,l){const i=h("AudioAlertTone"),d=h("AudioAlertEvent"),r=h("AudioAlertCondition");return u(),m("div",wt,[c(i,{value:a.alertTone,label:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.DEFAULT_TONE.TITLE"),onChange:l.handleAudioToneChange},null,8,["value","label","onChange"]),c(d,{label:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.ALERT_TYPE.TITLE"),value:a.audioAlert,onUpdate:l.handAudioAlertChange},null,8,["label","value","onUpdate"]),c(r,{items:a.audioAlertConditions,label:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.CONDITIONS.TITLE"),onChange:l.handleAudioAlertConditions},null,8,["items","label","onChange"])])}const Mt=P(Lt,[["render",kt]]),Ut={class:"flex flex-col items-start w-full gap-6"},Gt={class:"flex flex-col w-full gap-4"},Dt={key:0,class:"text-lg font-medium text-ash-900"},Vt={key:1,class:"mb-0 text-sm font-normal text-ash-900"},Bt={class:"flex flex-col w-full gap-6"},zt={__name:"FormSection",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(e){return(t,o)=>(u(),m("div",Ut,[n("div",Gt,[e.title?(u(),m("h4",Dt,p(e.title),1)):v("",!0),o[0]||(o[0]=n("div",{class:"flex flex-row items-center justify-between"},[n("div",{class:"flex-grow h-px bg-ash-200"})],-1)),e.description?(u(),m("p",Vt,p(e.description),1)):v("",!0)]),n("div",Bt,[L(t.$slots,"default")])]))}},Wt={class:"flex flex-row justify-between gap-4"},Ht={__name:"AccessToken",props:{value:{type:String,default:""}},emits:["onCopy"],setup(e,{emit:t}){const o=e,s=t,a=x("password"),l=()=>{a.value=a.value==="password"?"text":"password"},i=I(()=>a.value==="password"?"eye-hide":"eye-show"),d=()=>{s("onCopy",o.value)};return(r,S)=>{const E=h("fluent-icon"),T=h("woot-input");return u(),m("div",Wt,[c(T,{name:"access_token",class:"flex-1 [&>input]:!py-1.5 ltr:[&>input]:!pr-9 ltr:[&>input]:!pl-3 rtl:[&>input]:!pl-9 rtl:[&>input]:!pr-3 focus:[&>input]:!border-slate-200 focus:[&>input]:dark:!border-slate-600 [&>input]:cursor-not-allowed relative",styles:{borderRadius:"12px",fontSize:"14px",marginBottom:"2px"},type:a.value,"model-value":e.value,readonly:""},{masked:f(()=>[n("button",{class:"absolute top-1.5 ltr:right-0.5 rtl:left-0.5",onClick:l},[c(E,{icon:i.value,size:16},null,8,["icon"])])]),_:1},8,["type","model-value"]),c(w,{type:"submit",size:"large",icon:"text-copy",variant:"outline","color-scheme":"secondary",onClick:d},{default:f(()=>[C(p(r.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.COPY")),1)]),_:1})])}}},jt={components:{MessageSignature:ye,FormSection:zt,UserProfilePicture:Oe,Policy:ee,UserBasicDetails:be,HotKeyCard:we,ChangePassword:Ge,NotificationPreferences:Et,AudioNotifications:Mt,AccessToken:Ht},mixins:[le],setup(){const{uiSettings:e,updateUISettings:t,isEditorHotKeyEnabled:o}=B();return{uiSettings:e,updateUISettings:t,isEditorHotKeyEnabled:o}},data(){return{avatarFile:"",avatarUrl:"",name:"",displayName:"",email:"",messageSignature:"",hotKeys:[{key:"enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-enter-dark.svg"},{key:"cmd_enter",title:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.HEADING"),description:this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.CARD.CMD_ENTER_KEY.CONTENT"),lightImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter.svg",darkImage:"/assets/images/dashboard/profile/hot-key-ctrl-enter-dark.svg"}],notificationPermissions:[...G,...D],audioNotificationPermissions:[...G,...D]}},computed:{...V({currentUser:"getCurrentUser",currentUserId:"getCurrentUserID",globalConfig:"globalConfig/get"})},mounted(){this.currentUserId&&this.initializeUser()},methods:{initializeUser(){this.name=this.currentUser.name,this.email=this.currentUser.email,this.avatarUrl=this.currentUser.avatar_url,this.displayName=this.currentUser.display_name,this.messageSignature=this.currentUser.message_signature},async dispatchUpdate(e,t,o){let s="";try{return await this.$store.dispatch("updateProfile",e),s=t,!0}catch(a){return s=z(a)||o,!1}finally{_(s)}},async updateProfile(e){const{name:t,email:o,displayName:s}=e,a=this.currentUser.email!==o;this.name=t||this.name,this.email=o||this.email,this.displayName=s||this.displayName;const l={name:this.name,email:this.email,displayName:this.displayName,avatar:this.avatarFile},i=await this.dispatchUpdate(l,a?this.$t("PROFILE_SETTINGS.AFTER_EMAIL_CHANGED"):this.$t("PROFILE_SETTINGS.UPDATE_SUCCESS"),this.$t("RESET_PASSWORD.API.ERROR_MESSAGE"));a&&i&&ae()},async updateSignature(e){const t={message_signature:e};let o=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_SUCCESS"),s=this.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.API_ERROR");await this.dispatchUpdate(t,o,s)},updateProfilePicture({file:e,url:t}){this.avatarFile=e,this.avatarUrl=t},async deleteProfilePicture(){try{await this.$store.dispatch("deleteAvatar"),this.avatarUrl="",this.avatarFile="",_(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_SUCCESS"))}catch{_(this.$t("PROFILE_SETTINGS.AVATAR_DELETE_FAILED"))}},toggleHotKey(e){this.hotKeys=this.hotKeys.map(t=>t.key===e?{...t,active:!t.active}:t),this.updateUISettings({editor_message_key:e}),_(this.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.UPDATE_SUCCESS"))},async onCopyToken(e){await te(e),_(this.$t("COMPONENTS.CODE.COPY_SUCCESSFUL"))}}},Yt={class:"grid py-16 px-5 font-inter mx-auto gap-16 sm:max-w-[720px]"},qt={class:"flex flex-col gap-6"},Kt={class:"text-2xl font-medium text-ash-900"},Xt={class:"flex flex-col justify-between w-full gap-5 sm:gap-4 sm:flex-row"};function Jt(e,t,o,s,a,l){const i=h("UserProfilePicture"),d=h("UserBasicDetails"),r=h("MessageSignature"),S=h("FormSection"),E=h("HotKeyCard"),T=h("ChangePassword"),R=h("AudioNotifications"),A=h("Policy"),b=h("NotificationPreferences"),$=h("AccessToken");return u(),m("div",Yt,[n("div",qt,[n("h2",Kt,p(e.$t("PROFILE_SETTINGS.TITLE")),1),c(i,{src:a.avatarUrl,name:a.name,size:"72px",onChange:l.updateProfilePicture,onDelete:l.deleteProfilePicture},null,8,["src","name","onChange","onDelete"]),c(d,{name:a.name,"display-name":a.displayName,email:a.email,"email-enabled":!e.globalConfig.disableUserProfileUpdate,onUpdateUser:l.updateProfile},null,8,["name","display-name","email","email-enabled","onUpdateUser"])]),c(S,{title:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.NOTE")},{default:f(()=>[c(r,{"message-signature":a.messageSignature,onUpdateSignature:l.updateSignature},null,8,["message-signature","onUpdateSignature"])]),_:1},8,["title","description"]),c(S,{title:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.SEND_MESSAGE.NOTE")},{default:f(()=>[n("div",Xt,[(u(!0),m(O,null,N(a.hotKeys,y=>(u(),m("button",{key:y.key,class:"px-0 reset-base"},[(u(),F(E,{key:y.title,title:y.title,description:y.description,"light-image":y.lightImage,"dark-image":y.darkImage,active:s.isEditorHotKeyEnabled(y.key),onClick:Qt=>l.toggleHotKey(y.key)},null,8,["title","description","light-image","dark-image","active","onClick"]))]))),128))])]),_:1},8,["title","description"]),e.globalConfig.disableUserProfileUpdate?v("",!0):(u(),F(S,{key:0,title:e.$t("PROFILE_SETTINGS.FORM.PASSWORD_SECTION.TITLE")},{default:f(()=>[c(T)]),_:1},8,["title"])),c(A,{permissions:a.audioNotificationPermissions},{default:f(()=>[c(S,{title:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.TITLE"),description:e.$t("PROFILE_SETTINGS.FORM.AUDIO_NOTIFICATIONS_SECTION.NOTE")},{default:f(()=>[c(R)]),_:1},8,["title","description"])]),_:1},8,["permissions"]),c(A,{permissions:a.notificationPermissions},{default:f(()=>[c(S,{title:e.$t("PROFILE_SETTINGS.FORM.NOTIFICATIONS.TITLE")},{default:f(()=>[c(b)]),_:1},8,["title"])]),_:1},8,["permissions"]),c(S,{title:e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.TITLE"),description:e.useInstallationName(e.$t("PROFILE_SETTINGS.FORM.ACCESS_TOKEN.NOTE"),"Altores")},{default:f(()=>[c($,{value:e.currentUser.access_token,onOnCopy:l.onCopyToken},null,8,["value","onOnCopy"])]),_:1},8,["title","description"])])}const Fs=P(jt,[["render",Jt]]);export{Fs as default};
