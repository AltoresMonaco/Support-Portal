import{J as w,k as N,aa as p,a9 as $}from"./dashboard-CGLIihvy.js";import{_ as O,u as r,H as v,o as n,n as d,p as o,t as s,F as S,i as R,a as f,k as P,g as C,e as i,l as u,q as g,m as h,a0 as D,f as m}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as B,r as b}from"./index-C2DForDf.js";import{a as M,u as y}from"./index-BaHWIRRA.js";const H={mixins:[w],props:{locales:{type:Array,default:()=>[]},selectedLocaleCode:{type:String,default:""}},emits:["changeDefaultLocale","delete"],methods:{changeDefaultLocale(e){this.$emit("changeDefaultLocale",{localeCode:e})},deleteLocale(e){this.$emit("delete",{localeCode:e})}}},k={class:"woot-table"},V={scope:"col"},U={scope:"col"},G={scope:"col"},z={scope:"col"};function j(e,t,c,A,_,a){const T=r("woot-label"),L=r("woot-button"),E=v("tooltip");return n(),d("table",k,[o("thead",null,[o("tr",null,[o("th",V,s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.NAME")),1),o("th",U,s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.CODE")),1),o("th",G,s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.ARTICLE_COUNT")),1),o("th",z,s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.CATEGORIES")),1),t[0]||(t[0]=o("th",{scope:"col"},null,-1))])]),t[1]||(t[1]=o("tr",null,[o("td",{colspan:"100%",class:"horizontal-line"})],-1)),o("tbody",null,[(n(!0),d(S,null,R(c.locales,l=>(n(),d("tr",{key:l.code},[o("td",null,[o("span",null,s(e.localeName(l.code)),1),l.code===c.selectedLocaleCode?(n(),f(T,{key:0,title:e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.DEFAULT_LOCALE"),"color-scheme":"warning",small:"",variant:"smooth",class:"default-status"},null,8,["title"])):P("",!0)]),o("td",null,[o("span",null,s(l.code),1)]),o("td",null,[o("span",null,s(l.articles_count),1)]),o("td",null,[o("span",null,s(l.categories_count),1)]),o("td",null,[C(i(L,{size:"tiny",variant:"smooth",icon:"arrow-swap","color-scheme":"primary",disabled:l.code===c.selectedLocaleCode,onClick:I=>a.changeDefaultLocale(l.code)},null,8,["disabled","onClick"]),[[E,e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.SWAP"),void 0,{"top-end":!0}]]),C(i(L,{size:"tiny",variant:"smooth",icon:"delete","color-scheme":"alert",disabled:l.code===c.selectedLocaleCode,onClick:I=>a.deleteLocale(l.code)},null,8,["disabled","onClick"]),[[E,e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.DELETE"),void 0,{"top-end":!0}]])])]))),128))])])}const te=O(H,[["render",j],["__scopeId","data-v-177a3558"]]),F={components:{Modal:N},props:{show:{type:Boolean,default:!1},portal:{type:Object,default:()=>({})}},emits:["cancel","update:show"],setup(){return{v$:B()}},data(){return{selectedLocale:"",isUpdating:!1}},computed:{localShow:{get(){return this.show},set(e){this.$emit("update:show",e)}},addedLocales(){const{allowed_locales:e}=this.portal.config;return e.map(t=>t.code)},locales(){const e=this.portal.config.allowed_locales.map(t=>t.code);return Object.keys(p).map(t=>({id:t,name:p[t],code:t})).filter(t=>!e.includes(t.code))}},validations:{selectedLocale:{required:b}},methods:{async onCreate(){if(this.v$.$touch(),this.v$.$invalid)return;const e=this.addedLocales;e.push(this.selectedLocale),this.isUpdating=!0;try{await this.$store.dispatch("portals/update",{portalSlug:this.portal.slug,config:{allowed_locales:e}}),this.alertMessage=this.$t("HELP_CENTER.PORTAL.ADD_LOCALE.API.SUCCESS_MESSAGE"),this.onClose(),M($.CREATE_LOCALE,{localeAdded:this.selectedLocale,totalLocales:e.length,from:this.$route.name})}catch(t){this.alertMessage=(t==null?void 0:t.message)||this.$t("HELP_CENTER.PORTAL.ADD_LOCALE.API.ERROR_MESSAGE")}finally{y(this.alertMessage),this.isUpdating=!1}},onClose(){this.$emit("cancel")}}},q={class:"w-full"},J=["value"],W={key:0,class:"message"},K={class:"w-full"},Q={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function X(e,t,c,A,_,a){const T=r("woot-modal-header"),L=r("woot-button"),E=r("Modal");return n(),f(E,{show:a.localShow,"onUpdate:show":t[2]||(t[2]=l=>a.localShow=l),"on-close":a.onClose},{default:u(()=>[i(T,{"header-title":e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.TITLE"),"header-content":e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.SUB_TITLE")},null,8,["header-title","header-content"]),o("form",{class:"w-full",onSubmit:t[1]||(t[1]=m((...l)=>a.onCreate&&a.onCreate(...l),["prevent"]))},[o("div",q,[o("label",{class:g({error:A.v$.selectedLocale.$error})},[h(s(e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.LOCALE.LABEL"))+" ",1),C(o("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>_.selectedLocale=l)},[(n(!0),d(S,null,R(a.locales,l=>(n(),d("option",{key:l.name,value:l.id},s(l.name)+"-"+s(l.code),9,J))),128))],512),[[D,_.selectedLocale]]),A.v$.selectedLocale.$error?(n(),d("span",W,s(e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.LOCALE.ERROR")),1)):P("",!0)],2),o("div",K,[o("div",Q,[i(L,{class:"button clear",onClick:m(a.onClose,["prevent"])},{default:u(()=>[h(s(e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.BUTTONS.CANCEL")),1)]),_:1},8,["onClick"]),i(L,null,{default:u(()=>[h(s(e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.BUTTONS.CREATE")),1)]),_:1})])])])],32)]),_:1},8,["show","on-close"])}const oe=O(F,[["render",X],["__scopeId","data-v-0b744325"]]);export{oe as A,te as L};
