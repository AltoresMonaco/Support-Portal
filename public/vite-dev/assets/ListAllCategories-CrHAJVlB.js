import{_ as H,u as O,H as x,o as r,n as u,p as e,t as o,F as I,i as P,g as R,e as h,k as L,r as g,c as T,l as U,a as y,m as V}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as Y}from"./vue-router-CNCrM2WK.js";import{u as z,c as j}from"./mutationHelpers-3VTcoJiD.js";import{u as F}from"./globalConfig-DaGjiImb.js";import{a as W,u as X}from"./index-BaHWIRRA.js";import{ad as q,a9 as J}from"./dashboard-CGLIihvy.js";import K from"./EditCategory-wKgQ76Fz.js";import"./index-BP-sUqpX.js";import"./index-DaWXXnfb.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-Y4OjWrJ-.js";import"./axios-CCb-kr4I.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./Thumbnail-DLjRBBx8.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./index-C2DForDf.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";const Q={props:{categories:{type:Array,default:()=>[]}},emits:["edit","delete"],methods:{editCategory(l){this.$emit("edit",l)},deleteCategory(l){this.$emit("delete",l)}}},Z={class:"woot-table"},ee={scope:"col"},te={scope:"col"},oe={scope:"col"},le={scope:"col"},ae={class:"inline-flex gap-1"},se={key:0,class:"flex justify-center mt-8 text-base text-slate-500 dark:text-slate-300"};function ne(l,i,c,E,d,p){const C=O("woot-button"),_=x("tooltip");return r(),u("div",null,[e("table",Z,[e("thead",null,[e("tr",null,[e("th",ee,o(l.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.NAME")),1),e("th",te,o(l.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.DESCRIPTION")),1),e("th",oe,o(l.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.LOCALE")),1),e("th",le,o(l.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.ARTICLE_COUNT")),1),i[0]||(i[0]=e("th",{scope:"col"},null,-1))])]),i[1]||(i[1]=e("tr",null,[e("td",{colspan:"100%",class:"horizontal-line"})],-1)),e("tbody",null,[(r(!0),u(I,null,P(c.categories,a=>(r(),u("tr",{key:a.id},[e("td",null,[e("span",null,o(a.icon)+" "+o(a.name),1)]),e("td",null,[e("span",null,o(a.description),1)]),e("td",null,[e("span",null,o(a.locale),1)]),e("td",null,[e("span",null,o(a.meta.articles_count),1)]),e("td",ae,[R(h(C,{size:"tiny",variant:"smooth",icon:"edit","color-scheme":"secondary",onClick:m=>p.editCategory(a)},null,8,["onClick"]),[[_,l.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.ACTION_BUTTON.EDIT"),void 0,{"top-end":!0}]]),R(h(C,{size:"tiny",variant:"smooth",icon:"delete","color-scheme":"alert",onClick:m=>p.deleteCategory(a)},null,8,["onClick"]),[[_,l.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.ACTION_BUTTON.DELETE"),void 0,{"top-end":!0}]])])]))),128))])]),c.categories.length===0?(r(),u("p",se,o(l.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.EMPTY_TEXT")),1)):L("",!0)])}const re=H(Q,[["render",ne],["__scopeId","data-v-2a1c1b31"]]),ie={class:"w-full max-w-6xl"},ce={class:"flex items-center justify-between mb-4"},ue={class:"flex items-center w-full gap-3"},Ee={class:"mb-0 text-base font-normal text-slate-800 dark:text-slate-100"},de=["value"],pe=["value"],me={class:"items-center flex-none"},Te={class:"category-list"},je=Object.assign({name:"ListAllCategories"},{__name:"ListAllCategories",setup(l){const i=g({}),c=g("en"),E=g(!1),d=g(!1),p=z(),C=j(),_=Y(),{t:a}=F(),m=T(()=>_.params.portalSlug),S=T(()=>p["categories/categoriesByLocaleCode"].value(c.value)),v=T(()=>{const t=m.value;return t?p["portals/portalBySlug"].value(t):p["portals/allPortals"].value[0]}),f=T(()=>v.value?v.value.name:""),N=T(()=>v.value?v.value.config.allowed_locales:[]),w=T(()=>N.value.map(t=>t.code));function $(){d.value=!0}function D(t){i.value=t,E.value=!0}function k(){d.value=!1}function B(){E.value=!1}async function b(t){await C.dispatch("categories/index",{portalSlug:m.value,locale:t})}async function G(t){var A;let s="";try{await C.dispatch("categories/delete",{portalSlug:m.value,categoryId:t.id}),s=a("HELP_CENTER.CATEGORY.DELETE.API.SUCCESS_MESSAGE"),W(J.DELETE_CATEGORY,{hasArticles:((A=t==null?void 0:t.meta)==null?void 0:A.articles_count)!==0})}catch(n){s=(n==null?void 0:n.message)||a("HELP_CENTER.CATEGORY.DELETE.API.ERROR_MESSAGE")}finally{X(s)}}function M(t){const s=t.target.value;c.value=s,b(s)}return(t,s)=>{const A=O("woot-button");return r(),u("div",ie,[e("header",ce,[e("div",ue,[e("label",Ee,o(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TITLE")),1),e("select",{value:c.value,class:"w-[15%] h-8 mb-0 py-0.5",onChange:M},[(r(!0),u(I,null,P(w.value,n=>(r(),u("option",{key:n,value:n},o(n),9,pe))),128))],40,de)]),e("div",me,[h(A,{size:"small",variant:"smooth","color-scheme":"primary",icon:"add",onClick:$},{default:U(()=>[V(o(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.NEW_CATEGORY")),1)]),_:1})])]),e("div",Te,[h(re,{categories:S.value,onDelete:G,onEdit:D},null,8,["categories"])]),E.value?(r(),y(K,{key:0,show:E.value,"onUpdate:show":s[0]||(s[0]=n=>E.value=n),"portal-name":f.value,locale:i.value.locale,category:i.value,"selected-portal-slug":m.value,onCancel:B},null,8,["show","portal-name","locale","category","selected-portal-slug"])):L("",!0),d.value?(r(),y(q,{key:1,show:d.value,"onUpdate:show":s[1]||(s[1]=n=>d.value=n),"portal-name":f.value,locale:c.value,onCancel:k},null,8,["show","portal-name","locale"])):L("",!0)])}}});export{je as default};
