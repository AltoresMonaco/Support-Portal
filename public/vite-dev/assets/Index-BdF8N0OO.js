import{c as r,o as s,n as T,t as v,r as y,a as c,l as m,u as _,H as F,e as E,L as g,m as H,k as h,p as n,i as W,g as O,F as j}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as w}from"./index-BaHWIRRA.js";import{T as z}from"./Thumbnail-DLjRBBx8.js";import{j as U}from"./dashboard-CGLIihvy.js";import{_ as V}from"./SettingsLayout-CbuFko1M.js";import{_ as q}from"./BaseSettingsHeader-CxIYpdLq.js";import{u as L}from"./globalConfig-DaGjiImb.js";import{u as B,c as Y}from"./mutationHelpers-3VTcoJiD.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./axios-CCb-kr4I.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./index-C2DForDf.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./index-DaWXXnfb.js";import"./BackButton-YZy1EtJv.js";const J={__name:"ChannelName",props:{channelType:{type:String,required:!0},medium:{type:String,default:""}},setup(M){const l=M,f=B(),{t}=L(),d=r(()=>f["globalConfig/get"].value),i={"Channel::FacebookPage":"MESSENGER","Channel::WebWidget":"WEB_WIDGET","Channel::TwitterProfile":"TWITTER_PROFILE","Channel::TwilioSms":"TWILIO_SMS","Channel::Whatsapp":"WHATSAPP","Channel::Sms":"SMS","Channel::Email":"EMAIL","Channel::Telegram":"TELEGRAM","Channel::Line":"LINE","Channel::Api":"API"},a=()=>l.medium==="whatsapp"?t("INBOX_MGMT.CHANNELS.WHATSAPP"):t("INBOX_MGMT.CHANNELS.TWILIO_SMS"),p=r(()=>l.channelType==="Channel::Api"?d.value.apiChannelName||t("INBOX_MGMT.CHANNELS.API"):l.channelType==="Channel::TwilioSms"?a():t(`INBOX_MGMT.CHANNELS.${i[l.channelType]}`));return(I,N)=>(s(),T("span",null,v(p.value),1))}},K={class:"min-w-full overflow-x-auto divide-y divide-slate-75 dark:divide-slate-700"},Q={class:"divide-y divide-slate-25 dark:divide-slate-800 flex-1 text-slate-700 dark:text-slate-100"},Z={class:"py-4 ltr:pr-4 rtl:pl-4"},ee={class:"flex items-center flex-row gap-4"},te={key:1,class:"w-12 h-12 bg-black-50 dark:bg-black-800 rounded-full p-2 ring ring-opacity-20 dark:ring-opacity-80 ring-black-100 dark:ring-black-900 border border-slate-100 dark:border-slate-700/50 shadow-sm block"},oe={class:"block font-medium capitalize"},ne={class:"py-4"},ae={class:"flex gap-1 justify-end"},De={__name:"Index",setup(M){const l=B(),f=Y(),{t}=L(),{isAdmin:d}=U(),i=y(!1),a=y({}),p=r(()=>l["inboxes/getInboxes"].value),I=r(()=>l["inboxes/getUIFlags"].value),N=r(()=>`${t("INBOX_MGMT.DELETE.CONFIRM.YES")} ${a.value.name}`),G=r(()=>`${t("INBOX_MGMT.DELETE.CONFIRM.NO")} ${a.value.name}`),A=r(()=>`${t("INBOX_MGMT.DELETE.CONFIRM.MESSAGE")} ${a.value.name}?`),x=r(()=>`${t("INBOX_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{inboxName:a.value.name})}`),D=async({id:e})=>{try{await f.dispatch("inboxes/delete",e),w(t("INBOX_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch{w(t("INBOX_MGMT.DELETE.API.ERROR_MESSAGE"))}},C=()=>{i.value=!1,a.value={}},X=()=>{D(a.value),C()},$=e=>{i.value=!0,a.value=e};return(e,u)=>{const R=_("fluent-icon"),k=_("router-link"),S=_("woot-button"),P=_("woot-confirm-delete-modal"),b=F("tooltip");return s(),c(V,{"no-records-found":!p.value.length,"no-records-message":e.$t("INBOX_MGMT.LIST.404"),"is-loading":I.value.isFetching},{header:m(()=>[E(q,{title:e.$t("INBOX_MGMT.HEADER"),description:e.$t("INBOX_MGMT.DESCRIPTION"),"link-text":e.$t("INBOX_MGMT.LEARN_MORE"),"feature-name":"inboxes"},{actions:m(()=>[g(d)?(s(),c(k,{key:0,class:"button nice rounded-md",to:{name:"settings_inbox_new"}},{default:m(()=>[E(R,{icon:"add-circle"}),H(" "+v(e.$t("SETTINGS.INBOXES.NEW_INBOX")),1)]),_:1})):h("",!0)]),_:1},8,["title","description","link-text"])]),body:m(()=>[n("table",K,[n("tbody",Q,[(s(!0),T(j,null,W(p.value,o=>(s(),T("tr",{key:o.id},[n("td",Z,[n("div",ee,[o.avatar_url?(s(),c(z,{key:0,class:"bg-black-50 dark:bg-black-800 rounded-full p-2 ring ring-opacity-20 dark:ring-opacity-80 ring-black-100 dark:ring-black-900 border border-slate-100 dark:border-slate-700/50 shadow-sm",src:o.avatar_url,username:o.name,size:"48px"},null,8,["src","username"])):(s(),T("div",te,u[1]||(u[1]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",class:"opacity-80 p-1"},[n("path",{fill:"currentColor",d:"M1 12c0-5.185 0-7.778 1.61-9.39C4.223 1 6.816 1 12 1s7.778 0 9.39 1.61C23 4.223 23 6.816 23 12s0 7.778-1.61 9.39C19.777 23 17.184 23 12 23s-7.778 0-9.39-1.61C1 19.777 1 17.184 1 12",opacity:".35"}),n("path",{fill:"currentColor",d:"M2.61 21.389c1.612 1.61 4.205 1.61 9.39 1.61s7.778 0 9.39-1.61c1.492-1.493 1.601-3.829 1.61-8.29h-3.476c-.996 0-1.494 0-1.931.202c-.438.201-.762.58-1.41 1.335l-.666.777c-.648.756-.972 1.134-1.41 1.335s-.935.202-1.93.202h-.353c-.996 0-1.494 0-1.931-.202c-.438-.2-.762-.579-1.41-1.335l-.666-.777c-.648-.756-.972-1.134-1.41-1.335s-.935-.201-1.93-.201H1c.008 4.46.118 6.796 1.61 8.289"})],-1)]))),n("div",null,[n("span",oe,v(o.name),1),E(J,{"channel-type":o.channel_type,medium:o.medium},null,8,["channel-type","medium"])])])]),n("td",ne,[n("div",ae,[E(k,{to:{name:"settings_inbox_show",params:{inboxId:o.id}}},{default:m(()=>[g(d)?O((s(),c(S,{key:0,variant:"smooth",size:"tiny",icon:"settings","color-scheme":"secondary","class-names":"grey-btn"},null,512)),[[b,e.$t("INBOX_MGMT.SETTINGS"),void 0,{top:!0}]]):h("",!0)]),_:2},1032,["to"]),g(d)?O((s(),c(S,{key:0,variant:"smooth","color-scheme":"alert",size:"tiny","class-names":"grey-btn",icon:"dismiss-circle",onClick:se=>$(o)},null,8,["onClick"])),[[b,e.$t("INBOX_MGMT.DELETE.BUTTON_TEXT"),void 0,{top:!0}]]):h("",!0)])])]))),128))])])]),default:m(()=>[i.value?(s(),c(P,{key:0,show:i.value,"onUpdate:show":u[0]||(u[0]=o=>i.value=o),title:e.$t("INBOX_MGMT.DELETE.CONFIRM.TITLE"),message:A.value,"confirm-text":N.value,"reject-text":G.value,"confirm-value":a.value.name,"confirm-place-holder-text":x.value,onOnConfirm:X,onOnClose:C},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):h("",!0)]),_:1},8,["no-records-found","no-records-message","is-loading"])}}};export{De as default};
