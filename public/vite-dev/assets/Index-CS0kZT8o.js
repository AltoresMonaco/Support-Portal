import{_ as X,u as p,o as n,a as y,l as b,p as a,e as E,f as N,q as R,m as g,t as u,g as _,n as T,F as C,i as O,a0 as H,k as m,U as z,v as q,a1 as J,r as G,c,H as ie,P as ae}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{_ as ne}from"./BaseSettingsHeader-CxIYpdLq.js";import{u as Q,r as D,m as W}from"./index-C2DForDf.js";import{m as ue,u as Z}from"./globalConfig-DaGjiImb.js";import{u as P}from"./index-BaHWIRRA.js";import{am as Te}from"./dashboard-CGLIihvy.js";import{g as de}from"./Validators-eX6_8wdj.js";import{u as ee,c as te}from"./mutationHelpers-3VTcoJiD.js";import{_ as Ee}from"./SettingsLayout-CbuFko1M.js";import"./BackButton-YZy1EtJv.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./axios-CCb-kr4I.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./Thumbnail-DLjRBBx8.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Icon-Dtj3LCzD.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./index-DaWXXnfb.js";const pe=[{id:0,option:"Conversation"},{id:1,option:"Contact"}],le=[{id:0,option:"Text"},{id:1,option:"Number"},{id:4,option:"Link"},{id:5,option:"Date"},{id:6,option:"List"},{id:7,option:"Checkbox"}],me={props:{onClose:{type:Function,default:()=>{}},selectedAttributeModelTab:{type:Number,default:0}},setup(){return{v$:Q()}},data(){return{displayName:"",description:"",attributeModel:this.selectedAttributeModelTab||0,attributeType:0,attributeKey:"",regexPattern:null,regexCue:null,regexEnabled:!1,models:pe,types:le,values:[],options:[],show:!0,isTouched:!1}},computed:{...ue({uiFlags:"getUIFlags"}),isMultiselectInvalid(){return this.isTouched&&this.values.length===0},isTagInputInvalid(){return this.isAttributeTypeList&&this.values.length===0},attributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.displayName.$invalid||this.v$.description.$invalid||this.uiFlags.isCreating||this.isTagInputInvalid},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},validations:{displayName:{required:D,minLength:W(1)},description:{required:D},attributeModel:{required:D},attributeType:{required:D},attributeKey:{required:D,isKey(e){return!(e.indexOf(" ")>=0)}}},methods:{addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},onTouch(){this.isTouched=!0},onDisplayNameChange(){this.attributeKey=Te(this.displayName)},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled},async addAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/create",{attribute_display_name:this.displayName,attribute_description:this.description,attribute_model:this.attributeModel,attribute_display_type:this.attributeType,attribute_key:this.attributeKey,attribute_values:this.attributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.ADD.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.ADD.API.ERROR_MESSAGE")}finally{P(this.alertMessage)}}}}},Ae={class:"flex flex-col h-auto overflow-auto"},Me={class:"w-full"},be=["value"],ce={key:0,class:"message"},Re=["placeholder"],_e={key:0,class:"message"},he=["value"],ge={key:0,class:"message"},ye={key:0,class:"multiselect--wrap"},ve={key:1},De={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Ie(e,t,d,i,l,s){const I=p("woot-modal-header"),M=p("woot-input"),S=p("multiselect"),B=p("woot-submit-button"),r=p("woot-modal");return n(),y(r,{show:l.show,"onUpdate:show":t[13]||(t[13]=o=>l.show=o),"on-close":d.onClose},{default:b(()=>[a("div",Ae,[E(I,{"header-title":e.$t("ATTRIBUTES_MGMT.ADD.TITLE")},null,8,["header-title"]),a("form",{class:"flex w-full",onSubmit:t[12]||(t[12]=N((...o)=>s.addAttributes&&s.addAttributes(...o),["prevent"]))},[a("div",Me,[a("label",{class:R({error:i.v$.attributeModel.$error})},[g(u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.LABEL"))+" ",1),_(a("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.attributeModel=o)},[(n(!0),T(C,null,O(l.models,o=>(n(),T("option",{key:o.id,value:o.id},u(o.option),9,be))),128))],512),[[H,l.attributeModel]]),i.v$.attributeModel.$error?(n(),T("span",ce,u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.MODEL.ERROR")),1)):m("",!0)],2),E(M,{modelValue:l.displayName,"onUpdate:modelValue":[t[1]||(t[1]=o=>l.displayName=o),s.onDisplayNameChange],label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:R({error:i.v$.displayName.$error}),error:i.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:i.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onUpdate:modelValue","onBlur"]),E(M,{modelValue:l.attributeKey,"onUpdate:modelValue":t[2]||(t[2]=o=>l.attributeKey=o),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:R({error:i.v$.attributeKey.$error}),error:i.v$.attributeKey.$error?s.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),onBlur:i.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),a("label",{class:R({error:i.v$.description.$error})},[g(u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),_(a("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>l.description=o),rows:"3",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[4]||(t[4]=(...o)=>i.v$.description.$touch&&i.v$.description.$touch(...o))},null,40,Re),[[z,l.description]]),i.v$.description.$error?(n(),T("span",_e,u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):m("",!0)],2),a("label",{class:R({error:i.v$.attributeType.$error})},[g(u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),_(a("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>l.attributeType=o)},[(n(!0),T(C,null,O(l.types,o=>(n(),T("option",{key:o.id,value:o.id},u(o.option),9,he))),128))],512),[[H,l.attributeType]]),i.v$.attributeType.$error?(n(),T("span",ge,u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):m("",!0)],2),s.isAttributeTypeList?(n(),T("div",ye,[a("label",null,u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.LABEL")),1),E(S,{ref:"tagInput",modelValue:l.values,"onUpdate:modelValue":t[6]||(t[6]=o=>l.values=o),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:R({invalid:s.isMultiselectInvalid}),options:l.options,multiple:"",taggable:"",onClose:s.onTouch,onTag:s.addTagValue},null,8,["modelValue","placeholder","class","options","onClose","onTag"]),_(a("label",{class:"error-message"},u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[q,s.isMultiselectInvalid]])])):m("",!0),s.isAttributeTypeText?(n(),T("div",ve,[_(a("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l.regexEnabled=o),type:"checkbox",onInput:t[8]||(t[8]=(...o)=>s.toggleRegexEnabled&&s.toggleRegexEnabled(...o))},null,544),[[J,l.regexEnabled]]),g(" "+u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):m("",!0),s.isAttributeTypeText&&s.isRegexEnabled?(n(),y(M,{key:2,modelValue:l.regexPattern,"onUpdate:modelValue":t[9]||(t[9]=o=>l.regexPattern=o),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):m("",!0),s.isAttributeTypeText&&s.isRegexEnabled?(n(),y(M,{key:3,modelValue:l.regexCue,"onUpdate:modelValue":t[10]||(t[10]=o=>l.regexCue=o),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):m("",!0),a("div",De,[E(B,{disabled:s.isButtonDisabled,"button-text":e.$t("ATTRIBUTES_MGMT.ADD.SUBMIT")},null,8,["disabled","button-text"]),a("button",{class:"button clear",onClick:t[11]||(t[11]=N((...o)=>d.onClose&&d.onClose(...o),["prevent"]))},u(e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT")),1)])])],32)])]),_:1},8,["show","on-close"])}const Se=X(me,[["render",Ie],["__scopeId","data-v-9498e748"]]),Be={components:{},props:{selectedAttribute:{type:Object,default:()=>{}},isUpdating:{type:Boolean,default:!1}},emits:["onClose"],setup(){return{v$:Q()}},data(){return{displayName:"",description:"",attributeType:0,regexPattern:null,regexCue:null,regexEnabled:!1,types:le,show:!0,attributeKey:"",values:[],options:[],isTouched:!0}},validations:{displayName:{required:D},attributeType:{required:D},description:{required:D,minLength:W(1)},attributeKey:{required:D,isKey(e){return!(e.indexOf(" ")>=0)}}},computed:{setAttributeListValue(){return this.selectedAttribute.attribute_values.map(e=>({name:e}))},updatedAttributeListValues(){return this.values.map(e=>e.name)},isButtonDisabled(){return this.v$.description.$invalid||this.isMultiselectInvalid},isMultiselectInvalid(){return this.isAttributeTypeList&&this.isTouched&&this.values.length===0},pageTitle(){return`${this.$t("ATTRIBUTES_MGMT.EDIT.TITLE")} - ${this.selectedAttribute.attribute_display_name}`},selectedAttributeType(){return this.types.find(e=>e.option.toLowerCase()===this.selectedAttribute.attribute_display_type).id},keyErrorMessage(){return this.v$.attributeKey.isKey?this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.ERROR"):this.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.IN_VALID")},isAttributeTypeList(){return this.attributeType===6},isAttributeTypeText(){return this.attributeType===0},isRegexEnabled(){return this.regexEnabled}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("onClose")},addTagValue(e){const t={name:e};this.values.push(t),this.$refs.tagInput.$el.focus()},setFormValues(){const e=this.selectedAttribute.regex_pattern?de(this.selectedAttribute.regex_pattern).source:null;this.displayName=this.selectedAttribute.attribute_display_name,this.description=this.selectedAttribute.attribute_description,this.attributeType=this.selectedAttributeType,this.attributeKey=this.selectedAttribute.attribute_key,this.regexPattern=e,this.regexCue=this.selectedAttribute.regex_cue,this.regexEnabled=e!=null,this.values=this.setAttributeListValue},async editAttributes(){if(this.v$.$touch(),!this.v$.$invalid){this.regexEnabled||(this.regexPattern=null,this.regexCue=null);try{await this.$store.dispatch("attributes/update",{id:this.selectedAttribute.id,attribute_description:this.description,attribute_display_name:this.displayName,attribute_values:this.updatedAttributeListValues,regex_pattern:this.regexPattern?new RegExp(this.regexPattern).toString():null,regex_cue:this.regexCue}),this.alertMessage=this.$t("ATTRIBUTES_MGMT.EDIT.API.SUCCESS_MESSAGE"),this.onClose()}catch(e){const t=e==null?void 0:e.message;this.alertMessage=t||this.$t("ATTRIBUTES_MGMT.EDIT.API.ERROR_MESSAGE")}finally{P(this.alertMessage)}}},toggleRegexEnabled(){this.regexEnabled=!this.regexEnabled}}},Le={class:"flex flex-col h-auto overflow-auto"},Ue={class:"w-full"},fe=["placeholder"],Ce={key:0,class:"message"},Oe=["value"],Ge={key:0,class:"message"},xe={key:0,class:"multiselect--wrap"},we={key:1},$e={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function Ne(e,t,d,i,l,s){const I=p("woot-modal-header"),M=p("woot-input"),S=p("multiselect"),B=p("woot-button");return n(),T("div",Le,[E(I,{"header-title":s.pageTitle},null,8,["header-title"]),a("form",{class:"flex flex-col w-full",onSubmit:t[10]||(t[10]=N((...r)=>s.editAttributes&&s.editAttributes(...r),["prevent"]))},[a("div",Ue,[E(M,{modelValue:l.displayName,"onUpdate:modelValue":t[0]||(t[0]=r=>l.displayName=r),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.LABEL"),type:"text",class:R({error:i.v$.displayName.$error}),error:i.v$.displayName.$error?e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.ERROR"):"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.NAME.PLACEHOLDER"),onBlur:i.v$.displayName.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),E(M,{modelValue:l.attributeKey,"onUpdate:modelValue":t[1]||(t[1]=r=>l.attributeKey=r),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.LABEL"),type:"text",class:R({error:i.v$.attributeKey.$error}),error:i.v$.attributeKey.$error?s.keyErrorMessage:"",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.KEY.PLACEHOLDER"),readonly:"",onBlur:i.v$.attributeKey.$touch},null,8,["modelValue","label","class","error","placeholder","onBlur"]),a("label",{class:R({error:i.v$.description.$error})},[g(u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.LABEL"))+" ",1),_(a("textarea",{"onUpdate:modelValue":t[2]||(t[2]=r=>l.description=r),rows:"5",type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.PLACEHOLDER"),onBlur:t[3]||(t[3]=(...r)=>i.v$.description.$touch&&i.v$.description.$touch(...r))},null,40,fe),[[z,l.description]]),i.v$.description.$error?(n(),T("span",Ce,u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.DESC.ERROR")),1)):m("",!0)],2),a("label",{class:R({error:i.v$.attributeType.$error})},[g(u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LABEL"))+" ",1),_(a("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>l.attributeType=r),disabled:""},[(n(!0),T(C,null,O(l.types,r=>(n(),T("option",{key:r.id,value:r.id},u(r.option),9,Oe))),128))],512),[[H,l.attributeType]]),i.v$.attributeType.$error?(n(),T("span",Ge,u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.ERROR")),1)):m("",!0)],2),s.isAttributeTypeList?(n(),T("div",xe,[a("label",null,u(e.$t("ATTRIBUTES_MGMT.EDIT.TYPE.LIST.LABEL")),1),E(S,{ref:"tagInput",modelValue:l.values,"onUpdate:modelValue":t[5]||(t[5]=r=>l.values=r),placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.PLACEHOLDER"),label:"name","track-by":"name",class:R({invalid:s.isMultiselectInvalid}),options:l.options,multiple:"",taggable:"",onTag:s.addTagValue},null,8,["modelValue","placeholder","class","options","onTag"]),_(a("label",{class:"error-message"},u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.TYPE.LIST.ERROR")),513),[[q,s.isMultiselectInvalid]])])):m("",!0),s.isAttributeTypeText?(n(),T("div",we,[_(a("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>l.regexEnabled=r),type:"checkbox",onInput:t[7]||(t[7]=(...r)=>s.toggleRegexEnabled&&s.toggleRegexEnabled(...r))},null,544),[[J,l.regexEnabled]]),g(" "+u(e.$t("ATTRIBUTES_MGMT.ADD.FORM.ENABLE_REGEX.LABEL")),1)])):m("",!0),s.isAttributeTypeText&&s.isRegexEnabled?(n(),y(M,{key:2,modelValue:l.regexPattern,"onUpdate:modelValue":t[8]||(t[8]=r=>l.regexPattern=r),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_PATTERN.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):m("",!0),s.isAttributeTypeText&&s.isRegexEnabled?(n(),y(M,{key:3,modelValue:l.regexCue,"onUpdate:modelValue":t[9]||(t[9]=r=>l.regexCue=r),label:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.LABEL"),type:"text",placeholder:e.$t("ATTRIBUTES_MGMT.ADD.FORM.REGEX_CUE.PLACEHOLDER")},null,8,["modelValue","label","placeholder"])):m("",!0)]),a("div",$e,[E(B,{"is-loading":d.isUpdating,disabled:s.isButtonDisabled},{default:b(()=>[g(u(e.$t("ATTRIBUTES_MGMT.EDIT.UPDATE_BUTTON_TEXT")),1)]),_:1},8,["is-loading","disabled"]),E(B,{variant:"clear",onClick:N(s.onClose,["prevent"])},{default:b(()=>[g(u(e.$t("ATTRIBUTES_MGMT.ADD.CANCEL_BUTTON_TEXT")),1)]),_:1},8,["onClick"])])],32)])}const Pe=X(Be,[["render",Ne],["__scopeId","data-v-e015aee6"]]),ke={class:"flex flex-col"},Fe={class:"min-w-full overflow-x-auto"},Ve={class:"divide-y divide-slate-25 dark:divide-slate-800 flex-1 text-slate-700 dark:text-slate-100"},Ke={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},Ye={class:"py-4 ltr:pr-4 rtl:pl-4"},He={class:"py-4 ltr:pr-4 rtl:pl-4 overflow-hidden whitespace-nowrap text-ellipsis"},Xe={class:"py-4 ltr:pr-4 rtl:pl-4 attribute-key overflow-hidden whitespace-nowrap text-ellipsis"},je={class:"py-4 min-w-xs"},ze={class:"flex gap-1 justify-end"},qe={__name:"CustomAttribute",props:{attributeModel:{type:String,default:"conversation_attribute"}},setup(e){const t=e,{t:d}=Z(),i=G(!1),l=G(!1),s=G({}),I=ee(),M=te(),S=c(()=>I["attributes/getAttributesByModel"].value(t.attributeModel)),B=c(()=>I["attributes/getUIFlags"].value),r=c(()=>s.value.attribute_display_name),o=c(()=>`${d("ATTRIBUTES_MGMT.DELETE.CONFIRM.YES")} ${r.value}`),k=c(()=>d("ATTRIBUTES_MGMT.DELETE.CONFIRM.NO")),h=c(()=>d("ATTRIBUTES_MGMT.DELETE.CONFIRM.TITLE",{attributeName:r.value})),x=c(()=>`${d("ATTRIBUTES_MGMT.DELETE.CONFIRM.PLACE_HOLDER",{attributeName:r.value})}`),F=async({id:v})=>{var L;try{await M.dispatch("attributes/delete",v),P(d("ATTRIBUTES_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(f){const Y=((L=f==null?void 0:f.response)==null?void 0:L.message)||d("ATTRIBUTES_MGMT.DELETE.API.ERROR_MESSAGE");P(Y)}},V=v=>{i.value=!0,s.value=v},w=()=>{i.value=!1},$=()=>{l.value=!1,s.value={}},U=()=>{F(s.value),$()},K=v=>{l.value=!0,s.value=v},se=c(()=>[d("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.NAME"),d("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),d("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.TYPE"),d("ATTRIBUTES_MGMT.LIST.TABLE_HEADER.KEY")]);return(v,L)=>{const f=p("woot-button"),Y=p("woot-modal"),oe=p("woot-confirm-delete-modal"),j=ie("tooltip");return n(),T("div",ke,[a("table",Fe,[a("thead",null,[(n(!0),T(C,null,O(se.value,A=>(n(),T("th",{key:A,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-slate-700 dark:text-slate-300"},u(A),1))),128))]),a("tbody",Ve,[(n(!0),T(C,null,O(S.value,A=>(n(),T("tr",{key:A.attribute_key},[a("td",Ke,u(A.attribute_display_name),1),a("td",Ye,u(A.attribute_description),1),a("td",He,u(A.attribute_display_type),1),a("td",Xe,u(A.attribute_key),1),a("td",je,[a("div",ze,[_(E(f,{variant:"smooth",size:"tiny","color-scheme":"secondary","class-names":"grey-btn",icon:"edit",onClick:re=>V(A)},null,8,["onClick"]),[[j,v.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.EDIT"),void 0,{top:!0}]]),_(E(f,{variant:"smooth","color-scheme":"alert",size:"tiny",icon:"dismiss-circle","class-names":"grey-btn",onClick:re=>K(A)},null,8,["onClick"]),[[j,v.$t("ATTRIBUTES_MGMT.LIST.BUTTONS.DELETE"),void 0,{top:!0}]])])])]))),128))])]),E(Y,{show:i.value,"onUpdate:show":L[0]||(L[0]=A=>i.value=A),"on-close":w},{default:b(()=>[E(Pe,{"selected-attribute":s.value,"is-updating":B.value.isUpdating,onOnClose:w},null,8,["selected-attribute","is-updating"])]),_:1},8,["show"]),l.value?(n(),y(oe,{key:0,show:l.value,"onUpdate:show":L[1]||(L[1]=A=>l.value=A),title:h.value,message:v.$t("ATTRIBUTES_MGMT.DELETE.CONFIRM.MESSAGE"),"confirm-text":o.value,"reject-text":k.value,"confirm-value":s.value.attribute_display_name,"confirm-place-holder-text":x.value,onOnConfirm:U,onOnClose:$},null,8,["show","title","message","confirm-text","reject-text","confirm-value","confirm-place-holder-text"])):m("",!0)])}}},Je=X(qe,[["__scopeId","data-v-3b9c92d1"]]),St={__name:"Index",setup(e){const{t}=Z(),d=ee(),i=te(),l=G(!1),s=G(0),I=c(()=>d["attributes/getUIFlags"].value),M=()=>{l.value=!0},S=()=>{l.value=!1},B=c(()=>[{key:0,name:t("ATTRIBUTES_MGMT.TABS.CONVERSATION")},{key:1,name:t("ATTRIBUTES_MGMT.TABS.CONTACT")}]);ae(()=>{i.dispatch("attributes/get")});const r=c(()=>s.value?"contact_attribute":"conversation_attribute"),o=c(()=>d["attributes/getAttributesByModel"].value(r.value)),k=h=>{s.value=h};return(h,x)=>{const F=p("woot-button"),V=p("woot-tabs-item"),w=p("woot-tabs"),$=p("woot-modal");return n(),y(Ee,{"is-loading":I.value.isFetching,"loading-message":h.$t("ATTRIBUTES_MGMT.LOADING"),"no-records-found":!o.value.length,"no-records-message":h.$t("ATTRIBUTES_MGMT.LIST.EMPTY_RESULT.404")},{header:b(()=>[E(ne,{title:h.$t("ATTRIBUTES_MGMT.HEADER"),description:h.$t("ATTRIBUTES_MGMT.DESCRIPTION"),"link-text":h.$t("ATTRIBUTES_MGMT.LEARN_MORE"),"feature-name":"custom_attributes"},{actions:b(()=>[E(F,{class:"button nice rounded-md",icon:"add-circle",onClick:M},{default:b(()=>[g(u(h.$t("ATTRIBUTES_MGMT.HEADER_BTN_TXT")),1)]),_:1})]),_:1},8,["title","description","link-text"])]),preBody:b(()=>[E(w,{class:"font-medium [&_.tabs]:p-0 mb-4",index:s.value,onChange:k},{default:b(()=>[(n(!0),T(C,null,O(B.value,(U,K)=>(n(),y(V,{key:U.key,index:K,name:U.name,"show-badge":!1},null,8,["index","name"]))),128))]),_:1},8,["index"])]),body:b(()=>[(n(),y(Je,{key:r.value,"attribute-model":r.value},null,8,["attribute-model"]))]),default:b(()=>[l.value?(n(),y($,{key:0,show:l.value,"onUpdate:show":x[0]||(x[0]=U=>l.value=U),"on-close":S},{default:b(()=>[E(Se,{"on-close":S,"selected-attribute-model-tab":s.value},null,8,["selected-attribute-model-tab"])]),_:1},8,["show"])):m("",!0)]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}};export{St as default};
