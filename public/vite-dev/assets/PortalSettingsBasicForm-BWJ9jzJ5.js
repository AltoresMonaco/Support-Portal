import{a6 as w,c as n,P as y,u as L,o as p,a as x,l as E,e as i,m as P,t as A,L as a,p as r,n as k,k as F,q as R}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as X,r as D,m as z}from"./index-C2DForDf.js";import{u as j}from"./globalConfig-DaGjiImb.js";import{u as O}from"./index-BaHWIRRA.js";import{ab as q,ac as K}from"./dashboard-CGLIihvy.js";import{a as Y}from"./portalHelper-trLcR8pg.js";import{G as Z,w as W}from"./DashboardIcon-CPXNa31t.js";import{h as J}from"./timeHelper-BT38nsET.js";import{d as Q}from"./Validators-eX6_8wdj.js";import{_ as ee}from"./SettingsLayout-Csyv2M7u.js";const oe={class:"mb-4"},te={class:"flex flex-row items-center"},le={key:0,class:"avatar-delete-btn"},ae={class:"mt-1 mb-0 text-xs not-italic text-slate-600 dark:text-slate-400"},re={class:"mb-4"},se={class:"mb-4"},ne={class:"mb-4"},b=4,Te=Object.assign({name:"PortalSettingsBasicForm"},{__name:"PortalSettingsBasicForm",props:{portal:{type:Object,default:()=>{}},isSubmitting:{type:Boolean,default:!1},submitButtonText:{type:String,default:""}},emits:["submit","deleteLogo"],setup(d,{emit:g}){const f=d,_=g,{EXAMPLE_URL:v}=W,{t:s}=j(),e=w({name:"",slug:"",domain:"",logoUrl:"",avatarBlobId:""}),C={name:{required:D,minLength:z(2)},slug:{required:D},domain:{isDomain:Q}},l=X(C,e),N=n(()=>l.value.name.$error?s("HELP_CENTER.CATEGORY.ADD.NAME.ERROR"):""),h=n(()=>l.value.slug.$error?s("HELP_CENTER.CATEGORY.ADD.SLUG.ERROR"):""),I=n(()=>l.value.domain.$error?s("HELP_CENTER.PORTAL.ADD.DOMAIN.ERROR"):""),S=n(()=>Y(e.slug)),B=n(()=>s("HELP_CENTER.PORTAL.ADD.DOMAIN.HELP_TEXT",{exampleURL:v})),$=n(()=>Z(e.logoUrl));y(()=>{const o=f.portal||{};if(e.name=o.name||"",e.slug=o.slug||"",e.domain=o.custom_domain||"",o.logo){const{logo:{file_url:t,blob_id:u}}=o;e.logoUrl=t,e.avatarBlobId=u}});function H(){e.slug=q(e.name)}function U(){if(l.value.$touch(),l.value.$invalid)return;const o={name:e.name,slug:e.slug,custom_domain:e.domain,blob_id:e.avatarBlobId||null};_("submit",o)}async function G(){e.logoUrl="",e.avatarBlobId="",_("deleteLogo")}async function M(o){try{const{fileUrl:t,blobId:u}=await K(o);t&&(e.logoUrl=t,e.avatarBlobId=u)}catch{O(s("HELP_CENTER.PORTAL.ADD.LOGO.IMAGE_UPLOAD_ERROR"))}}function V({file:o}){J(o,b)?M(o):O(s("PROFILE_SETTINGS.FORM.MESSAGE_SIGNATURE_SECTION.IMAGE_UPLOAD_SIZE_ERROR",{size:b}))}return(o,t)=>{const u=L("woot-avatar-uploader"),T=L("woot-button"),c=L("woot-input");return p(),x(ee,{title:o.$t("HELP_CENTER.PORTAL.ADD.CREATE_FLOW_PAGE.BASIC_SETTINGS_PAGE.TITLE")},{"footer-right":E(()=>[i(T,{"is-loading":d.isSubmitting,"is-disabled":a(l).$invalid,onClick:U},{default:E(()=>[P(A(d.submitButtonText),1)]),_:1},8,["is-loading","is-disabled"])]),default:E(()=>[r("div",null,[r("div",oe,[r("div",te,[i(u,{label:o.$t("HELP_CENTER.PORTAL.ADD.LOGO.LABEL"),src:e.logoUrl,onOnAvatarSelect:V},null,8,["label","src"]),$.value?(p(),k("div",le,[i(T,{type:"button","color-scheme":"alert",variant:"hollow",size:"small",onClick:G},{default:E(()=>[P(A(o.$t("PROFILE_SETTINGS.DELETE_AVATAR")),1)]),_:1})])):F("",!0)]),r("p",ae,A(o.$t("HELP_CENTER.PORTAL.ADD.LOGO.HELP_TEXT")),1)]),r("div",re,[i(c,{modelValue:e.name,"onUpdate:modelValue":[t[0]||(t[0]=m=>e.name=m),H],class:R({error:a(l).name.$error}),error:N.value,label:o.$t("HELP_CENTER.PORTAL.ADD.NAME.LABEL"),placeholder:o.$t("HELP_CENTER.PORTAL.ADD.NAME.PLACEHOLDER"),"help-text":o.$t("HELP_CENTER.PORTAL.ADD.NAME.HELP_TEXT"),onBlur:a(l).name.$touch},null,8,["modelValue","class","error","label","placeholder","help-text","onBlur"])]),r("div",se,[i(c,{modelValue:e.slug,"onUpdate:modelValue":t[1]||(t[1]=m=>e.slug=m),class:R({error:a(l).slug.$error}),error:h.value,label:o.$t("HELP_CENTER.PORTAL.ADD.SLUG.LABEL"),placeholder:o.$t("HELP_CENTER.PORTAL.ADD.SLUG.PLACEHOLDER"),"help-text":S.value,onBlur:a(l).slug.$touch},null,8,["modelValue","class","error","label","placeholder","help-text","onBlur"])]),r("div",ne,[i(c,{modelValue:e.domain,"onUpdate:modelValue":t[2]||(t[2]=m=>e.domain=m),class:R({error:a(l).domain.$error}),label:o.$t("HELP_CENTER.PORTAL.ADD.DOMAIN.LABEL"),placeholder:o.$t("HELP_CENTER.PORTAL.ADD.DOMAIN.PLACEHOLDER"),"help-text":B.value,error:I.value,onBlur:a(l).domain.$touch},null,8,["modelValue","class","label","placeholder","help-text","error","onBlur"])])])]),_:1},8,["title"])}}});export{Te as _};
