import{c as ue,g as le}from"./_commonjsHelpers-BosuxZz1.js";import{r as de}from"./timeHelper-BT38nsET.js";var ie={exports:{}};(function(se,ae){(function(w,x){x(ae)})(ue,function(w){function x(t,n){return n={exports:{}},t(n,n.exports),n.exports}var V=x(function(t,n){(function(s){t.exports=s()})(function(s){var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function c(h,d){var a=h[0],i=h[1],u=h[2],o=h[3];a+=(i&u|~i&o)+d[0]-680876936|0,a=(a<<7|a>>>25)+i|0,o+=(a&i|~a&u)+d[1]-389564586|0,o=(o<<12|o>>>20)+a|0,u+=(o&a|~o&i)+d[2]+606105819|0,u=(u<<17|u>>>15)+o|0,i+=(u&o|~u&a)+d[3]-1044525330|0,i=(i<<22|i>>>10)+u|0,a+=(i&u|~i&o)+d[4]-176418897|0,a=(a<<7|a>>>25)+i|0,o+=(a&i|~a&u)+d[5]+1200080426|0,o=(o<<12|o>>>20)+a|0,u+=(o&a|~o&i)+d[6]-1473231341|0,u=(u<<17|u>>>15)+o|0,i+=(u&o|~u&a)+d[7]-45705983|0,i=(i<<22|i>>>10)+u|0,a+=(i&u|~i&o)+d[8]+1770035416|0,a=(a<<7|a>>>25)+i|0,o+=(a&i|~a&u)+d[9]-1958414417|0,o=(o<<12|o>>>20)+a|0,u+=(o&a|~o&i)+d[10]-42063|0,u=(u<<17|u>>>15)+o|0,i+=(u&o|~u&a)+d[11]-1990404162|0,i=(i<<22|i>>>10)+u|0,a+=(i&u|~i&o)+d[12]+1804603682|0,a=(a<<7|a>>>25)+i|0,o+=(a&i|~a&u)+d[13]-40341101|0,o=(o<<12|o>>>20)+a|0,u+=(o&a|~o&i)+d[14]-1502002290|0,u=(u<<17|u>>>15)+o|0,i+=(u&o|~u&a)+d[15]+1236535329|0,i=(i<<22|i>>>10)+u|0,a+=(i&o|u&~o)+d[1]-165796510|0,a=(a<<5|a>>>27)+i|0,o+=(a&u|i&~u)+d[6]-1069501632|0,o=(o<<9|o>>>23)+a|0,u+=(o&i|a&~i)+d[11]+643717713|0,u=(u<<14|u>>>18)+o|0,i+=(u&a|o&~a)+d[0]-373897302|0,i=(i<<20|i>>>12)+u|0,a+=(i&o|u&~o)+d[5]-701558691|0,a=(a<<5|a>>>27)+i|0,o+=(a&u|i&~u)+d[10]+38016083|0,o=(o<<9|o>>>23)+a|0,u+=(o&i|a&~i)+d[15]-660478335|0,u=(u<<14|u>>>18)+o|0,i+=(u&a|o&~a)+d[4]-405537848|0,i=(i<<20|i>>>12)+u|0,a+=(i&o|u&~o)+d[9]+568446438|0,a=(a<<5|a>>>27)+i|0,o+=(a&u|i&~u)+d[14]-1019803690|0,o=(o<<9|o>>>23)+a|0,u+=(o&i|a&~i)+d[3]-187363961|0,u=(u<<14|u>>>18)+o|0,i+=(u&a|o&~a)+d[8]+1163531501|0,i=(i<<20|i>>>12)+u|0,a+=(i&o|u&~o)+d[13]-1444681467|0,a=(a<<5|a>>>27)+i|0,o+=(a&u|i&~u)+d[2]-51403784|0,o=(o<<9|o>>>23)+a|0,u+=(o&i|a&~i)+d[7]+1735328473|0,u=(u<<14|u>>>18)+o|0,i+=(u&a|o&~a)+d[12]-1926607734|0,i=(i<<20|i>>>12)+u|0,a+=(i^u^o)+d[5]-378558|0,a=(a<<4|a>>>28)+i|0,o+=(a^i^u)+d[8]-2022574463|0,o=(o<<11|o>>>21)+a|0,u+=(o^a^i)+d[11]+1839030562|0,u=(u<<16|u>>>16)+o|0,i+=(u^o^a)+d[14]-35309556|0,i=(i<<23|i>>>9)+u|0,a+=(i^u^o)+d[1]-1530992060|0,a=(a<<4|a>>>28)+i|0,o+=(a^i^u)+d[4]+1272893353|0,o=(o<<11|o>>>21)+a|0,u+=(o^a^i)+d[7]-155497632|0,u=(u<<16|u>>>16)+o|0,i+=(u^o^a)+d[10]-1094730640|0,i=(i<<23|i>>>9)+u|0,a+=(i^u^o)+d[13]+681279174|0,a=(a<<4|a>>>28)+i|0,o+=(a^i^u)+d[0]-358537222|0,o=(o<<11|o>>>21)+a|0,u+=(o^a^i)+d[3]-722521979|0,u=(u<<16|u>>>16)+o|0,i+=(u^o^a)+d[6]+76029189|0,i=(i<<23|i>>>9)+u|0,a+=(i^u^o)+d[9]-640364487|0,a=(a<<4|a>>>28)+i|0,o+=(a^i^u)+d[12]-421815835|0,o=(o<<11|o>>>21)+a|0,u+=(o^a^i)+d[15]+530742520|0,u=(u<<16|u>>>16)+o|0,i+=(u^o^a)+d[2]-995338651|0,i=(i<<23|i>>>9)+u|0,a+=(u^(i|~o))+d[0]-198630844|0,a=(a<<6|a>>>26)+i|0,o+=(i^(a|~u))+d[7]+1126891415|0,o=(o<<10|o>>>22)+a|0,u+=(a^(o|~i))+d[14]-1416354905|0,u=(u<<15|u>>>17)+o|0,i+=(o^(u|~a))+d[5]-57434055|0,i=(i<<21|i>>>11)+u|0,a+=(u^(i|~o))+d[12]+1700485571|0,a=(a<<6|a>>>26)+i|0,o+=(i^(a|~u))+d[3]-1894986606|0,o=(o<<10|o>>>22)+a|0,u+=(a^(o|~i))+d[10]-1051523|0,u=(u<<15|u>>>17)+o|0,i+=(o^(u|~a))+d[1]-2054922799|0,i=(i<<21|i>>>11)+u|0,a+=(u^(i|~o))+d[8]+1873313359|0,a=(a<<6|a>>>26)+i|0,o+=(i^(a|~u))+d[15]-30611744|0,o=(o<<10|o>>>22)+a|0,u+=(a^(o|~i))+d[6]-1560198380|0,u=(u<<15|u>>>17)+o|0,i+=(o^(u|~a))+d[13]+1309151649|0,i=(i<<21|i>>>11)+u|0,a+=(u^(i|~o))+d[4]-145523070|0,a=(a<<6|a>>>26)+i|0,o+=(i^(a|~u))+d[11]-1120210379|0,o=(o<<10|o>>>22)+a|0,u+=(a^(o|~i))+d[2]+718787259|0,u=(u<<15|u>>>17)+o|0,i+=(o^(u|~a))+d[9]-343485551|0,i=(i<<21|i>>>11)+u|0,h[0]=a+h[0]|0,h[1]=i+h[1]|0,h[2]=u+h[2]|0,h[3]=o+h[3]|0}function p(h){var d=[],a;for(a=0;a<64;a+=4)d[a>>2]=h.charCodeAt(a)+(h.charCodeAt(a+1)<<8)+(h.charCodeAt(a+2)<<16)+(h.charCodeAt(a+3)<<24);return d}function m(h){var d=[],a;for(a=0;a<64;a+=4)d[a>>2]=h[a]+(h[a+1]<<8)+(h[a+2]<<16)+(h[a+3]<<24);return d}function v(h){var d=h.length,a=[1732584193,-271733879,-1732584194,271733878],i,u,o,C,P,R;for(i=64;i<=d;i+=64)c(a,p(h.substring(i-64,i)));for(h=h.substring(i-64),u=h.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<u;i+=1)o[i>>2]|=h.charCodeAt(i)<<(i%4<<3);if(o[i>>2]|=128<<(i%4<<3),i>55)for(c(a,o),i=0;i<16;i+=1)o[i]=0;return C=d*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),P=parseInt(C[2],16),R=parseInt(C[1],16)||0,o[14]=P,o[15]=R,c(a,o),a}function E(h){var d=h.length,a=[1732584193,-271733879,-1732584194,271733878],i,u,o,C,P,R;for(i=64;i<=d;i+=64)c(a,m(h.subarray(i-64,i)));for(h=i-64<d?h.subarray(i-64):new Uint8Array(0),u=h.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<u;i+=1)o[i>>2]|=h[i]<<(i%4<<3);if(o[i>>2]|=128<<(i%4<<3),i>55)for(c(a,o),i=0;i<16;i+=1)o[i]=0;return C=d*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),P=parseInt(C[2],16),R=parseInt(C[1],16)||0,o[14]=P,o[15]=R,c(a,o),a}function g(h){var d="",a;for(a=0;a<4;a+=1)d+=f[h>>a*8+4&15]+f[h>>a*8&15];return d}function b(h){var d;for(d=0;d<h.length;d+=1)h[d]=g(h[d]);return h.join("")}b(v("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function h(d,a){return d=d|0||0,d<0?Math.max(d+a,0):Math.min(d,a)}ArrayBuffer.prototype.slice=function(d,a){var i=this.byteLength,u=h(d,i),o=i,C,P,R,oe;return a!==s&&(o=h(a,i)),u>o?new ArrayBuffer(0):(C=o-u,P=new ArrayBuffer(C),R=new Uint8Array(P),oe=new Uint8Array(this,u,C),R.set(oe),P)}}();function D(h){return/[\u0080-\uFFFF]/.test(h)&&(h=unescape(encodeURIComponent(h))),h}function k(h,d){var a=h.length,i=new ArrayBuffer(a),u=new Uint8Array(i),o;for(o=0;o<a;o+=1)u[o]=h.charCodeAt(o);return d?u:i}function A(h){return String.fromCharCode.apply(null,new Uint8Array(h))}function S(h,d,a){var i=new Uint8Array(h.byteLength+d.byteLength);return i.set(new Uint8Array(h)),i.set(new Uint8Array(d),h.byteLength),i}function _(h){var d=[],a=h.length,i;for(i=0;i<a-1;i+=2)d.push(parseInt(h.substr(i,2),16));return String.fromCharCode.apply(String,d)}function y(){this.reset()}return y.prototype.append=function(h){return this.appendBinary(D(h)),this},y.prototype.appendBinary=function(h){this._buff+=h,this._length+=h.length;var d=this._buff.length,a;for(a=64;a<=d;a+=64)c(this._hash,p(this._buff.substring(a-64,a)));return this._buff=this._buff.substring(a-64),this},y.prototype.end=function(h){var d=this._buff,a=d.length,i,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o;for(i=0;i<a;i+=1)u[i>>2]|=d.charCodeAt(i)<<(i%4<<3);return this._finish(u,a),o=b(this._hash),h&&(o=_(o)),this.reset(),o},y.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},y.prototype.setState=function(h){return this._buff=h.buff,this._length=h.length,this._hash=h.hash,this},y.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},y.prototype._finish=function(h,d){var a=d,i,u,o;if(h[a>>2]|=128<<(a%4<<3),a>55)for(c(this._hash,h),a=0;a<16;a+=1)h[a]=0;i=this._length*8,i=i.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(i[2],16),o=parseInt(i[1],16)||0,h[14]=u,h[15]=o,c(this._hash,h)},y.hash=function(h,d){return y.hashBinary(D(h),d)},y.hashBinary=function(h,d){var a=v(h),i=b(a);return d?_(i):i},y.ArrayBuffer=function(){this.reset()},y.ArrayBuffer.prototype.append=function(h){var d=S(this._buff.buffer,h),a=d.length,i;for(this._length+=h.byteLength,i=64;i<=a;i+=64)c(this._hash,m(d.subarray(i-64,i)));return this._buff=i-64<a?new Uint8Array(d.buffer.slice(i-64)):new Uint8Array(0),this},y.ArrayBuffer.prototype.end=function(h){var d=this._buff,a=d.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u,o;for(u=0;u<a;u+=1)i[u>>2]|=d[u]<<(u%4<<3);return this._finish(i,a),o=b(this._hash),h&&(o=_(o)),this.reset(),o},y.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.ArrayBuffer.prototype.getState=function(){var h=y.prototype.getState.call(this);return h.buff=A(h.buff),h},y.ArrayBuffer.prototype.setState=function(h){return h.buff=k(h.buff,!0),y.prototype.setState.call(this,h)},y.ArrayBuffer.prototype.destroy=y.prototype.destroy,y.ArrayBuffer.prototype._finish=y.prototype._finish,y.ArrayBuffer.hash=function(h,d){var a=E(new Uint8Array(h)),i=b(a);return d?_(i):i},y})}),I=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},U=function(){function t(n,s){for(var f=0;f<s.length;f++){var c=s[f];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(n,c.key,c)}}return function(n,s,f){return s&&t(n.prototype,s),f&&t(n,f),n}}(),K=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,L=function(){U(t,null,[{key:"create",value:function(s,f){var c=new t(s);c.create(f)}}]);function t(n){I(this,t),this.file=n,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return U(t,[{key:"create",value:function(s){var f=this;this.callback=s,this.md5Buffer=new V.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(c){return f.fileReaderDidLoad(c)}),this.fileReader.addEventListener("error",function(c){return f.fileReaderDidError(c)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function(s){if(this.md5Buffer.append(s.target.result),!this.readNextChunk()){var f=this.md5Buffer.end(!0),c=btoa(f);this.callback(null,c)}}},{key:"fileReaderDidError",value:function(s){this.callback("Error reading "+this.file.name)}},{key:"readNextChunk",value:function(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){var s=this.chunkIndex*this.chunkSize,f=Math.min(s+this.chunkSize,this.file.size),c=K.call(this.file,s,f);return this.fileReader.readAsArrayBuffer(c),this.chunkIndex++,!0}else return!1}}]),t}();function M(t){var n=H(document.head,'meta[name="'+t+'"]');if(n)return n.getAttribute("content")}function O(t,n){typeof t=="string"&&(n=t,t=document);var s=t.querySelectorAll(n);return N(s)}function H(t,n){return typeof t=="string"&&(n=t,t=document),t.querySelector(n)}function B(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=t.disabled,c=s.bubbles,p=s.cancelable,m=s.detail,v=document.createEvent("Event");v.initEvent(n,c||!0,p||!0),v.detail=m||{};try{t.disabled=!1,t.dispatchEvent(v)}finally{t.disabled=f}return v}function N(t){return Array.isArray(t)?t:Array.from?Array.from(t):[].slice.call(t)}var T=function(){function t(n,s,f){var c=this;I(this,t),this.file=n,this.attributes={filename:n.name,content_type:n.type,byte_size:n.size,checksum:s},this.xhr=new XMLHttpRequest,this.xhr.open("POST",f,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRF-Token",M("csrf-token")),this.xhr.addEventListener("load",function(p){return c.requestDidLoad(p)}),this.xhr.addEventListener("error",function(p){return c.requestDidError(p)})}return U(t,[{key:"create",value:function(s){this.callback=s,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function(s){if(this.status>=200&&this.status<300){var f=this.response,c=f.direct_upload;delete f.direct_upload,this.attributes=f,this.directUploadData=c,this.callback(null,this.toJSON())}else this.requestDidError(s)}},{key:"requestDidError",value:function(s){this.callback('Error creating Blob for "'+this.file.name+'". Status: '+this.status)}},{key:"toJSON",value:function(){var s={};for(var f in this.attributes)s[f]=this.attributes[f];return s}},{key:"status",get:function(){return this.xhr.status}},{key:"response",get:function(){var s=this.xhr,f=s.responseType,c=s.response;return f=="json"?c:JSON.parse(c)}}]),t}(),G=function(){function t(n){var s=this;I(this,t),this.blob=n,this.file=n.file;var f=n.directUploadData,c=f.url,p=f.headers;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",c,!0),this.xhr.responseType="text";for(var m in p)this.xhr.setRequestHeader(m,p[m]);this.xhr.addEventListener("load",function(v){return s.requestDidLoad(v)}),this.xhr.addEventListener("error",function(v){return s.requestDidError(v)})}return U(t,[{key:"create",value:function(s){this.callback=s,this.xhr.send(this.file.slice())}},{key:"requestDidLoad",value:function(s){var f=this.xhr,c=f.status,p=f.response;c>=200&&c<300?this.callback(null,p):this.requestDidError(s)}},{key:"requestDidError",value:function(s){this.callback('Error storing "'+this.file.name+'". Status: '+this.xhr.status)}}]),t}(),Y=0,F=function(){function t(n,s,f){I(this,t),this.id=++Y,this.file=n,this.url=s,this.delegate=f}return U(t,[{key:"create",value:function(s){var f=this;L.create(this.file,function(c,p){if(c){s(c);return}var m=new T(f.file,p,f.url);X(f.delegate,"directUploadWillCreateBlobWithXHR",m.xhr),m.create(function(v){if(v)s(v);else{var E=new G(m);X(f.delegate,"directUploadWillStoreFileWithXHR",E.xhr),E.create(function(g){g?s(g):s(null,m.toJSON())})}})})}}]),t}();function X(t,n){if(t&&typeof t[n]=="function"){for(var s=arguments.length,f=Array(s>2?s-2:0),c=2;c<s;c++)f[c-2]=arguments[c];return t[n].apply(t,f)}}var W=function(){function t(n,s){I(this,t),this.input=n,this.file=s,this.directUpload=new F(this.file,this.url,this),this.dispatch("initialize")}return U(t,[{key:"start",value:function(s){var f=this,c=document.createElement("input");c.type="hidden",c.name=this.input.name,this.input.insertAdjacentElement("beforebegin",c),this.dispatch("start"),this.directUpload.create(function(p,m){p?(c.parentNode.removeChild(c),f.dispatchError(p)):c.value=m.signed_id,f.dispatch("end"),s(p)})}},{key:"uploadRequestDidProgress",value:function(s){var f=s.loaded/s.total*100;f&&this.dispatch("progress",{progress:f})}},{key:"dispatch",value:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f.file=this.file,f.id=this.directUpload.id,B(this.input,"direct-upload:"+s,{detail:f})}},{key:"dispatchError",value:function(s){var f=this.dispatch("error",{error:s});f.defaultPrevented||alert(s)}},{key:"directUploadWillCreateBlobWithXHR",value:function(s){this.dispatch("before-blob-request",{xhr:s})}},{key:"directUploadWillStoreFileWithXHR",value:function(s){var f=this;this.dispatch("before-storage-request",{xhr:s}),s.upload.addEventListener("progress",function(c){return f.uploadRequestDidProgress(c)})}},{key:"url",get:function(){return this.input.getAttribute("data-direct-upload-url")}}]),t}(),Q="input[type=file][data-direct-upload-url]:not([disabled])",Z=function(){function t(n){I(this,t),this.form=n,this.inputs=O(n,Q).filter(function(s){return s.files.length})}return U(t,[{key:"start",value:function(s){var f=this,c=this.createDirectUploadControllers(),p=function m(){var v=c.shift();v?v.start(function(E){E?(s(E),f.dispatch("end")):m()}):(s(),f.dispatch("end"))};this.dispatch("start"),p()}},{key:"createDirectUploadControllers",value:function(){var s=[];return this.inputs.forEach(function(f){N(f.files).forEach(function(c){var p=new W(f,c);s.push(p)})}),s}},{key:"dispatch",value:function(s){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return B(this.form,"direct-uploads:"+s,{detail:f})}}]),t}(),j="data-direct-uploads-processing",q=new WeakMap,z=!1;function $(){z||(z=!0,document.addEventListener("click",ee,!0),document.addEventListener("submit",te),document.addEventListener("ajax:before",re))}function ee(t){var n=t.target;(n.tagName=="INPUT"||n.tagName=="BUTTON")&&n.type=="submit"&&n.form&&q.set(n.form,n)}function te(t){J(t)}function re(t){t.target.tagName=="FORM"&&J(t)}function J(t){var n=t.target;if(n.hasAttribute(j)){t.preventDefault();return}var s=new Z(n),f=s.inputs;f.length&&(t.preventDefault(),n.setAttribute(j,""),f.forEach(l),s.start(function(c){n.removeAttribute(j),c?f.forEach(e):ne(n)}))}function ne(t){var n=q.get(t)||H(t,"input[type=submit], button[type=submit]");if(n){var s=n,f=s.disabled;n.disabled=!1,n.focus(),n.click(),n.disabled=f}else n=document.createElement("input"),n.type="submit",n.style.display="none",t.appendChild(n),n.click(),t.removeChild(n);q.delete(t)}function l(t){t.disabled=!0}function e(t){t.disabled=!1}function r(){window.ActiveStorage&&$()}setTimeout(r,1),w.start=$,w.DirectUpload=F,Object.defineProperty(w,"__esModule",{value:!0})})})(ie,ie.exports);var ve=ie.exports,fe={exports:{}};/*!
 Name: vue-upload-component 
Component URI: https://github.com/lian-yue/vue-upload-component#readme 
Version: 3.1.16 
Author: LianYue 
License: Apache-2.0 
Description: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter 
 */(function(se,ae){(function(w,x){se.exports=x(de)})(ue,function(w){function x(l){return K(l)||U(l)||I(l)||V()}function V(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(l,e){if(l){if(typeof l=="string")return L(l,e);var r=Object.prototype.toString.call(l).slice(8,-1);if(r==="Object"&&l.constructor&&(r=l.constructor.name),r==="Map"||r==="Set")return Array.from(l);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(l,e)}}function U(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function K(l){if(Array.isArray(l))return L(l)}function L(l,e){(e==null||e>l.length)&&(e=l.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=l[r];return t}function M(l,e){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(l,n).enumerable})),r.push.apply(r,t)}return r}function O(l){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M(Object(r),!0).forEach(function(t){H(l,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(r,t))})}return l}function H(l,e,r){return e in l?Object.defineProperty(l,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):l[e]=r,l}function B(l){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(l)}function N(l,e){var r=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(l,n).enumerable})),r.push.apply(r,t)}return r}function T(l){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N(Object(r),!0).forEach(function(t){X(l,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(r,t))})}return l}function G(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Y(l,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function F(l,e,r){return e&&Y(l.prototype,e),Object.defineProperty(l,"prototype",{writable:!1}),l}function X(l,e,r){return e in l?Object.defineProperty(l,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):l[e]=r,l}var W=function(e){var r=new XMLHttpRequest;return r.open(e.method||"GET",e.url),r.responseType="json",e.headers&&Object.keys(e.headers).forEach(function(t){r.setRequestHeader(t,e.headers[t])}),r},Q=function(e,r){return new Promise(function(t,n){e.onload=function(){if(e.status>=200&&e.status<300){var s;try{s=JSON.parse(e.response)}catch{s=e.response}t(s)}else n(e.response)},e.onerror=function(){return n(e.response)},e.send(JSON.stringify(r))})},Z=function(e,r){var t=new FormData;for(var n in r)t.append(n,r[n]);return new Promise(function(s,f){e.onload=function(){if(e.status>=200&&e.status<300){var c;try{c=JSON.parse(e.response)}catch{c=e.response}s(c)}else f(e.response)},e.onerror=function(){return f(e.response)},e.send(t)})};function j(l){var e=W(l);return Q(e,l.body)}var q=function(){function l(e,r){G(this,l),this.file=e,this.options=r,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return F(l,[{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var r=this,t=this.chunksUploaded.length/this.chunks.length*100,n=this.chunksUploading.reduce(function(s,f){return s+(f.progress|0)/r.chunks.length},0);return Math.min(t+n,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter(function(r){return!r.active&&!r.uploaded})}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter(function(r){return!!r.xhr&&!!r.active})}},{key:"chunksUploaded",get:function(){return this.chunks.filter(function(r){return!!r.uploaded})}},{key:"createChunks",value:function(){this.chunks=[];for(var r=0,t=this.chunkSize;r<this.fileSize;)this.chunks.push({blob:this.file.file.slice(r,t),startOffset:r,active:!1,retries:this.maxRetries}),r=t,t=r+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach(function(r){r.xhr.abort(),r.active=!1}),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var r=this;return this.promise=new Promise(function(t,n){r.resolve=t,r.reject=n}),this.start(),this.promise}},{key:"start",value:function(){var r=this;j({method:"POST",headers:T(T({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then(function(t){if(t.status!=="success")return r.file.response=t,r.reject("server");r.sessionId=t.data.session_id,r.chunkSize=t.data.end_offset,r.createChunks(),r.startChunking()}).catch(function(t){r.file.response=t,r.reject("server")})}},{key:"startChunking",value:function(){for(var r=0;r<this.maxActiveChunks;r++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(this.chunksUploading.length===0)return this.finish()}}},{key:"uploadChunk",value:function(r){var t=this;r.progress=0,r.active=!0,this.updateFileProgress(),r.xhr=W({method:"POST",headers:this.headers,url:this.action}),r.xhr.upload.addEventListener("progress",function(n){n.lengthComputable&&(r.progress=Math.round(n.loaded/n.total*100))},!1),Z(r.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:r.startOffset,chunk:r.blob})).then(function(n){if(r.active=!1,n.status==="success")r.uploaded=!0;else if(r.retries--<=0)return t.stopChunks(),t.reject("upload");t.uploadNextChunk()}).catch(function(){if(r.active=!1,r.retries--<=0)return t.stopChunks(),t.reject("upload");t.uploadNextChunk()})}},{key:"finish",value:function(){var r=this;this.updateFileProgress(),this.stopSpeedCalc(),j({method:"POST",headers:T(T({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then(function(t){if(r.file.response=t,t.status!=="success")return r.reject("server");r.resolve(t)}).catch(function(t){r.file.response=t,r.reject("server")})}},{key:"startSpeedCalc",value:function(){var r=this;this.file.speed=0;var t=0;this.speedInterval||(this.speedInterval=window.setInterval(function(){var n=r.progress/100*r.fileSize;r.file.speed=n-t,t=n},1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}}]),l}(),z={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:q},$=w.defineComponent({compatConfig:{MODE:3},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{default:!1},multiple:{type:Boolean,default:!1},maximum:{type:Number},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},createDirectory:{type:Boolean,default:!1},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},timeout:{type:Number,default:0},drop:{type:[Boolean,String,HTMLElement],default:function(){return!1}},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{type:[RegExp,String,Array],default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return z}}},emits:["update:modelValue","input-filter","input-file"],data:function(){return{files:this.modelValue,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,dropElementActive:!1,uploading:0,destroy:!1,maps:{},dropElement:null,dropTimeout:null,reload:!1}},mounted:function(){var e=this,r=document.createElement("input");if(r.type="file",r.multiple=!0,window.FormData&&r.files?((typeof r.webkitdirectory=="boolean"||typeof r.directory=="boolean")&&(this.features.directory=!0),this.features.html5&&typeof r.ondrop<"u"&&this.isRelatedTargetSupported()&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var t=0;t<this.files.length;t++){var n=this.files[t];this.maps[n.id]=n}this.$nextTick(function(){e.$parent?(e.$parent.$forceUpdate(),e.$parent.$nextTick(function(){e.watchDrop(e.drop)})):e.watchDrop(e.drop)})},beforeUnmount:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1),this.watchActive(!1)},computed:{uploaded:function(){for(var e,r=0;r<this.files.length;r++)if(e=this.files[r],e.fileObject&&!e.error&&!e.success)return!1;return!0},chunkOptions:function(){return Object.assign(z,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]},forId:function(){return this.inputId||this.name},iMaximum:function(){return this.maximum===void 0?this.multiple?0:1:this.maximum},iExtensions:function(){if(this.extensions){if(this.extensions instanceof RegExp)return this.extensions;if(this.extensions.length){var e=[];return typeof this.extensions=="string"?e=this.extensions.split(","):e=this.extensions,e=e.map(function(r){return r.trim()}).filter(function(r){return r}),new RegExp("\\.("+e.join("|").replace(/\./g,"\\.")+")$","i")}}},iDirectory:function(){if(this.directory&&this.features.directory)return!0}},watch:{active:function(e){this.watchActive(e)},dropActive:function(e){this.watchDropActive(e),this.$parent&&this.$parent.$forceUpdate()},drop:function(e){this.watchDrop(e)},modelValue:function(e){if(this.files!==e){this.files=e;var r=this.maps;this.maps={};for(var t=0;t<this.files.length;t++){var n=this.files[t];this.maps[n.id]=n}for(var s in this.maps){var f=this.maps[s],c=r[s];f!==c&&this.emitFile(f,c)}for(var p in r)this.maps[p]||this.emitFile(void 0,r[p])}}},methods:{newId:function(){return Math.random().toString(36).substr(2)},clear:function(){if(this.files.length){var e=this.files;this.files=[],this.maps={},this.emitInput();for(var r=0;r<e.length;r++)this.emitFile(void 0,e[r])}return!0},get:function(e){return e?B(e)==="object"?this.maps[e.id||""]||!1:this.maps[e]||!1:!1},add:function(e,r){var t;e instanceof Array?t=e:t=[e],r===void 0&&(r=this.addIndex);for(var n=[],s=0;s<t.length;s++){var f=t[s];this.features.html5&&f instanceof Blob&&(f={id:"",file:f,size:f.size,name:f.webkitRelativePath||f.relativePath||f.name||"unknown",type:f.type}),f=f;var c=!1;if(f.fileObject===!1||(f.fileObject||typeof Element<"u"&&f.el instanceof HTMLInputElement||typeof Blob<"u"&&f.file instanceof Blob)&&(c=!0),c&&(f=O(O({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},f),{},{response:{},progress:"0.00",speed:0}),f.data=O(O({},this.data),f.data?f.data:{}),f.headers=O(O({},this.headers),f.headers?f.headers:{})),f.id||(f.id=this.newId()),!this.emitFilter(f,void 0)&&(this.iMaximum>1&&n.length+this.files.length>=this.iMaximum||(n.push(f),this.iMaximum===1)))break}if(n.length){this.iMaximum===1&&this.clear();var p;if(r===!0||r===0)p=n.concat(this.files);else if(r){var m;p=this.files.concat([]),(m=p).splice.apply(m,[r,0].concat(x(n)))}else p=this.files.concat(n);this.files=p;var v=0;r===!0||r===0?v=0:r?r>=0?r+n.length>this.files.length?v=this.files.length-n.length:v=r:(v=this.files.length-n.length+r,v<0&&(v=0)):v=this.files.length-n.length,n=this.files.slice(v,v+n.length);for(var E=0;E<n.length;E++){var g=n[E];this.maps[g.id]=g}this.emitInput();for(var b=0;b<n.length;b++)this.emitFile(n[b],void 0);return e instanceof Array?n:n[0]}},addInputFile:function(e){var r=this,t=[];this.iMaximum;var n=e.webkitEntries||e.entries||void 0;if(n!=null&&n.length)return this.getFileSystemEntry(n).then(function(p){return r.add(p)});if(e.files)for(var s=0;s<e.files.length;s++){var f=e.files[s];t.push({id:"",size:f.size,name:f.webkitRelativePath||f.relativePath||f.name,type:f.type,file:f})}else{var c=e.value.replace(/\\/g,"/").split("/");(!c||!c.length)&&(c=[e.value]),delete e.__vuex__,t.push({id:"",name:c[c.length-1],el:e})}return Promise.resolve(this.add(t))},addDataTransfer:function(e){var r,t=this;if(e!=null&&(r=e.items)!==null&&r!==void 0&&r.length){for(var n=[],s=0;s<e.items.length;s++){var f=e.items[s],c=void 0;f.getAsEntry?c=f.getAsEntry()||f.getAsFile():f.webkitGetAsEntry?c=f.webkitGetAsEntry()||f.getAsFile():c=f.getAsFile(),c&&n.push(c)}return this.getFileSystemEntry(n).then(function(E){return t.add(E)})}var p=this.iMaximum,m=[];if(e.files.length){for(var v=0;v<e.files.length&&(m.push(e.files[v]),!(p>0&&m.length>=p));v++);return Promise.resolve(this.add(m))}return Promise.resolve([])},getFileSystemEntry:function(e){var r=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(n){var s=r.iMaximum;if(!e){n([]);return}if(e instanceof Array){var f=[],c=function b(D){var k=e[D];if(!k||s>0&&f.length>=s)return n(f);r.getFileSystemEntry(k,t).then(function(A){f.push.apply(f,x(A)),b(D+1)})};c(0);return}if(e instanceof Blob){n([{id:"",size:e.size,name:t+e.name,type:e.type,file:e}]);return}if(e.isFile){var p=e;p.file(function(b){n([{id:"",size:b.size,name:t+b.name,type:b.type,file:b}])});return}if(e.isDirectory&&r.dropDirectory){var m=e,v=[];r.createDirectory&&v.push({id:"",name:t+m.name,size:0,type:"text/directory",file:new File([],t+m.name,{type:"text/directory"})});var E=m.createReader(),g=function b(){E.readEntries(function(D){var k=function A(S){if(!D[S]&&S===0||s>0&&v.length>=s)return n(v);if(!D[S])return b();r.getFileSystemEntry(D[S],t+m.name+"/").then(function(_){v.push.apply(v,x(_)),A(S+1)})};k(0)})};g();return}n([])})},replace:function(e,r){var t=this.get(e),n=this.get(r);if(!t||!n||t===n)return!1;var s=this.files.concat([]),f=s.indexOf(t),c=s.indexOf(n);return f===-1||c===-1?!1:(s[f]=n,s[c]=t,this.files=s,this.emitInput(),!0)},remove:function(e){var r=this.get(e);if(r){if(this.emitFilter(void 0,r))return!1;var t=this.files.concat([]),n=t.indexOf(r);if(n===-1)return console.error("remove",r),!1;t.splice(n,1),this.files=t,delete this.maps[r.id],this.emitInput(),this.emitFile(void 0,r)}return r},update:function(e,r){var t=this.get(e);if(t){var n=O(O({},t),r);if(t.fileObject&&t.active&&!n.active&&!n.error&&!n.success&&(n.error="abort"),this.emitFilter(n,t))return!1;var s=this.files.concat([]),f=s.indexOf(t);return f===-1?(console.error("update",t),!1):(s.splice(f,1,n),this.files=s,n=this.files[f],delete this.maps[t.id],this.maps[n.id]=n,this.emitInput(),this.emitFile(n,t),n)}return!1},emitFilter:function(e,r){var t=!1;return this.$emit("input-filter",e,r,function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t=n,t}),t},emitFile:function(e,r){var t,n=this;this.$emit("input-file",e,r),(t=e)!==null&&t!==void 0&&t.fileObject&&e.active&&(!r||!r.active)?(this.uploading++,this.$nextTick(function(){setTimeout(function(){e&&n.upload(e).then(function(){var s;e&&(e=n.get(e)||void 0),(s=e)!==null&&s!==void 0&&s.fileObject&&n.update(e,{active:!1,success:!e.error})}).catch(function(s){e&&n.update(e,{active:!1,success:!1,error:s.code||s.error||s.message||s})})},Math.ceil(Math.random()*50+50))})):(!e||!e.fileObject||!e.active)&&r&&r.fileObject&&r.active&&this.uploading--,this.active&&(!!e!=!!r||e.active!==r.active)&&this.watchActive(!0)},emitInput:function(){this.$emit("update:modelValue",this.files)},upload:function(e){var r=this.get(e);if(!r)return Promise.reject(new Error("not_exists"));if(!r.fileObject)return Promise.reject(new Error("file_object"));if(r.error)return r.error instanceof Error?Promise.reject(r.error):Promise.reject(new Error(r.error));if(r.success)return Promise.resolve(r);if(r.name&&this.iExtensions&&r.type!=="text/directory"&&r.name.search(this.iExtensions)===-1)return Promise.reject(new Error("extension"));if(this.size>0&&r.size!==void 0&&r.size>=0&&r.size>this.size&&r.type!=="text/directory")return Promise.reject(new Error("size"));if(this.customAction)return this.customAction(r,this);if(this.features.html5){if(this.shouldUseChunkUpload(r))return this.uploadChunk(r);if(r.putAction)return this.uploadPut(r);if(r.postAction)return this.uploadHtml5(r)}return r.postAction?this.uploadHtml4(r):Promise.reject(new Error("No action configured"))},shouldUseChunkUpload:function(e){return this.chunkEnabled&&!!this.chunkOptions.handler&&e.size&&e.size>this.chunkOptions.minSize},uploadChunk:function(e){var r=this.chunkOptions.handler;return e.chunk=new r(e,this.chunkOptions),e.chunk.upload().then(function(t){return e})},uploadPut:function(e){var r=[],t;for(var n in e.data)t=e.data[n],t!=null&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(t));var s=e.putAction||"",f=r.length?(s.indexOf("?")===-1?"?":"&")+r.join("&"):"",c=new XMLHttpRequest;return c.open("PUT",s+f),this.uploadXhr(c,e,e.file)},uploadHtml5:function(e){var r=new window.FormData,t;for(var n in e.data)t=e.data[n],t&&B(t)==="object"&&typeof t.toString!="function"?t instanceof File?r.append(n,t,t.name):r.append(n,JSON.stringify(t)):t!=null&&r.append(n,t);r.append(this.name,e.file,e.name||e.file.name||e.file.filename);var s=new XMLHttpRequest;return s.open("POST",e.postAction||""),this.uploadXhr(s,e,r)},uploadXhr:function(e,r,t){var n=this,s=r,f=0,c=0;e.upload.onprogress=function(m){if(s&&(s=n.get(s),!(!m.lengthComputable||!s||!s.fileObject||!s.active))){var v=Math.round(Date.now()/1e3);v!==f&&(f=v,s=n.update(s,{progress:(m.loaded/m.total*100).toFixed(2),speed:m.loaded-c}),c=m.loaded)}};var p=window.setInterval(function(){if(s&&(s=n.get(s))){var m;if((m=s)!==null&&m!==void 0&&m.fileObject&&!s.success&&!s.error&&s.active)return}p&&(clearInterval(p),p=void 0);try{e.abort(),e.timeout=1}catch{}},100);return new Promise(function(m,v){if(!s){v(new Error("not_exists"));return}var E,g=function(k){if(!E){if(E=!0,p&&(clearInterval(p),p=void 0),!s)return v(new Error("not_exists"));if(s=n.get(s),!s)return v(new Error("not_exists"));if(!s.fileObject)return v(new Error("file_object"));if(s.error)return s.error instanceof Error?v(s.error):v(new Error(s.error));if(!s.active)return v(new Error("abort"));if(s.success)return m(s);var A={};switch(k.type){case"timeout":case"abort":A.error=k.type;break;case"error":e.status?e.status>=500?A.error="server":e.status>=400&&(A.error="denied"):A.error="network";break;default:e.status>=500?A.error="server":e.status>=400?A.error="denied":A.progress="100.00"}if(e.responseText){var S=e.getResponseHeader("Content-Type");S&&S.indexOf("/json")!==-1?A.response=JSON.parse(e.responseText):A.response=e.responseText}return s=n.update(s,A),s?s.error?s.error instanceof Error?v(s.error):v(new Error(s.error)):m(s):v(new Error("abort"))}};e.onload=g,e.onerror=g,e.onabort=g,e.ontimeout=g,s.timeout&&(e.timeout=s.timeout);for(var b in s.headers)e.setRequestHeader(b,s.headers[b]);s=n.update(s,{xhr:e}),s&&e.send(t)})},uploadHtml4:function(e){var r=this,t=e;if(!t)return Promise.reject(new Error("not_exists"));var n=function(g){g.keyCode===27&&g.preventDefault()},s=document.createElement("iframe");s.id="upload-iframe-"+t.id,s.name="upload-iframe-"+t.id,s.src="about:blank",s.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var f=document.createElement("form");f.setAttribute("action",t.postAction||""),f.name="upload-form-"+t.id,f.setAttribute("method","POST"),f.setAttribute("target","upload-iframe-"+t.id),f.setAttribute("enctype","multipart/form-data");for(var c in t.data){var p=t.data[c];if(p&&B(p)==="object"&&typeof p.toString!="function"&&(p=JSON.stringify(p)),p!=null){var m=document.createElement("input");m.type="hidden",m.name=c,m.value=p,f.appendChild(m)}}f.appendChild(t.el),document.body.appendChild(s).appendChild(f);var v=function(){var g,b;try{s.contentWindow&&(b=s.contentWindow.document)}catch{}if(!b)try{b=s.contentDocument?s.contentDocument:s.document}catch{b=s.document}return(g=b)!==null&&g!==void 0&&g.body?b.body.innerHTML:null};return new Promise(function(E,g){setTimeout(function(){if(!t){g(new Error("not_exists"));return}if(t=r.update(t,{iframe:s}),!t)return g(new Error("not_exists"));var b=window.setInterval(function(){t&&(t=r.get(t))&&t.fileObject&&!t.success&&!t.error&&t.active||(b&&(clearInterval(b),b=void 0),s.onabort({type:t?"abort":"not_exists"}))},100),D,k=function(S){var _;if(!D){if(D=!0,b&&(clearInterval(b),b=void 0),document.body.removeEventListener("keydown",n),!t)return g(new Error("not_exists"));if(t=r.get(t),!t)return g(new Error("not_exists"));if(!t.fileObject)return g(new Error("file_object"));if(t.error)return t.error instanceof Error?g(t.error):g(new Error(t.error));if(!t.active)return g(new Error("abort"));if(t.success)return E(t);var y=v(),h={};if(typeof S=="string")return g(new Error(S));switch(S.type){case"abort":h.error="abort";break;case"error":t.error?h.error=t.error:y===null?h.error="network":h.error="denied";break;default:t.error?h.error=t.error:y===null?h.error="network":h.progress="100.00"}if(y!==null){if(y&&y.substr(0,1)==="{"&&y.substr(y.length-1,1)==="}")try{y=JSON.parse(y)}catch{}h.response=y}return t=r.update(t,h),t?(_=t)!==null&&_!==void 0&&_.error?t.error instanceof Error?g(t.error):g(new Error(t.error)):E(t):g(new Error("not_exists"))}};s.onload=k,s.onerror=k,s.onabort=k,document.body.addEventListener("keydown",n),f.submit()},50)}).then(function(E){var g;return s==null||(g=s.parentNode)===null||g===void 0||g.removeChild(s),E}).catch(function(E){var g;return s==null||(g=s.parentNode)===null||g===void 0||g.removeChild(s),E})},watchActive:function(e){for(var r,t=0;r=this.files[t];)if(t++,r.fileObject)if(e&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;!r.active&&!r.error&&!r.success&&this.update(r,{active:!0})}else r.active&&this.update(r,{active:!1});this.uploading===0&&(this.active=!1)},watchDrop:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.features.drop&&e!==r){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDocumentDragenter,!1),document.removeEventListener("dragleave",this.onDocumentDragleave,!1),document.removeEventListener("dragover",this.onDocumentDragover,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragenter",this.onDragenter,!1),this.dropElement.removeEventListener("dragleave",this.onDragleave,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch{}var t=null;if(e)if(typeof e=="string")t=document.querySelector(e)||this.$root.$el.querySelector(e);else if(e===!0){var n;if(t=this.$parent.$el,!t||((n=t)===null||n===void 0?void 0:n.nodeType)===8){var s;t=this.$root.$el,(!t||((s=t)===null||s===void 0?void 0:s.nodeType)===8)&&(t=document.body)}}else t=e;this.dropElement=t,this.dropElement&&(document.addEventListener("dragenter",this.onDocumentDragenter,!1),document.addEventListener("dragleave",this.onDocumentDragleave,!1),document.addEventListener("dragover",this.onDocumentDragover,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragenter",this.onDragenter,!1),this.dropElement.addEventListener("dragleave",this.onDragleave,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},watchDropActive:function(e,r){e!==r&&(!e&&this.dropElementActive&&(this.dropElementActive=!1),this.dropTimeout&&(clearTimeout(this.dropTimeout),this.dropTimeout=null),e&&(this.dropTimeout=setTimeout(this.onDocumentDrop,1e3)))},onDocumentDragenter:function(e){var r,t;if(!this.dropActive&&e.dataTransfer){var n=e.dataTransfer;n!=null&&(r=n.files)!==null&&r!==void 0&&r.length?this.dropActive=!0:n.types?n.types.indexOf&&n.types.indexOf("Files")!==-1?this.dropActive=!0:(t=n.types)!==null&&t!==void 0&&t.contains&&n.types.contains("Files")&&(this.dropActive=!0):this.dropActive=!0,this.dropActive&&this.watchDropActive(!0)}},onDocumentDragleave:function(e){this.dropActive&&(e.target===e.explicitOriginalTarget||!e.fromElement&&(e.clientX<=0||e.clientY<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight))&&(this.dropActive=!1,this.watchDropActive(!1))},onDocumentDragover:function(){this.watchDropActive(!0)},onDocumentDrop:function(){this.dropActive=!1,this.watchDropActive(!1)},onDragenter:function(e){!this.dropActive||this.dropElementActive||(this.dropElementActive=!0)},onDragleave:function(e){var r;if(this.dropElementActive){var t=e.relatedTarget;if(!t)this.dropElementActive=!1;else if((r=this.dropElement)!==null&&r!==void 0&&r.contains)this.dropElement.contains(t)||(this.dropElementActive=!1);else{for(var n=t;n&&n!==this.dropElement;)n=n.parentNode;n!==this.dropElement&&(this.dropElementActive=!1)}}},onDragover:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),e.dataTransfer&&this.addDataTransfer(e.dataTransfer)},inputOnChange:async function(e){var r=this;if(!(e.target instanceof HTMLInputElement))return Promise.reject(new Error("not HTMLInputElement"));e.target;var t=function(s){return r.reload=!0,r.$nextTick(function(){r.reload=!1}),s};return this.addInputFile(e.target).then(t).catch(t)},isRelatedTargetSupported:function(){try{var e=new MouseEvent("mouseout",{relatedTarget:document.body});return"relatedTarget"in e}catch{return!1}}}}),ee=["for"],te=["name","id","accept","capture","disabled","webkitdirectory","allowdirs","directory","multiple"];function re(l,e,r,t,n,s){return w.openBlock(),w.createElementBlock("span",{class:w.normalizeClass(l.className)},[w.renderSlot(l.$slots,"default"),w.createElementVNode("label",{for:l.forId},null,8,ee),l.reload?w.createCommentVNode("",!0):(w.openBlock(),w.createElementBlock("input",{key:0,ref:"input",type:"file",name:l.name,id:l.forId,accept:l.accept,capture:l.capture,disabled:l.disabled,webkitdirectory:l.iDirectory,allowdirs:l.iDirectory,directory:l.iDirectory,multiple:l.multiple&&l.features.html5,onChange:e[0]||(e[0]=function(){return l.inputOnChange&&l.inputOnChange.apply(l,arguments)})},null,40,te))],2)}function J(l,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",r==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=l:n.appendChild(document.createTextNode(l))}}var ne=`
.file-uploads {
  overflow: hidden;
  position: relative;
  text-align: center;
  display: inline-block;
}
.file-uploads.file-uploads-html4 input,
.file-uploads.file-uploads-html5 label {
  /* background fix ie  click */
  background: #fff;
  opacity: 0;
  font-size: 20em;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  position: absolute;
  width: 100%;
  height: 100%;
}
.file-uploads.file-uploads-html5 input,
.file-uploads.file-uploads-html4 label {
  /* background fix ie  click */
  position: absolute;
  background: rgba(255, 255, 255, 0);
  overflow: hidden;
  position: fixed;
  width: 1px;
  height: 1px;
  z-index: -1;
  opacity: 0;
}
`;return J(ne),$.render=re,$})})(fe);var he=fe.exports;const me=le(he);export{me as F,ve as a};
