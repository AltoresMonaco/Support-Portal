const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auto-track-CTC7cVJa.js","assets/globalConfig-DaGjiImb.js","assets/_plugin-vue_export-helper-CvYNw_mv.js","assets/_commonjsHelpers-BosuxZz1.js","assets/index-D57euRS3.js","assets/helpers-DWHPOMuB.js","assets/index-DopHWMLi.js","assets/index-Cfv48Le7.js","assets/is-plan-event-enabled-DS1Agtkw.js","assets/index-HE1ng938.js","assets/index-CV0nWpGR.js","assets/index-Caznll5u.js"])))=>i.map(i=>d[i]);
import{_ as B}from"./globalConfig-DaGjiImb.js";import{g as lr,c as F}from"./_commonjsHelpers-BosuxZz1.js";var Je=function(e,t){return Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Je(e,t)};function L(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Je(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _=function(){return _=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},_.apply(this,arguments)};function fr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Ui(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function A(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function u(y){try{p(n.next(y))}catch(b){a(b)}}function d(y){try{p(n.throw(y))}catch(b){a(b)}}function p(y){y.done?o(y.value):i(y.value).then(u,d)}p((n=n.apply(e,t||[])).next())})}function O(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(p){return function(y){return d([p,y])}}function d(p){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,p[0]&&(r=0)),r;)try{if(n=1,i&&(o=p[0]&2?i.return:p[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,p[1])).done)return o;switch(i=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,i=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){r.label=p[1];break}if(p[0]===6&&r.label<o[1]){r.label=o[1],o=p;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(p);break}o[2]&&r.ops.pop(),r.trys.pop();continue}p=t.call(e,r)}catch(y){p=[6,y],i=0}finally{n=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function T(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Z(e){return typeof e=="string"}function Ge(e){return typeof e=="number"}function ue(e){return typeof e=="function"}function K(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==="object"}function dr(e){var t,r,n,i=(n=(r=(t=e.userId)!==null&&t!==void 0?t:e.anonymousId)!==null&&r!==void 0?r:e.groupId)!==null&&n!==void 0?n:e.previousId;return Z(i)}var ve=function(e){L(t,e);function t(r,n){var i=e.call(this,n)||this;return i.field=r,i}return t}(Error);function ne(e){var t,r=e&&e.event&&e.event.type,n=e.event;if(n===void 0)throw new ve("event","Event is missing");if(!Z(r))throw new ve("event","Event is not a string");if(r==="track"&&!Z(n.event))throw new ve("event","Event is not a string");var i=(t=n.properties)!==null&&t!==void 0?t:n.traits;if(r!=="alias"&&!K(i))throw new ve("properties","properties is not an object");if(!dr(n))throw new ve("userId","Missing userId or anonymousId");return e}var pr={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:ne,identify:ne,page:ne,alias:ne,group:ne,screen:ne};function hr(e,t,r,n){var i,o=[e,t,r,n],a=K(e)?e.event:e;if(!a||!Z(a))throw new Error("Event missing");var u=K(e)?(i=e.properties)!==null&&i!==void 0?i:{}:K(t)?t:{},d={};ue(r)||(d=r??{}),K(e)&&!ue(t)&&(d=t??{});var p=o.find(ue);return[a,u,d,p]}function Pt(e,t,r,n,i){var o,a,u=null,d=null,p=[e,t,r,n,i],y=p.filter(Z);y[0]!==void 0&&y[1]!==void 0&&(u=y[0],d=y[1]),y.length===1&&(u=null,d=y[0]);var b=p.find(ue),m=p.filter(function(I){return d===null?K(I):K(I)||I===null}),g=(o=m[0])!==null&&o!==void 0?o:{},w=(a=m[1])!==null&&a!==void 0?a:{};return[u,d,g,w,b]}var xt=function(e){return function(){for(var t,r,n,i,o,a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var d=null;d=(n=(t=a.find(Z))!==null&&t!==void 0?t:(r=a.find(Ge))===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:e.id();var p=a.filter(function(g){return d===null?K(g):K(g)||g===null}),y=(i=p[0])!==null&&i!==void 0?i:{},b=(o=p[1])!==null&&o!==void 0?o:{},m=a.find(ue);return[d,y,b,m]}};function vr(e,t,r,n){Ge(e)&&(e=e.toString()),Ge(t)&&(t=t.toString());var i=[e,t,r,n],o=i.filter(Z),a=o[0],u=a===void 0?e:a,d=o[1],p=d===void 0?null:d,y=i.filter(K)[0],b=y===void 0?{}:y,m=i.find(ue);return[u,p,b,m]}function rt(){return typeof window<"u"}function $i(){return!rt()}function yr(){return rt()?window.navigator.onLine:!0}function je(){return!yr()}var nt=function(){function e(){this.callbacks={}}return e.prototype.on=function(t,r){return this.callbacks[t]?this.callbacks[t].push(r):this.callbacks[t]=[r],this},e.prototype.once=function(t,r){var n=this,i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];n.off(t,i),r.apply(n,o)};return this.on(t,i),this},e.prototype.off=function(t,r){var n,i=(n=this.callbacks[t])!==null&&n!==void 0?n:[],o=i.filter(function(a){return a!==r});return this.callbacks[t]=o,this},e.prototype.emit=function(t){for(var r=this,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(n=this.callbacks[t])!==null&&n!==void 0?n:[];return a.forEach(function(u){u.apply(r,i)}),this},e}();function Qe(e,t,r){t.split&&(t=t.split("."));for(var n=0,i=t.length,o=e,a,u;n<i&&(u=""+t[n++],!(u==="__proto__"||u==="constructor"||u==="prototype"));)o=o[u]=n===i?r:typeof(a=o[u])==typeof t?a:t[n]*0!==0||~(""+t[n]).indexOf(".")?{}:[]}function gr(e,t){return new Promise(function(r,n){var i=setTimeout(function(){n(Error("Promise timed out"))},t);e.then(function(o){return clearTimeout(i),r(o)}).catch(n)})}function mr(e){return new Promise(function(t){return setTimeout(t,e)})}function br(e,t,r){var n=function(){try{return Promise.resolve(t(e))}catch(i){return Promise.reject(i)}};return mr(r).then(function(){return gr(n(),1e3)}).catch(function(i){e==null||e.log("warn","Callback Error",{error:i}),e==null||e.stats.increment("callback_error")}).then(function(){return e})}function _r(e){var t=Math.random()+1,r=e.minTimeout,n=r===void 0?500:r,i=e.factor,o=i===void 0?2:i,a=e.attempt,u=e.maxTimeout,d=u===void 0?1/0:u;return Math.min(t*n*Math.pow(o,a),d)}var Bt="onRemoveFromFuture",it=function(e){L(t,e);function t(r,n,i){var o=e.call(this)||this;return o.future=[],o.maxAttempts=r,o.queue=n,o.seen=i??{},o}return t.prototype.push=function(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n.map(function(a){var u=r.updateAttempts(a);return u>r.maxAttempts||r.includes(a)?!1:(r.queue.push(a),!0)});return this.queue=this.queue.sort(function(a,u){return r.getAttempts(a)-r.getAttempts(u)}),o},t.prototype.pushWithBackoff=function(r){var n=this;if(this.getAttempts(r)===0)return this.push(r)[0];var i=this.updateAttempts(r);if(i>this.maxAttempts||this.includes(r))return!1;var o=_r({attempt:i-1});return setTimeout(function(){n.queue.push(r),n.future=n.future.filter(function(a){return a.id!==r.id}),n.emit(Bt)},o),this.future.push(r),!0},t.prototype.getAttempts=function(r){var n;return(n=this.seen[r.id])!==null&&n!==void 0?n:0},t.prototype.updateAttempts=function(r){return this.seen[r.id]=this.getAttempts(r)+1,this.getAttempts(r)},t.prototype.includes=function(r){return this.queue.includes(r)||this.future.includes(r)||!!this.queue.find(function(n){return n.id===r.id})||!!this.future.find(function(n){return n.id===r.id})},t.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),t}(nt),X=256,Pe=[],Ae;for(;X--;)Pe[X]=(X+256).toString(16).substring(1);function ot(){var e=0,t,r="";if(!Ae||X+16>256){for(Ae=Array(e=256);e--;)Ae[e]=256*Math.random()|0;e=X=0}for(;e<16;e++)t=Ae[X+e],e==6?r+=Pe[t&15|64]:e==8?r+=Pe[t&63|128]:r+=Pe[t],e&1&&e>1&&e<11&&(r+="-");return X++,r}var wr=function(){function e(){this._logs=[]}return e.prototype.log=function(t,r,n){var i=new Date;this._logs.push({level:t,message:r,time:i,extras:n})},Object.defineProperty(e.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),e.prototype.flush=function(){if(this.logs.length>1){var t=this._logs.reduce(function(r,n){var i,o,a,u=_(_({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete u.time;var d=(a=(o=n.time)===null||o===void 0?void 0:o.toISOString())!==null&&a!==void 0?a:"";return r[d]&&(d="".concat(d,"-").concat(Math.random())),_(_({},r),(i={},i[d]=u,i))},{});console.table?console.table(t):console.log(t)}else this.logs.forEach(function(r){var n=r.level,i=r.message,o=r.extras;n==="info"||n==="debug"?console.log(i,o??""):console[n](i,o??"")});this._logs=[]},e}(),Sr=function(e){var t={gauge:"g",counter:"c"};return t[e]},Ut=function(){function e(){this.metrics=[]}return e.prototype.increment=function(t,r,n){r===void 0&&(r=1),this.metrics.push({metric:t,value:r,tags:n??[],type:"counter",timestamp:Date.now()})},e.prototype.gauge=function(t,r,n){this.metrics.push({metric:t,value:r,tags:n??[],type:"gauge",timestamp:Date.now()})},e.prototype.flush=function(){var t=this.metrics.map(function(r){return _(_({},r),{tags:r.tags.join(",")})});console.table?console.table(t):console.log(t),this.metrics=[]},e.prototype.serialize=function(){return this.metrics.map(function(t){return{m:t.metric,v:t.value,t:t.tags,k:Sr(t.type),e:t.timestamp}})},e}(),Ir=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.gauge=function(){},t.prototype.increment=function(){},t.prototype.flush=function(){},t.prototype.serialize=function(){return[]},t}(Ut),le=function(){function e(t){var r,n,i;this.retry=(r=t.retry)!==null&&r!==void 0?r:!0,this.type=(n=t.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=t.reason)!==null&&i!==void 0?i:""}return e}(),De=function(){function e(t,r,n,i){r===void 0&&(r=ot()),n===void 0&&(n=new Ir),i===void 0&&(i=new wr),this.attempts=0,this.event=t,this._id=r,this.logger=i,this.stats=n}return e.system=function(){},e.prototype.isSame=function(t){return t.id===this.id},e.prototype.cancel=function(t){throw t||new le({reason:"Context Cancel"})},e.prototype.log=function(t,r,n){this.logger.log(t,r,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.updateEvent=function(t,r){var n;if(t.split(".")[0]==="integrations"){var i=t.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return Qe(this.event,t,r),this.event},e.prototype.failedDelivery=function(){return this._failedDelivery},e.prototype.setFailedDelivery=function(t){this._failedDelivery=t},e.prototype.logs=function(){return this.logger.logs},e.prototype.flush=function(){this.logger.flush(),this.stats.flush()},e.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},e}();function Ar(e,t){var r={};return e.forEach(function(n){var i,o=void 0;{var a=n[t];o=typeof a!="string"?JSON.stringify(a):a}o!==void 0&&(r[o]=T(T([],(i=r[o])!==null&&i!==void 0?i:[],!0),[n],!1))}),r}var Or=function(e){return typeof e=="object"&&e!==null&&"then"in e&&typeof e.then=="function"},Er=function(){var e,t,r=0;return{done:function(){return e},run:function(n){var i=n();return Or(i)&&(++r===1&&(e=new Promise(function(o){return t=o})),i.finally(function(){return--r===0&&t()})),i}}};function Pr(e){return A(this,void 0,void 0,function(){var t;return O(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e()];case 1:return[2,r.sent()];case 2:return t=r.sent(),[2,Promise.reject(t)];case 3:return[2]}})})}function me(e,t){e.log("debug","plugin",{plugin:t.name});var r=new Date().getTime(),n=t[e.event.type];if(n===void 0)return Promise.resolve(e);var i=Pr(function(){return n.apply(t,[e])}).then(function(o){var a=new Date().getTime()-r;return o.stats.gauge("plugin_time",a,["plugin:".concat(t.name)]),o}).catch(function(o){if(o instanceof le&&o.type==="middleware_cancellation")throw o;return o instanceof le?(e.log("warn",o.type,{plugin:t.name,error:o}),o):(e.log("error","plugin Error",{plugin:t.name,error:o}),e.stats.increment("plugin_error",1,["plugin:".concat(t.name)]),o)});return i}function xr(e,t){return me(e,t).then(function(r){if(r instanceof De)return r;e.log("debug","Context canceled"),e.stats.increment("context_canceled"),e.cancel(r)})}function jr(){return typeof window<"u"}function Dr(){return jr()?window.navigator.onLine:!0}function Mr(){return!Dr()}var Fr=function(e){L(t,e);function t(r){var n=e.call(this)||this;return n.criticalTasks=Er(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=r,n.queue.on(Bt,function(){n.scheduleFlush(0)}),n}return t.prototype.register=function(r,n,i){return A(this,void 0,void 0,function(){var o=this;return O(this,function(a){switch(a.label){case 0:return[4,Promise.resolve(n.load(r,i)).then(function(){o.plugins.push(n)}).catch(function(u){if(n.type==="destination"){o.failedInitializations.push(n.name),console.warn(n.name,u),r.log("warn","Failed to load destination",{plugin:n.name,error:u});return}throw u})];case 1:return a.sent(),[2]}})})},t.prototype.deregister=function(r,n,i){return A(this,void 0,void 0,function(){var o;return O(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(r,i))]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.plugins=this.plugins.filter(function(u){return u.name!==n.name}),[3,4];case 3:return o=a.sent(),r.log("warn","Failed to unload destination",{plugin:n.name,error:o}),[3,4];case 4:return[2]}})})},t.prototype.dispatch=function(r){return A(this,void 0,void 0,function(){var n;return O(this,function(i){return r.log("debug","Dispatching"),r.stats.increment("message_dispatched"),this.queue.push(r),n=this.subscribeToDelivery(r),this.scheduleFlush(0),[2,n]})})},t.prototype.subscribeToDelivery=function(r){return A(this,void 0,void 0,function(){var n=this;return O(this,function(i){return[2,new Promise(function(o){var a=function(u,d){u.isSame(r)&&(n.off("flush",a),o(u))};n.on("flush",a)})]})})},t.prototype.dispatchSingle=function(r){return A(this,void 0,void 0,function(){var n=this;return O(this,function(i){return r.log("debug","Dispatching"),r.stats.increment("message_dispatched"),this.queue.updateAttempts(r),r.attempts=1,[2,this.deliver(r).catch(function(o){var a=n.enqueuRetry(o,r);return a?n.subscribeToDelivery(r):(r.setFailedDelivery({reason:o}),r)})]})})},t.prototype.isEmpty=function(){return this.queue.length===0},t.prototype.scheduleFlush=function(r){var n=this;r===void 0&&(r=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},r))},t.prototype.deliver=function(r){return A(this,void 0,void 0,function(){var n,i,o,a;return O(this,function(u){switch(u.label){case 0:return[4,this.criticalTasks.done()];case 1:u.sent(),n=Date.now(),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.flushOne(r)];case 3:return r=u.sent(),i=Date.now()-n,this.emit("delivery_success",r),r.stats.gauge("delivered",i),r.log("debug","Delivered",r.event),[2,r];case 4:throw o=u.sent(),a=o,r.log("error","Failed to deliver",a),this.emit("delivery_failure",r,a),r.stats.increment("delivery_failed"),o;case 5:return[2]}})})},t.prototype.enqueuRetry=function(r,n){var i=!(r instanceof le)||r.retry;return i?this.queue.pushWithBackoff(n):!1},t.prototype.flush=function(){return A(this,void 0,void 0,function(){var r,n,i;return O(this,function(o){switch(o.label){case 0:if(this.queue.length===0||Mr())return[2,[]];if(r=this.queue.pop(),!r)return[2,[]];r.attempts=this.queue.getAttempts(r),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(r)];case 2:return r=o.sent(),this.emit("flush",r,!0),[3,4];case 3:return n=o.sent(),i=this.enqueuRetry(n,r),i||(r.setFailedDelivery({reason:n}),this.emit("flush",r,!1)),[2,[]];case 4:return[2,[r]]}})})},t.prototype.isReady=function(){return!0},t.prototype.availableExtensions=function(r){var n=this.plugins.filter(function(g){var w,I,S;if(g.type!=="destination"&&g.name!=="Segment.io")return!0;var v=void 0;return(w=g.alternativeNames)===null||w===void 0||w.forEach(function(h){r[h]!==void 0&&(v=r[h])}),(S=(I=r[g.name])!==null&&I!==void 0?I:v)!==null&&S!==void 0?S:(g.name==="Segment.io"?!0:r.All)!==!1}),i=Ar(n,"type"),o=i.before,a=o===void 0?[]:o,u=i.enrichment,d=u===void 0?[]:u,p=i.destination,y=p===void 0?[]:p,b=i.after,m=b===void 0?[]:b;return{before:a,enrichment:d,destinations:y,after:m}},t.prototype.flushOne=function(r){var n,i;return A(this,void 0,void 0,function(){var o,a,u,d,p,y,w,b,m,g,w,I,S,v,h;return O(this,function(s){switch(s.label){case 0:if(!this.isReady())throw new Error("Not ready");r.attempts>1&&this.emit("delivery_retry",r),o=this.availableExtensions((n=r.event.integrations)!==null&&n!==void 0?n:{}),a=o.before,u=o.enrichment,d=0,p=a,s.label=1;case 1:return d<p.length?(y=p[d],[4,xr(r,y)]):[3,4];case 2:w=s.sent(),w instanceof De&&(r=w),this.emit("message_enriched",r,y),s.label=3;case 3:return d++,[3,1];case 4:b=0,m=u,s.label=5;case 5:return b<m.length?(g=m[b],[4,me(r,g)]):[3,8];case 6:w=s.sent(),w instanceof De&&(r=w),this.emit("message_enriched",r,g),s.label=7;case 7:return b++,[3,5];case 8:return I=this.availableExtensions((i=r.event.integrations)!==null&&i!==void 0?i:{}),S=I.destinations,v=I.after,[4,new Promise(function(c,f){setTimeout(function(){var l=S.map(function(P){return me(r,P)});Promise.all(l).then(c).catch(f)},0)})];case 9:return s.sent(),r.stats.increment("message_delivered"),this.emit("message_delivered",r),h=v.map(function(c){return me(r,c)}),[4,Promise.all(h)];case 10:return s.sent(),[2,r]}})})},t}(nt),Cr=function(e,t){var r=Date.now()-e;return Math.max((t??300)-r,0)};function Tr(e,t,r,n){return A(this,void 0,void 0,function(){var i,o;return O(this,function(a){switch(a.label){case 0:return r.emit("dispatch_start",e),i=Date.now(),t.isEmpty()?[4,t.dispatchSingle(e)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,t.dispatch(e)];case 3:o=a.sent(),a.label=4;case 4:return n!=null&&n.callback?[4,br(o,n.callback,Cr(i,n.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return n!=null&&n.debug&&o.flush(),[2,o]}})})}function kr(e,t){return t=t||{},new Promise(function(r,n){var i=new XMLHttpRequest,o=[],a=[],u={},d=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:d,headers:{keys:function(){return o},entries:function(){return a},get:function(y){return u[y.toLowerCase()]},has:function(y){return y.toLowerCase()in u}}}};for(var p in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(y,b,m){o.push(b=b.toLowerCase()),a.push([b,m]),u[b]=u[b]?u[b]+","+m:m}),r(d())},i.onerror=n,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(p,t.headers[p]);i.send(t.body||null)})}var at=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},ut=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=at();return(r&&r.fetch||kr).apply(void 0,e)},_e="2.0.0";/*! js-cookie v3.0.1 | MIT */function Oe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var Lr={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function We(e,t){function r(i,o,a){if(!(typeof document>"u")){a=Oe({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var d in a)a[d]&&(u+="; "+d,a[d]!==!0&&(u+="="+a[d].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+u}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},u=0;u<o.length;u++){var d=o[u].split("="),p=d.slice(1).join("=");try{var y=decodeURIComponent(d[0]);if(a[y]=e.read(p,y),i===y)break}catch{}}return i?a[i]:a}}return Object.create({set:r,get:n,remove:function(i,o){r(i,"",Oe({},o,{expires:-1}))},withAttributes:function(i){return We(this.converter,Oe({},this.attributes,i))},withConverter:function(i){return We(Oe({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var R=We(Lr,{path:"/"});function Nr(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return e}}function Rr(e){var t=e.hostname,r=t.split("."),n=r[r.length-1],i=[];if(r.length===4&&parseInt(n,10)>0||r.length<=1)return i;for(var o=r.length-2;o>=0;--o)i.push(r.slice(o).join("."));return i}function Br(e){try{return new URL(e)}catch{return}}function $t(e){var t=Br(e);if(t)for(var r=Rr(t),n=0;n<r.length;++n){var i="__tld__",o=r[n],a={domain:"."+o};try{if(R.set(i,"1",a),R.get(i))return R.remove(i,a),o}catch{return}}}function st(e){for(var t=e.constructor.prototype,r=0,n=Object.getOwnPropertyNames(t);r<n.length;r++){var i=n[r];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);o&&typeof o.value=="function"&&(e[i]=e[i].bind(e))}}return e}var ie={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},ct=function(){function e(){this.cache={}}return e.prototype.get=function(t){return this.cache[t]},e.prototype.set=function(t,r){this.cache[t]=r},e.prototype.remove=function(t){delete this.cache[t]},Object.defineProperty(e.prototype,"type",{get:function(){return"memory"},enumerable:!1,configurable:!0}),e}(),Ur=365,jt=function(e){L(t,e);function t(r){r===void 0&&(r=t.defaults);var n=e.call(this)||this;return n.options=_(_({},t.defaults),r),n}return t.available=function(){var r=window.navigator.cookieEnabled;return r||(R.set("ajs:cookies","test"),r=document.cookie.includes("ajs:cookies"),R.remove("ajs:cookies")),r},Object.defineProperty(t,"defaults",{get:function(){return{maxage:Ur,domain:$t(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(r){try{var n=R.get(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}}catch{return null}},t.prototype.set=function(r,n){typeof n=="string"?R.set(r,n,this.opts()):n===null?R.remove(r,this.opts()):R.set(r,JSON.stringify(n),this.opts())},t.prototype.remove=function(r){return R.remove(r,this.opts())},Object.defineProperty(t.prototype,"type",{get:function(){return"cookie"},enumerable:!1,configurable:!0}),t}(ct),Ue=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},Dt=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.available=function(){var r="test";try{return localStorage.setItem(r,r),localStorage.removeItem(r),!0}catch{return!1}},t.prototype.get=function(r){try{var n=localStorage.getItem(r);if(n===null)return null;try{return JSON.parse(n)}catch{return n}}catch{return Ue(r,"unavailable"),null}},t.prototype.set=function(r,n){try{localStorage.setItem(r,JSON.stringify(n))}catch{Ue(r,"full")}},t.prototype.remove=function(r){try{return localStorage.removeItem(r)}catch{Ue(r,"unavailable")}},Object.defineProperty(t.prototype,"type",{get:function(){return"localStorage"},enumerable:!1,configurable:!0}),t}(ct),be=function(){function e(t,r){this.storageOptions=r,this.enabledStores=t}return e.prototype.getStores=function(t){var r=this,n=[];return this.enabledStores.filter(function(i){return!t||(t==null?void 0:t.includes(i))}).forEach(function(i){var o=r.storageOptions[i];o!==void 0&&n.push(o)}),n},e.prototype.getAndSync=function(t,r){var n=this.get(t,r),i=typeof n=="number"?n.toString():n;return this.set(t,i,r),i},e.prototype.get=function(t,r){for(var n=null,i=0,o=this.getStores(r);i<o.length;i++){var a=o[i];if(n=a.get(t),n)return n}return null},e.prototype.set=function(t,r,n){for(var i=0,o=this.getStores(n);i<o.length;i++){var a=o[i];a.set(t,r)}},e.prototype.clear=function(t,r){for(var n=0,i=this.getStores(r);n<i.length;n++){var o=i[n];o.remove(t)}},e}();function lt(e){return{cookie:jt.available()?new jt(e):void 0,localStorage:Dt.available()?new Dt:void 0,memory:new ct}}var qt=function(){function e(t,r){t===void 0&&(t=ie);var n=this,i,o,a,u;this.options={},this.id=function(g){if(n.options.disable)return null;var w=n.identityStore.getAndSync(n.idKey);if(g!==void 0){n.identityStore.set(n.idKey,g);var I=g!==w&&w!==null&&g!==null;I&&n.anonymousId(null)}var S=n.identityStore.getAndSync(n.idKey);if(S)return S;var v=n.legacyUserStore.get(ie.cookie.oldKey);return v?typeof v=="object"?v.id:v:null},this.anonymousId=function(g){var w,I;if(n.options.disable)return null;if(g===void 0){var S=(w=n.identityStore.getAndSync(n.anonKey))!==null&&w!==void 0?w:(I=n.legacySIO())===null||I===void 0?void 0:I[0];if(S)return S}return g===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,g??ot()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(g){var w;if(!n.options.disable)return g===null&&(g={}),g&&n.traitsStore.set(n.traitsKey,g??{}),(w=n.traitsStore.get(n.traitsKey))!==null&&w!==void 0?w:{}},this.options=t,this.cookieOptions=r,this.idKey=(o=(i=t.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:ie.cookie.key,this.traitsKey=(u=(a=t.localStorage)===null||a===void 0?void 0:a.key)!==null&&u!==void 0?u:ie.localStorage.key,this.anonKey="ajs_anonymous_id";var d=t.disable===!0,p=t.persist!==!1,y=d?[]:p?["localStorage","cookie","memory"]:["memory"],b=lt(r);t.localStorageFallbackDisabled&&(y=y.filter(function(g){return g!=="localStorage"})),this.identityStore=new be(y,b),this.legacyUserStore=new be(y.filter(function(g){return g!=="localStorage"&&g!=="memory"}),b),this.traitsStore=new be(y.filter(function(g){return g!=="cookie"}),b);var m=this.legacyUserStore.get(ie.cookie.oldKey);m&&typeof m=="object"&&(m.id&&this.id(m.id),m.traits&&this.traits(m.traits)),st(this)}return e.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var r=t.split("----"),n=r[0],i=r[1];return[n,i]},e.prototype.identify=function(t,r){if(!this.options.disable){r=r??{};var n=this.id();(n===null||n===t)&&(r=_(_({},this.traits()),r)),t&&this.id(t),this.traits(r)}},e.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},e.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},e.prototype.load=function(){return new e(this.options,this.cookieOptions)},e.prototype.save=function(){return!0},e.defaults=ie,e}(),$r={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},qr=function(e){L(t,e);function t(r,n){r===void 0&&(r=$r);var i=e.call(this,r,n)||this;return i.anonymousId=function(o){},st(i),i}return t}(qt),ye;function zr(){if(ye)return ye;var e=$t(window.location.href);return ye={expires:31536e6,secure:!1,path:"/"},e&&(ye.domain=e),ye}var Kr="npm";function Vr(){return Kr}function Jr(){var e=R.get("_ga");if(e&&e.startsWith("amp"))return e}function Gr(e){return e.startsWith("?")&&(e=e.substring(1)),e=e.replace(/\?/g,"&"),e.split("&").reduce(function(t,r){var n=r.split("="),i=n[0],o=n[1],a=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var u=i.substr(4);u==="campaign"&&(u="name"),t[u]=Nr(a)}return t},{})}function Qr(e){var t={btid:"dataxu",urid:"millennial-media"};e.startsWith("?")&&(e=e.substring(1)),e=e.replace(/\?/g,"&");for(var r=e.split("&"),n=0,i=r;n<i.length;n++){var o=i[n],a=o.split("="),u=a[0],d=a[1];if(t[u])return{id:d,type:t[u]}}}function Wr(e,t,r){var n=new be(r?[]:["cookie"],lt(zr())),i=n.get("s:context.referrer"),o=Qr(e);o=o??i,o&&(t&&(t.referrer=_(_({},t.referrer),o)),n.set("s:context.referrer",o))}function Hr(e,t,r,n){var i,o,a,u,d=e.user(),p=window.location.search;t.context=(o=(i=t.context)!==null&&i!==void 0?i:t.options)!==null&&o!==void 0?o:{};var y=t.context;delete t.options,t.writeKey=r==null?void 0:r.apiKey,y.userAgent=window.navigator.userAgent;var b=navigator.userLanguage||navigator.language;if(typeof y.locale>"u"&&typeof b<"u"&&(y.locale=b),!y.library){var m=Vr();m==="web"?y.library={name:"analytics.js",version:"next-".concat(_e)}:y.library={name:"analytics.js",version:"npm:next-".concat(_e)}}p&&!y.campaign&&(y.campaign=Gr(p)),Wr(p,y,(a=e.options.disableClientPersistence)!==null&&a!==void 0?a:!1),t.userId=t.userId||d.id(),t.anonymousId=t.anonymousId||d.anonymousId(),t.sentAt=new Date;var g=e.queue.failedInitializations||[];g.length>0&&(t._metadata={failedInitializations:g});var w=[],I=[];for(var S in n){var v=n[S];S==="june.so"&&w.push(S),v.bundlingStatus==="bundled"&&w.push(S),v.bundlingStatus==="unbundled"&&I.push(S)}for(var h=0,s=(r==null?void 0:r.unbundledIntegrations)||[];h<s.length;h++){var c=s[h];I.includes(c)||I.push(c)}var f=(u=r==null?void 0:r.maybeBundledConfigIds)!==null&&u!==void 0?u:{},l=[];w.sort().forEach(function(x){var M;((M=f[x])!==null&&M!==void 0?M:[]).forEach(function(q){l.push(q)})}),(r==null?void 0:r.addBundledMetadata)!==!1&&(t._metadata=_(_({},t._metadata),{bundled:w.sort(),unbundled:I.sort(),bundledIds:l}));var P=Jr();return P&&(y.amp={id:P}),t}var Xr=function(e,t,r){var n=t.reduce(function(i,o){var a=o.split(":"),u=a[0],d=a[1];return i[u]=d,i},{});return{type:"Counter",metric:e,value:1,tags:_(_({},n),{library:"analytics.js",library_version:"npm:next-".concat(_e)})}};function $e(e){console.error("Error sending segment performance metrics",e)}var Yr=function(){function e(t){var r=this,n,i,o,a;if(this.host=(n=t==null?void 0:t.host)!==null&&n!==void 0?n:"api.june.so/sdk",this.sampleRate=(i=t==null?void 0:t.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=t==null?void 0:t.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(a=t==null?void 0:t.maxQueueSize)!==null&&a!==void 0?a:20,this.queue=[],this.sampleRate>0){var u=!1,d=function(){u||(u=!0,r.flush().catch($e),u=!1,setTimeout(d,r.flushTimer))};d()}}return e.prototype.increment=function(t,r){if(t.includes("analytics_js.")&&r.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=Xr(t,r);this.queue.push(n),t.includes("error")&&this.flush().catch($e)}},e.prototype.flush=function(){return A(this,void 0,void 0,function(){var t=this;return O(this,function(r){switch(r.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){$e(n),t.sampleRate=0})];case 1:return r.sent(),[2]}})})},e.prototype.send=function(){return A(this,void 0,void 0,function(){var t,r,n;return O(this,function(i){return t={series:this.queue},this.queue=[],r={"Content-Type":"text/plain"},n="https://".concat(this.host,"/m"),[2,ut(n,{headers:r,body:JSON.stringify(t),method:"POST"})]})})},e}(),Ee,zt=function(e){L(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.initRemoteMetrics=function(r){Ee=new Yr(r)},t.prototype.increment=function(r,n,i){e.prototype.increment.call(this,r,n,i),Ee==null||Ee.increment(r,i??[])},t}(Ut),se=function(e){L(t,e);function t(r,n){return e.call(this,r,n,new zt)||this}return t.system=function(){return new this({type:"track",event:"system"})},t}(De),Kt={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(r){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(v,h){var s=v[0],c=v[1],f=v[2],l=v[3];s+=(c&f|~c&l)+h[0]-680876936|0,s=(s<<7|s>>>25)+c|0,l+=(s&c|~s&f)+h[1]-389564586|0,l=(l<<12|l>>>20)+s|0,f+=(l&s|~l&c)+h[2]+606105819|0,f=(f<<17|f>>>15)+l|0,c+=(f&l|~f&s)+h[3]-1044525330|0,c=(c<<22|c>>>10)+f|0,s+=(c&f|~c&l)+h[4]-176418897|0,s=(s<<7|s>>>25)+c|0,l+=(s&c|~s&f)+h[5]+1200080426|0,l=(l<<12|l>>>20)+s|0,f+=(l&s|~l&c)+h[6]-1473231341|0,f=(f<<17|f>>>15)+l|0,c+=(f&l|~f&s)+h[7]-45705983|0,c=(c<<22|c>>>10)+f|0,s+=(c&f|~c&l)+h[8]+1770035416|0,s=(s<<7|s>>>25)+c|0,l+=(s&c|~s&f)+h[9]-1958414417|0,l=(l<<12|l>>>20)+s|0,f+=(l&s|~l&c)+h[10]-42063|0,f=(f<<17|f>>>15)+l|0,c+=(f&l|~f&s)+h[11]-1990404162|0,c=(c<<22|c>>>10)+f|0,s+=(c&f|~c&l)+h[12]+1804603682|0,s=(s<<7|s>>>25)+c|0,l+=(s&c|~s&f)+h[13]-40341101|0,l=(l<<12|l>>>20)+s|0,f+=(l&s|~l&c)+h[14]-1502002290|0,f=(f<<17|f>>>15)+l|0,c+=(f&l|~f&s)+h[15]+1236535329|0,c=(c<<22|c>>>10)+f|0,s+=(c&l|f&~l)+h[1]-165796510|0,s=(s<<5|s>>>27)+c|0,l+=(s&f|c&~f)+h[6]-1069501632|0,l=(l<<9|l>>>23)+s|0,f+=(l&c|s&~c)+h[11]+643717713|0,f=(f<<14|f>>>18)+l|0,c+=(f&s|l&~s)+h[0]-373897302|0,c=(c<<20|c>>>12)+f|0,s+=(c&l|f&~l)+h[5]-701558691|0,s=(s<<5|s>>>27)+c|0,l+=(s&f|c&~f)+h[10]+38016083|0,l=(l<<9|l>>>23)+s|0,f+=(l&c|s&~c)+h[15]-660478335|0,f=(f<<14|f>>>18)+l|0,c+=(f&s|l&~s)+h[4]-405537848|0,c=(c<<20|c>>>12)+f|0,s+=(c&l|f&~l)+h[9]+568446438|0,s=(s<<5|s>>>27)+c|0,l+=(s&f|c&~f)+h[14]-1019803690|0,l=(l<<9|l>>>23)+s|0,f+=(l&c|s&~c)+h[3]-187363961|0,f=(f<<14|f>>>18)+l|0,c+=(f&s|l&~s)+h[8]+1163531501|0,c=(c<<20|c>>>12)+f|0,s+=(c&l|f&~l)+h[13]-1444681467|0,s=(s<<5|s>>>27)+c|0,l+=(s&f|c&~f)+h[2]-51403784|0,l=(l<<9|l>>>23)+s|0,f+=(l&c|s&~c)+h[7]+1735328473|0,f=(f<<14|f>>>18)+l|0,c+=(f&s|l&~s)+h[12]-1926607734|0,c=(c<<20|c>>>12)+f|0,s+=(c^f^l)+h[5]-378558|0,s=(s<<4|s>>>28)+c|0,l+=(s^c^f)+h[8]-2022574463|0,l=(l<<11|l>>>21)+s|0,f+=(l^s^c)+h[11]+1839030562|0,f=(f<<16|f>>>16)+l|0,c+=(f^l^s)+h[14]-35309556|0,c=(c<<23|c>>>9)+f|0,s+=(c^f^l)+h[1]-1530992060|0,s=(s<<4|s>>>28)+c|0,l+=(s^c^f)+h[4]+1272893353|0,l=(l<<11|l>>>21)+s|0,f+=(l^s^c)+h[7]-155497632|0,f=(f<<16|f>>>16)+l|0,c+=(f^l^s)+h[10]-1094730640|0,c=(c<<23|c>>>9)+f|0,s+=(c^f^l)+h[13]+681279174|0,s=(s<<4|s>>>28)+c|0,l+=(s^c^f)+h[0]-358537222|0,l=(l<<11|l>>>21)+s|0,f+=(l^s^c)+h[3]-722521979|0,f=(f<<16|f>>>16)+l|0,c+=(f^l^s)+h[6]+76029189|0,c=(c<<23|c>>>9)+f|0,s+=(c^f^l)+h[9]-640364487|0,s=(s<<4|s>>>28)+c|0,l+=(s^c^f)+h[12]-421815835|0,l=(l<<11|l>>>21)+s|0,f+=(l^s^c)+h[15]+530742520|0,f=(f<<16|f>>>16)+l|0,c+=(f^l^s)+h[2]-995338651|0,c=(c<<23|c>>>9)+f|0,s+=(f^(c|~l))+h[0]-198630844|0,s=(s<<6|s>>>26)+c|0,l+=(c^(s|~f))+h[7]+1126891415|0,l=(l<<10|l>>>22)+s|0,f+=(s^(l|~c))+h[14]-1416354905|0,f=(f<<15|f>>>17)+l|0,c+=(l^(f|~s))+h[5]-57434055|0,c=(c<<21|c>>>11)+f|0,s+=(f^(c|~l))+h[12]+1700485571|0,s=(s<<6|s>>>26)+c|0,l+=(c^(s|~f))+h[3]-1894986606|0,l=(l<<10|l>>>22)+s|0,f+=(s^(l|~c))+h[10]-1051523|0,f=(f<<15|f>>>17)+l|0,c+=(l^(f|~s))+h[1]-2054922799|0,c=(c<<21|c>>>11)+f|0,s+=(f^(c|~l))+h[8]+1873313359|0,s=(s<<6|s>>>26)+c|0,l+=(c^(s|~f))+h[15]-30611744|0,l=(l<<10|l>>>22)+s|0,f+=(s^(l|~c))+h[6]-1560198380|0,f=(f<<15|f>>>17)+l|0,c+=(l^(f|~s))+h[13]+1309151649|0,c=(c<<21|c>>>11)+f|0,s+=(f^(c|~l))+h[4]-145523070|0,s=(s<<6|s>>>26)+c|0,l+=(c^(s|~f))+h[11]-1120210379|0,l=(l<<10|l>>>22)+s|0,f+=(s^(l|~c))+h[2]+718787259|0,f=(f<<15|f>>>17)+l|0,c+=(l^(f|~s))+h[9]-343485551|0,c=(c<<21|c>>>11)+f|0,v[0]=s+v[0]|0,v[1]=c+v[1]|0,v[2]=f+v[2]|0,v[3]=l+v[3]|0}function o(v){var h=[],s;for(s=0;s<64;s+=4)h[s>>2]=v.charCodeAt(s)+(v.charCodeAt(s+1)<<8)+(v.charCodeAt(s+2)<<16)+(v.charCodeAt(s+3)<<24);return h}function a(v){var h=[],s;for(s=0;s<64;s+=4)h[s>>2]=v[s]+(v[s+1]<<8)+(v[s+2]<<16)+(v[s+3]<<24);return h}function u(v){var h=v.length,s=[1732584193,-271733879,-1732584194,271733878],c,f,l,P,x,M;for(c=64;c<=h;c+=64)i(s,o(v.substring(c-64,c)));for(v=v.substring(c-64),f=v.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;c<f;c+=1)l[c>>2]|=v.charCodeAt(c)<<(c%4<<3);if(l[c>>2]|=128<<(c%4<<3),c>55)for(i(s,l),c=0;c<16;c+=1)l[c]=0;return P=h*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),x=parseInt(P[2],16),M=parseInt(P[1],16)||0,l[14]=x,l[15]=M,i(s,l),s}function d(v){var h=v.length,s=[1732584193,-271733879,-1732584194,271733878],c,f,l,P,x,M;for(c=64;c<=h;c+=64)i(s,a(v.subarray(c-64,c)));for(v=c-64<h?v.subarray(c-64):new Uint8Array(0),f=v.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;c<f;c+=1)l[c>>2]|=v[c]<<(c%4<<3);if(l[c>>2]|=128<<(c%4<<3),c>55)for(i(s,l),c=0;c<16;c+=1)l[c]=0;return P=h*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),x=parseInt(P[2],16),M=parseInt(P[1],16)||0,l[14]=x,l[15]=M,i(s,l),s}function p(v){var h="",s;for(s=0;s<4;s+=1)h+=n[v>>s*8+4&15]+n[v>>s*8&15];return h}function y(v){var h;for(h=0;h<v.length;h+=1)v[h]=p(v[h]);return v.join("")}y(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function v(h,s){return h=h|0||0,h<0?Math.max(h+s,0):Math.min(h,s)}ArrayBuffer.prototype.slice=function(h,s){var c=this.byteLength,f=v(h,c),l=c,P,x,M,q;return s!==r&&(l=v(s,c)),f>l?new ArrayBuffer(0):(P=l-f,x=new ArrayBuffer(P),M=new Uint8Array(x),q=new Uint8Array(this,f,P),M.set(q),x)}}();function b(v){return/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v))),v}function m(v,h){var s=v.length,c=new ArrayBuffer(s),f=new Uint8Array(c),l;for(l=0;l<s;l+=1)f[l]=v.charCodeAt(l);return h?f:c}function g(v){return String.fromCharCode.apply(null,new Uint8Array(v))}function w(v,h,s){var c=new Uint8Array(v.byteLength+h.byteLength);return c.set(new Uint8Array(v)),c.set(new Uint8Array(h),v.byteLength),c}function I(v){var h=[],s=v.length,c;for(c=0;c<s-1;c+=2)h.push(parseInt(v.substr(c,2),16));return String.fromCharCode.apply(String,h)}function S(){this.reset()}return S.prototype.append=function(v){return this.appendBinary(b(v)),this},S.prototype.appendBinary=function(v){this._buff+=v,this._length+=v.length;var h=this._buff.length,s;for(s=64;s<=h;s+=64)i(this._hash,o(this._buff.substring(s-64,s)));return this._buff=this._buff.substring(s-64),this},S.prototype.end=function(v){var h=this._buff,s=h.length,c,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l;for(c=0;c<s;c+=1)f[c>>2]|=h.charCodeAt(c)<<(c%4<<3);return this._finish(f,s),l=y(this._hash),v&&(l=I(l)),this.reset(),l},S.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},S.prototype.setState=function(v){return this._buff=v.buff,this._length=v.length,this._hash=v.hash,this},S.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},S.prototype._finish=function(v,h){var s=h,c,f,l;if(v[s>>2]|=128<<(s%4<<3),s>55)for(i(this._hash,v),s=0;s<16;s+=1)v[s]=0;c=this._length*8,c=c.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(c[2],16),l=parseInt(c[1],16)||0,v[14]=f,v[15]=l,i(this._hash,v)},S.hash=function(v,h){return S.hashBinary(b(v),h)},S.hashBinary=function(v,h){var s=u(v),c=y(s);return h?I(c):c},S.ArrayBuffer=function(){this.reset()},S.ArrayBuffer.prototype.append=function(v){var h=w(this._buff.buffer,v),s=h.length,c;for(this._length+=v.byteLength,c=64;c<=s;c+=64)i(this._hash,a(h.subarray(c-64,c)));return this._buff=c-64<s?new Uint8Array(h.buffer.slice(c-64)):new Uint8Array(0),this},S.ArrayBuffer.prototype.end=function(v){var h=this._buff,s=h.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f,l;for(f=0;f<s;f+=1)c[f>>2]|=h[f]<<(f%4<<3);return this._finish(c,s),l=y(this._hash),v&&(l=I(l)),this.reset(),l},S.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},S.ArrayBuffer.prototype.getState=function(){var v=S.prototype.getState.call(this);return v.buff=g(v.buff),v},S.ArrayBuffer.prototype.setState=function(v){return v.buff=m(v.buff,!0),S.prototype.setState.call(this,v)},S.ArrayBuffer.prototype.destroy=S.prototype.destroy,S.ArrayBuffer.prototype._finish=S.prototype._finish,S.ArrayBuffer.hash=function(v,h){var s=d(new Uint8Array(v)),c=y(s);return h?I(c):c},S})})(Kt);var Zr=Kt.exports;const en=lr(Zr);var tn=function(){function e(t){this.user=t}return e.prototype.track=function(t,r,n,i){return this.normalize(_(_({},this.baseEvent()),{event:t,type:"track",properties:r,options:_({},n),integrations:_({},i)}))},e.prototype.page=function(t,r,n,i,o){var a,u={type:"page",properties:_({},n),options:_({},i),integrations:_({},o)};return t!==null&&(u.category=t,u.properties=(a=u.properties)!==null&&a!==void 0?a:{},u.properties.category=t),r!==null&&(u.name=r),this.normalize(_(_({},this.baseEvent()),u))},e.prototype.screen=function(t,r,n,i,o){var a={type:"screen",properties:_({},n),options:_({},i),integrations:_({},o)};return t!==null&&(a.category=t),r!==null&&(a.name=r),this.normalize(_(_({},this.baseEvent()),a))},e.prototype.identify=function(t,r,n,i){return this.normalize(_(_({},this.baseEvent()),{type:"identify",userId:t,traits:r,options:_({},n),integrations:_({},i)}))},e.prototype.group=function(t,r,n,i){return this.normalize(_(_({},this.baseEvent()),{type:"group",traits:r,options:_({},n),integrations:_({},i),groupId:t}))},e.prototype.alias=function(t,r,n,i){var o={userId:t,type:"alias",options:_({},n),integrations:_({},i)};return r!==null&&(o.previousId=r),t===void 0?this.normalize(_(_({},o),this.baseEvent())):this.normalize(_(_({},this.baseEvent()),o))},e.prototype.baseEvent=function(){var t={integrations:{},options:{}},r=this.user;return r.id()&&(t.userId=r.id()),r.anonymousId()&&(t.anonymousId=r.anonymousId()),t},e.prototype.context=function(t){var r,n,i,o=["integrations","anonymousId","timestamp","userId"],a=(r=t.options)!==null&&r!==void 0?r:{};delete a.integrations;var u=Object.keys(a),d=(i=(n=t.options)===null||n===void 0?void 0:n.context)!==null&&i!==void 0?i:{},p={};return u.forEach(function(y){y!=="context"&&(o.includes(y)?Qe(p,y,a[y]):Qe(d,y,a[y]))}),[d,p]},e.prototype.normalize=function(t){var r,n,i;!((r=t.options)===null||r===void 0)&&r.anonymousId&&this.user.anonymousId(t.options.anonymousId);var o=Object.keys((n=t.integrations)!==null&&n!==void 0?n:{}).reduce(function(w,I){var S,v;return _(_({},w),(S={},S[I]=!!(!((v=t.integrations)===null||v===void 0)&&v[I]),S))},{}),a=_(_({},o),(i=t.options)===null||i===void 0?void 0:i.integrations),u=this.context(t),d=u[0],p=u[1];t.options;var y=fr(t,["options"]),b=_(_(_({timestamp:new Date},y),{context:d,integrations:a}),p),m="ajs-next-"+en.hash(JSON.stringify(b)+ot()),g=_(_({},b),{messageId:m});return g},e}(),V={getItem:function(){},setItem:function(){},removeItem:function(){}};try{V=rt()&&window.localStorage?window.localStorage:V}catch(e){console.warn("Unable to access localStorage",e)}function Vt(e){var t=V.getItem(e);return(t?JSON.parse(t):[]).map(function(r){return new se(r.event,r.id)})}function rn(e,t){var r=Vt(e),n=T(T([],t,!0),r,!0),i=n.reduce(function(o,a){var u;return _(_({},o),(u={},u[a.id]=a,u))},{});V.setItem(e,JSON.stringify(Object.values(i)))}function Jt(e){var t=V.getItem(e);return t?JSON.parse(t):{}}function nn(e,t){var r=Jt(e);V.setItem(e,JSON.stringify(_(_({},r),t)))}function Mt(e){V.removeItem(e)}var on=function(){return new Date().getTime()};function He(e,t,r){r===void 0&&(r=0);var n=50,i="persisted-queue:v1:".concat(e,":lock"),o=function(p){return new Date().getTime()>p},a=V.getItem(i),u=a?JSON.parse(a):null,d=u===null||o(u);if(d){V.setItem(i,JSON.stringify(on()+n)),t(),V.removeItem(i);return}!d&&r<3?setTimeout(function(){He(e,t,r+1)},n):console.error("Unable to retrieve lock")}var ft=function(e){L(t,e);function t(r,n){var i=e.call(this,r,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),u=[],d={};return He(n,function(){try{u=Vt(o),d=Jt(a),Mt(o),Mt(a),i.queue=T(T([],u,!0),i.queue,!0),i.seen=_(_({},d),i.seen)}catch(p){console.error(p)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var p=T(T([],i.queue,!0),i.future,!0);try{He(n,function(){rn(o,p),nn(a,i.seen)})}catch(y){console.error(y)}}}),i}return t}(it),an=function(e){L(t,e);function t(r){return e.call(this,r??new ft(4,"event-queue"))||this}return t}(Fr),W="This is being deprecated and will be not be available in future releases of Analytics JS",qe=at(),ze=qe==null?void 0:qe.analytics;function un(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=e?4:1,n=t?new it(r,[]):new ft(r,"event-queue");return new an(n)}function z(){console.warn(W)}var sn=function(e){L(t,e);function t(r,n,i,o,a){var u=this,d,p,y;u=e.call(this)||this,u._debug=!1,u.initialized=!1,u.user=function(){return u._user},u.init=u.initialize.bind(u),u.log=z,u.addIntegrationMiddleware=z,u.listeners=z,u.addEventListener=z,u.removeAllListeners=z,u.removeListener=z,u.removeEventListener=z,u.hasListeners=z,u.add=z,u.addIntegration=z;var b=n==null?void 0:n.cookie,m=(d=n==null?void 0:n.disableClientPersistence)!==null&&d!==void 0?d:!1;return u.settings=r,u.settings.timeout=(p=u.settings.timeout)!==null&&p!==void 0?p:300,u.queue=i??un(n==null?void 0:n.retryQueue,m),u._universalStorage=new be(m?["memory"]:["localStorage","cookie","memory"],lt(b)),u._user=o??new qt(m?_(_({},n==null?void 0:n.user),{persist:!1}):n==null?void 0:n.user,b).load(),u._group=a??new qr(m?_(_({},n==null?void 0:n.group),{persist:!1}):n==null?void 0:n.group,b).load(),u.eventFactory=new tn(u._user),u.integrations=(y=n==null?void 0:n.integrations)!==null&&y!==void 0?y:{},u.options=n??{},st(u),u}return Object.defineProperty(t.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),t.prototype.track=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,u,d,p,y=this;return O(this,function(b){return i=hr.apply(void 0,r),o=i[0],a=i[1],u=i[2],d=i[3],p=this.eventFactory.track(o,a,u,this.integrations),[2,this._dispatch(p,d).then(function(m){return y.emit("track",o,m.event.properties,m.event.options),m})]})})},t.prototype.page=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,u,d,p,y,b=this;return O(this,function(m){return i=Pt.apply(void 0,r),o=i[0],a=i[1],u=i[2],d=i[3],p=i[4],y=this.eventFactory.page(o,a,u,d,this.integrations),[2,this._dispatch(y,p).then(function(g){return b.emit("page",o,a,g.event.properties,g.event.options),g})]})})},t.prototype.identify=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,u,d,p,y=this;return O(this,function(b){return i=xt(this._user).apply(void 0,r),o=i[0],a=i[1],u=i[2],d=i[3],this._user.identify(o,a),p=this.eventFactory.identify(this._user.id(),this._user.traits(),u,this.integrations),[2,this._dispatch(p,d).then(function(m){return y.emit("identify",m.event.userId,m.event.traits,m.event.options),m})]})})},t.prototype.group=function(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(n.length===0)return this._group;var o=xt(this._group).apply(void 0,n),a=o[0],u=o[1],d=o[2],p=o[3];this._group.identify(a,u);var y=this._group.id(),b=this._group.traits(),m=this.eventFactory.group(y,b,d,this.integrations);return this._dispatch(m,p).then(function(g){return r.emit("group",g.event.groupId,g.event.traits,g.event.options),g})},t.prototype.alias=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,u,d,p,y=this;return O(this,function(b){return i=vr.apply(void 0,r),o=i[0],a=i[1],u=i[2],d=i[3],p=this.eventFactory.alias(o,a,u,this.integrations),[2,this._dispatch(p,d).then(function(m){return y.emit("alias",o,a,m.event.options),m})]})})},t.prototype.screen=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a,u,d,p,y,b=this;return O(this,function(m){return i=Pt.apply(void 0,r),o=i[0],a=i[1],u=i[2],d=i[3],p=i[4],y=this.eventFactory.screen(o,a,u,d,this.integrations),[2,this._dispatch(y,p).then(function(g){return b.emit("screen",o,a,g.event.properties,g.event.options),g})]})})},t.prototype.trackClick=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o;return O(this,function(a){switch(a.label){case 0:return[4,B(()=>import("./auto-track-CTC7cVJa.js"),__vite__mapDeps([0,1,2,3]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,T([this],r,!1))]}})})},t.prototype.trackLink=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o;return O(this,function(a){switch(a.label){case 0:return[4,B(()=>import("./auto-track-CTC7cVJa.js"),__vite__mapDeps([0,1,2,3]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,T([this],r,!1))]}})})},t.prototype.trackSubmit=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o;return O(this,function(a){switch(a.label){case 0:return[4,B(()=>import("./auto-track-CTC7cVJa.js"),__vite__mapDeps([0,1,2,3]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,T([this],r,!1))]}})})},t.prototype.trackForm=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o;return O(this,function(a){switch(a.label){case 0:return[4,B(()=>import("./auto-track-CTC7cVJa.js"),__vite__mapDeps([0,1,2,3]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,T([this],r,!1))]}})})},t.prototype.register=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a=this;return O(this,function(u){switch(u.label){case 0:return i=se.system(),o=r.map(function(d){return a.queue.register(i,d,a)}),[4,Promise.all(o)];case 1:return u.sent(),[2,i]}})})},t.prototype.deregister=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return A(this,void 0,void 0,function(){var i,o,a=this;return O(this,function(u){switch(u.label){case 0:return i=se.system(),o=r.map(function(d){var p=a.queue.plugins.find(function(y){return y.name===d});if(p)return a.queue.deregister(i,p,a);i.log("warn","plugin ".concat(d," not found"))}),[4,Promise.all(o)];case 1:return u.sent(),[2,i]}})})},t.prototype.debug=function(r){return r===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=r,this},t.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},t.prototype.timeout=function(r){this.settings.timeout=r},t.prototype._dispatch=function(r,n){return A(this,void 0,void 0,function(){var i;return O(this,function(o){return i=new se(r),je()&&!this.options.retryQueue?[2,i]:[2,Tr(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},t.prototype.addSourceMiddleware=function(r){return A(this,void 0,void 0,function(){var n=this;return O(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return A(n,void 0,void 0,function(){var o,a,u;return O(this,function(d){switch(d.label){case 0:return[4,B(()=>Promise.resolve().then(()=>ni),void 0)];case 1:return o=d.sent().sourceMiddlewarePlugin,a={},this.queue.plugins.forEach(function(p){if(p.type==="destination")return a[p.name]=!0}),u=o(r,a),[4,this.register(u)];case 2:return d.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},t.prototype.addDestinationMiddleware=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.queue.plugins.filter(function(a){return a.name.toLowerCase()===r.toLowerCase()});return o.forEach(function(a){a.addMiddleware.apply(a,n)}),Promise.resolve(this)},t.prototype.setAnonymousId=function(r){return this._user.anonymousId(r)},t.prototype.queryString=function(r){return A(this,void 0,void 0,function(){var n;return O(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,B(()=>import("./index-D57euRS3.js"),__vite__mapDeps([4,5,1,2,3]))];case 1:return n=i.sent().queryString,[2,n(this,r)]}})})},t.prototype.use=function(r){return r(this),this},t.prototype.ready=function(r){return r===void 0&&(r=function(n){return n}),A(this,void 0,void 0,function(){return O(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return r(i),i})]})})},t.prototype.noConflict=function(){return console.warn(W),window.analytics=ze??this,this},t.prototype.normalize=function(r){return console.warn(W),this.eventFactory.normalize(r)},Object.defineProperty(t.prototype,"failedInitializations",{get:function(){return console.warn(W),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VERSION",{get:function(){return _e},enumerable:!1,configurable:!0}),t.prototype.initialize=function(r,n){return A(this,void 0,void 0,function(){return O(this,function(i){return console.warn(W),[2,Promise.resolve(this)]})})},t.prototype.pageview=function(r){return A(this,void 0,void 0,function(){return O(this,function(n){switch(n.label){case 0:return console.warn(W),[4,this.page({path:r})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(t.prototype,"plugins",{get:function(){var r;return console.warn(W),(r=this._plugins)!==null&&r!==void 0?r:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Integrations",{get:function(){console.warn(W);var r=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),a=window[o];if(!a)return n;var u=a.Integration;return u?(n[i.name]=u,n):(n[i.name]=a,n)},{});return r},enumerable:!1,configurable:!0}),t.prototype.push=function(r){var n=this,i=r.shift();i&&!n[i]||n[i].apply(this,r)},t}(nt),Ft={};function Gt(){return typeof process>"u"||!Ft?{}:Ft}var cn=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,ln=function(){var e,t=Array.prototype.slice.call(document.querySelectorAll("script"));return t.forEach(function(r){var n,i=(n=r.getAttribute("src"))!==null&&n!==void 0?n:"",o=cn.exec(i);o&&o[1]&&(e=o[1])}),e},xe,fn=function(){var e,t=xe??((e=window.analytics)===null||e===void 0?void 0:e._cdn);return t},dn=function(e){window.analytics&&(window.analytics._cdn=e),xe=e},dt=function(){var e=fn();if(e)return e;var t=ln();return t||"https://cdn.june.so"},qi=function(){var e=dt();return"".concat(e,"/next-integrations")};function pn(e,t){var r,n=Object.entries((r=t.integrations)!==null&&r!==void 0?r:{}).reduce(function(i,o){var a,u,d=o[0],p=o[1];return typeof p=="object"?_(_({},i),(a={},a[d]=p,a)):_(_({},i),(u={},u[d]={},u))},{});return Object.entries(e.integrations).reduce(function(i,o){var a,u=o[0],d=o[1];return _(_({},i),(a={},a[u]=_(_({},d),n[u]),a))},{})}var hn=function(){var e,t,r=new Promise(function(n,i){e=n,t=i});return{resolve:e,reject:t,promise:r}};function Qt(){var e=document.getElementsByTagName("link"),t="";return Array.prototype.slice.call(e).forEach(function(r){r.getAttribute("rel")==="canonical"&&(t=r.getAttribute("href"))}),t}function vn(){var e=Qt();if(!e)return window.location.pathname;var t=document.createElement("a");t.href=e;var r=t.pathname.startsWith("/")?t.pathname:"/"+t.pathname;return r}function yn(e){e===void 0&&(e="");var t=Qt();if(t)return t.includes("?")?t:"".concat(t).concat(e);var r=window.location.href,n=r.indexOf("#");return n===-1?r:r.slice(0,n)}function Wt(){return{path:vn(),referrer:document.referrer,search:location.search,title:document.title,url:yn(location.search)}}function ge(e){var t,r=e.event;r.context=r.context||{};var n=Wt(),i=(t=r.properties)!==null&&t!==void 0?t:{};return Object.keys(n).forEach(function(o){i[o]&&(n[o]=i[o])}),r.context.page&&(n=Object.assign({},n,r.context.page)),r.context=Object.assign({},r.context,{page:n}),e.event=r,e}var gn={name:"Page Enrichment",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},type:"before",page:function(e){return e.event.properties=Object.assign({},Wt(),e.event.properties),e.event.name&&(e.event.properties.name=e.event.name),ge(e)},alias:ge,track:ge,identify:ge,group:ge};function Ht(e){var t=Array.prototype.slice.call(window.document.querySelectorAll("script"));return t.find(function(r){return r.src===e})}function Ke(e,t){var r=Ht(e);if(r!==void 0){var n=r==null?void 0:r.getAttribute("status");if(n==="loaded")return Promise.resolve(r);if(n==="loading")return new Promise(function(i,o){r.addEventListener("load",function(){return i(r)}),r.addEventListener("error",function(a){return o(a)})})}return new Promise(function(i,o){var a,u=window.document.createElement("script");u.type="text/javascript",u.src=e,u.async=!0,u.setAttribute("status","loading");for(var d=0,p=Object.entries({});d<p.length;d++){var y=p[d],b=y[0],m=y[1];u.setAttribute(b,m)}u.onload=function(){u.onerror=u.onload=null,u.setAttribute("status","loaded"),i(u)},u.onerror=function(){u.onerror=u.onload=null,u.setAttribute("status","error"),o(new Error("Failed to load ".concat(e)))};var g=window.document.getElementsByTagName("script")[0];(a=g.parentElement)===null||a===void 0||a.insertBefore(u,g)})}function zi(e){var t=Ht(e);return t!==void 0&&t.remove(),Promise.resolve()}var H={},J={},pt={},Xt={exports:{}};(function(e){e.exports=t(r),e.exports.find=e.exports,e.exports.replace=function(u,d,p,y){return t(i).call(this,u,d,p,y),u},e.exports.del=function(u,d,p){return t(n).call(this,u,d,null,p),u};function t(u){return function(d,p,y,b){var m=b&&a(b.normalizer)?b.normalizer:o;p=m(p);for(var g,w=!1;!w;)I();function I(){for(g in d){var S=m(g);if(p.indexOf(S)===0){var v=p.substr(S.length);if(v.charAt(0)==="."||v.length===0){p=v.substr(1);var h=d[g];if(h==null){w=!0;return}if(!p.length){w=!0;return}d=h;return}}}g=void 0,w=!0}if(g)return d==null?d:u(d,g,y)}}function r(u,d){if(u.hasOwnProperty(d))return u[d]}function n(u,d){return u.hasOwnProperty(d)&&delete u[d],u}function i(u,d,p){return u.hasOwnProperty(d)&&(u[d]=p),u}function o(u){return u.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function a(u){return typeof u=="function"}})(Xt);var Fe=Xt.exports,mn=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pt,"__esModule",{value:!0});var Q=mn(Fe);function oe(e,t){return function(){var r=this.traits(),n=this.properties?this.properties():{};return Q.default(r,"address."+e)||Q.default(r,e)||(t?Q.default(r,"address."+t):null)||(t?Q.default(r,t):null)||Q.default(n,"address."+e)||Q.default(n,e)||(t?Q.default(n,"address."+t):null)||(t?Q.default(n,t):null)}}function bn(e){e.zip=oe("postalCode","zip"),e.country=oe("country"),e.street=oe("street"),e.state=oe("state"),e.city=oe("city"),e.region=oe("region")}pt.default=bn;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.clone=void 0;function Xe(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Xe(e[r]));return t}else return Array.isArray(e)?e.map(Xe):e}Ce.clone=Xe;var ht={};Object.defineProperty(ht,"__esModule",{value:!0});var _n={Salesforce:!0};function wn(e){return!_n[e]}ht.default=wn;var Te={},Yt=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;Te.parse=function(e){var t=[1,5,6,7,11,12],r=Yt.exec(e),n=0;if(!r)return new Date(e);for(var i=0,o;o=t[i];i++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0,r[4]===" "?n=new Date().getTimezoneOffset():r[9]!=="Z"&&r[10]&&(n=r[11]*60+r[12],r[10]==="+"&&(n=0-n));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+n,r[7],r[8]);return new Date(a)};Te.is=function(e,t){return typeof e!="string"||t&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:Yt.test(e)};var vt={},Sn=/\d{13}/;vt.is=function(e){return Sn.test(e)};vt.parse=function(e){return e=parseInt(e,10),new Date(e)};var yt={},In=/\d{10}/;yt.is=function(e){return In.test(e)};yt.parse=function(e){var t=parseInt(e,10)*1e3;return new Date(t)};var Ct=Te,Tt=vt,kt=yt,An=Object.prototype,Zt=An.toString;function On(e){return Zt.call(e)==="[object Date]"}function En(e){return Zt.call(e)==="[object Number]"}var gt=function(t){return On(t)?t:En(t)?new Date(Pn(t)):Ct.is(t)?Ct.parse(t):Tt.is(t)?Tt.parse(t):kt.is(t)?kt.parse(t):new Date(t)};function Pn(e){return e<315576e5?e*1e3:e}var Lt=Te,xn=mt;function mt(e,t){return t===void 0&&(t=!0),e&&typeof e=="object"?jn(e,t):Array.isArray(e)?Dn(e,t):Lt.is(e,t)?Lt.parse(e):e}function jn(e,t){return Object.keys(e).forEach(function(r){e[r]=mt(e[r],t)}),e}function Dn(e,t){return e.forEach(function(r,n){e[n]=mt(r,t)}),e}var we=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J,"__esModule",{value:!0});J.Facade=void 0;var Mn=we(pt),fe=Ce,Fn=we(ht),Cn=we(gt),Ye=we(Fe),Tn=we(xn);function N(e,t){t=t||{},this.raw=fe.clone(e),"clone"in t||(t.clone=!0),t.clone&&(e=fe.clone(e)),"traverse"in t||(t.traverse=!0),"timestamp"in e?e.timestamp=Cn.default(e.timestamp):e.timestamp=new Date,t.traverse&&Tn.default(e),this.opts=t,this.obj=e}J.Facade=N;var j=N.prototype;j.proxy=function(e){var t=e.split(".");e=t.shift();var r=this[e]||this.obj[e];return r&&(typeof r=="function"&&(r=r.call(this)||{}),t.length===0?this.opts.clone?Ze(r):r:(r=Ye.default(r,t.join(".")),this.opts.clone?Ze(r):r))};j.field=function(e){var t=this.obj[e];return this.opts.clone?Ze(t):t};N.proxy=function(e){return function(){return this.proxy(e)}};N.field=function(e){return function(){return this.field(e)}};N.multi=function(e){return function(){var t=this.proxy(e+"s");if(Array.isArray(t))return t;var r=this.proxy(e);return r&&(r=[this.opts.clone?fe.clone(r):r]),r||[]}};N.one=function(e){return function(){var t=this.proxy(e);if(t)return t;var r=this.proxy(e+"s");if(Array.isArray(r))return r[0]}};j.json=function(){var e=this.opts.clone?fe.clone(this.obj):this.obj;return this.type&&(e.type=this.type()),e};j.rawEvent=function(){return this.raw};j.options=function(e){var t=this.obj.options||this.obj.context||{},r=this.opts.clone?fe.clone(t):t;if(!e)return r;if(this.enabled(e)){var n=this.integrations(),i=n[e]||Ye.default(n,e);return typeof i!="object"&&(i=Ye.default(this.options(),e)),typeof i=="object"?i:{}}};j.context=j.options;j.enabled=function(e){var t=this.proxy("options.providers.all");typeof t!="boolean"&&(t=this.proxy("options.all")),typeof t!="boolean"&&(t=this.proxy("integrations.all")),typeof t!="boolean"&&(t=!0);var r=t&&Fn.default(e),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(e)&&(r=n.providers[e]),n.hasOwnProperty(e)){var i=n[e];typeof i=="boolean"?r=i:r=!0}return!!r};j.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()};j.active=function(){var e=this.proxy("options.active");return e==null&&(e=!0),e};j.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")};j.sessionId=j.anonymousId;j.groupId=N.proxy("options.groupId");j.traits=function(e){var t=this.proxy("options.traits")||{},r=this.userId();e=e||{},r&&(t.id=r);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=this[n]==null?this.proxy("options.traits."+n):this[n]();if(i==null)continue;t[e[n]]=i,delete t[n]}return t};j.library=function(){var e=this.proxy("options.library");return e?typeof e=="string"?{name:e,version:null}:e:{name:"unknown",version:null}};j.device=function(){var e=this.proxy("context.device");(typeof e!="object"||e===null)&&(e={});var t=this.library().name;return e.type||(t.indexOf("ios")>-1&&(e.type="ios"),t.indexOf("android")>-1&&(e.type="android")),e};j.userAgent=N.proxy("context.userAgent");j.timezone=N.proxy("context.timezone");j.timestamp=N.field("timestamp");j.channel=N.field("channel");j.ip=N.proxy("context.ip");j.userId=N.field("userId");Mn.default(j);function Ze(e){return fe.clone(e)}var ke={},et={exports:{}};typeof Object.create=="function"?et.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:et.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var te=et.exports,kn=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ke,"__esModule",{value:!0});ke.Alias=void 0;var Ln=kn(te),er=J;function U(e,t){er.Facade.call(this,e,t)}ke.Alias=U;Ln.default(U,er.Facade);U.prototype.action=function(){return"alias"};U.prototype.type=U.prototype.action;U.prototype.previousId=function(){return this.field("previousId")||this.field("from")};U.prototype.from=U.prototype.previousId;U.prototype.userId=function(){return this.field("userId")||this.field("to")};U.prototype.to=U.prototype.userId;var Le={},de={};Object.defineProperty(de,"__esModule",{value:!0});var Nn=/.+\@.+\..+/;function Rn(e){return Nn.test(e)}de.default=Rn;var bt=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Le,"__esModule",{value:!0});Le.Group=void 0;var Bn=bt(te),Un=bt(de),$n=bt(gt),pe=J;function _t(e,t){pe.Facade.call(this,e,t)}Le.Group=_t;Bn.default(_t,pe.Facade);var $=_t.prototype;$.action=function(){return"group"};$.type=$.action;$.groupId=pe.Facade.field("groupId");$.created=function(){var e=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(e)return $n.default(e)};$.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.groupId();if(Un.default(t))return t};$.traits=function(e){var t=this.properties(),r=this.groupId();e=e||{},r&&(t.id=r);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=this[n]==null?this.proxy("traits."+n):this[n]();if(i==null)continue;t[e[n]]=i,delete t[n]}return t};$.name=pe.Facade.proxy("traits.name");$.industry=pe.Facade.proxy("traits.industry");$.employees=pe.Facade.proxy("traits.employees");$.properties=function(){return this.field("traits")||this.field("properties")||{}};var Se={},Ne=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Se,"__esModule",{value:!0});Se.Identify=void 0;var G=J,ce=Ne(Fe),qn=Ne(te),zn=Ne(de),tr=Ne(gt),Y=function(e){return e.trim()};function wt(e,t){G.Facade.call(this,e,t)}Se.Identify=wt;qn.default(wt,G.Facade);var D=wt.prototype;D.action=function(){return"identify"};D.type=D.action;D.traits=function(e){var t=this.field("traits")||{},r=this.userId();e=e||{},r&&(t.id=r);for(var n in e){var i=this[n]==null?this.proxy("traits."+n):this[n]();i!=null&&(t[e[n]]=i,n!==e[n]&&delete t[n])}return t};D.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.userId();if(zn.default(t))return t};D.created=function(){var e=this.proxy("traits.created")||this.proxy("traits.createdAt");if(e)return tr.default(e)};D.companyCreated=function(){var e=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(e)return tr.default(e)};D.companyName=function(){return this.proxy("traits.company.name")};D.name=function(){var e=this.proxy("traits.name");if(typeof e=="string")return Y(e);var t=this.firstName(),r=this.lastName();if(t&&r)return Y(t+" "+r)};D.firstName=function(){var e=this.proxy("traits.firstName");if(typeof e=="string")return Y(e);var t=this.proxy("traits.name");if(typeof t=="string")return Y(t).split(" ")[0]};D.lastName=function(){var e=this.proxy("traits.lastName");if(typeof e=="string")return Y(e);var t=this.proxy("traits.name");if(typeof t=="string"){var r=Y(t).indexOf(" ");if(r!==-1)return Y(t.substr(r+1))}};D.uid=function(){return this.userId()||this.username()||this.email()};D.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")};D.age=function(){var e=this.birthday(),t=ce.default(this.traits(),"age");if(t!=null)return t;if(e instanceof Date){var r=new Date;return r.getFullYear()-e.getFullYear()}};D.avatar=function(){var e=this.traits();return ce.default(e,"avatar")||ce.default(e,"photoUrl")||ce.default(e,"avatarUrl")};D.position=function(){var e=this.traits();return ce.default(e,"position")||ce.default(e,"jobTitle")};D.username=G.Facade.proxy("traits.username");D.website=G.Facade.one("traits.website");D.websites=G.Facade.multi("traits.website");D.phone=G.Facade.one("traits.phone");D.phones=G.Facade.multi("traits.phone");D.address=G.Facade.proxy("traits.address");D.gender=G.Facade.proxy("traits.gender");D.birthday=G.Facade.proxy("traits.birthday");var he={},St=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(he,"__esModule",{value:!0});he.Track=void 0;var Kn=St(te),C=J,Vn=Se,Jn=St(de),rr=St(Fe);function It(e,t){C.Facade.call(this,e,t)}he.Track=It;Kn.default(It,C.Facade);var E=It.prototype;E.action=function(){return"track"};E.type=E.action;E.event=C.Facade.field("event");E.value=C.Facade.proxy("properties.value");E.category=C.Facade.proxy("properties.category");E.id=C.Facade.proxy("properties.id");E.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")};E.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")};E.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")};E.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")};E.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")};E.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")};E.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")};E.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")};E.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")};E.sku=C.Facade.proxy("properties.sku");E.tax=C.Facade.proxy("properties.tax");E.name=C.Facade.proxy("properties.name");E.price=C.Facade.proxy("properties.price");E.total=C.Facade.proxy("properties.total");E.repeat=C.Facade.proxy("properties.repeat");E.coupon=C.Facade.proxy("properties.coupon");E.shipping=C.Facade.proxy("properties.shipping");E.discount=C.Facade.proxy("properties.discount");E.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")};E.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")};E.description=C.Facade.proxy("properties.description");E.plan=C.Facade.proxy("properties.plan");E.subtotal=function(){var e=rr.default(this.properties(),"subtotal"),t=this.total()||this.revenue();if(e)return e;if(!t)return 0;if(this.total()){var r=this.tax();r&&(t-=r),r=this.shipping(),r&&(t-=r),r=this.discount(),r&&(t+=r)}return t};E.products=function(){var e=this.properties(),t=rr.default(e,"products");return Array.isArray(t)?t.filter(function(r){return r!==null}):[]};E.quantity=function(){var e=this.obj.properties||{};return e.quantity||1};E.currency=function(){var e=this.obj.properties||{};return e.currency||"USD"};E.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};E.query=C.Facade.proxy("options.query");E.properties=function(e){var t=this.field("properties")||{};e=e||{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=this[r]==null?this.proxy("properties."+r):this[r]();if(n==null)continue;t[e[r]]=n,delete t[r]}return t};E.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()};E.email=function(){var e=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(e)return e;var t=this.userId();if(Jn.default(t))return t};E.revenue=function(){var e=this.proxy("properties.revenue"),t=this.event(),r=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!e&&t&&t.match(r)&&(e=this.proxy("properties.total")),Gn(e)};E.cents=function(){var e=this.revenue();return typeof e!="number"?this.value()||0:e*100};E.identify=function(){var e=this.json();return e.traits=this.traits(),new Vn.Identify(e,this.opts)};function Gn(e){if(e){if(typeof e=="number")return e;if(typeof e=="string"&&(e=e.replace(/\$/g,""),e=parseFloat(e),!isNaN(e)))return e}}var Ie={},nr=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.Page=void 0;var Qn=nr(te),re=J,Wn=he,Hn=nr(de);function At(e,t){re.Facade.call(this,e,t)}Ie.Page=At;Qn.default(At,re.Facade);var k=At.prototype;k.action=function(){return"page"};k.type=k.action;k.category=re.Facade.field("category");k.name=re.Facade.field("name");k.title=re.Facade.proxy("properties.title");k.path=re.Facade.proxy("properties.path");k.url=re.Facade.proxy("properties.url");k.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};k.properties=function(e){var t=this.field("properties")||{},r=this.category(),n=this.name();e=e||{},r&&(t.category=r),n&&(t.name=n);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=this[i]==null?this.proxy("properties."+i):this[i]();if(o==null)continue;t[e[i]]=o,i!==e[i]&&delete t[i]}return t};k.email=function(){var e=this.proxy("context.traits.email")||this.proxy("properties.email");if(e)return e;var t=this.userId();if(Hn.default(t))return t};k.fullName=function(){var e=this.category(),t=this.name();return t&&e?e+" "+t:t};k.event=function(e){return e?"Viewed "+e+" Page":"Loaded a Page"};k.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new Wn.Track(t,this.opts)};var Re={},Xn=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Re,"__esModule",{value:!0});Re.Screen=void 0;var Yn=Xn(te),ir=Ie,Zn=he;function ee(e,t){ir.Page.call(this,e,t)}Re.Screen=ee;Yn.default(ee,ir.Page);ee.prototype.action=function(){return"screen"};ee.prototype.type=ee.prototype.action;ee.prototype.event=function(e){return e?"Viewed "+e+" Screen":"Loaded a Screen"};ee.prototype.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new Zn.Track(t,this.opts)};var Be={},ei=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Be,"__esModule",{value:!0});Be.Delete=void 0;var ti=ei(te),or=J;function Ot(e,t){or.Facade.call(this,e,t)}Be.Delete=Ot;ti.default(Ot,or.Facade);Ot.prototype.type=function(){return"delete"};(function(e){var t=F&&F.__assign||function(){return t=Object.assign||function(y){for(var b,m=1,g=arguments.length;m<g;m++){b=arguments[m];for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(y[w]=b[w])}return y},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=e.Screen=e.Page=e.Track=e.Identify=e.Group=e.Alias=e.Facade=void 0;var r=J;Object.defineProperty(e,"Facade",{enumerable:!0,get:function(){return r.Facade}});var n=ke;Object.defineProperty(e,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=Le;Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return i.Group}});var o=Se;Object.defineProperty(e,"Identify",{enumerable:!0,get:function(){return o.Identify}});var a=he;Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return a.Track}});var u=Ie;Object.defineProperty(e,"Page",{enumerable:!0,get:function(){return u.Page}});var d=Re;Object.defineProperty(e,"Screen",{enumerable:!0,get:function(){return d.Screen}});var p=Be;Object.defineProperty(e,"Delete",{enumerable:!0,get:function(){return p.Delete}}),e.default=t(t({},r.Facade),{Alias:n.Alias,Group:i.Group,Identify:o.Identify,Track:a.Track,Page:u.Page,Screen:d.Screen,Delete:p.Delete})})(H);function Me(e,t){var r=new H.Facade(e,t);return e.type==="track"&&(r=new H.Track(e,t)),e.type==="identify"&&(r=new H.Identify(e,t)),e.type==="page"&&(r=new H.Page(e,t)),e.type==="alias"&&(r=new H.Alias(e,t)),e.type==="group"&&(r=new H.Group(e,t)),e.type==="screen"&&(r=new H.Screen(e,t)),Object.defineProperty(r,"obj",{value:e,writable:!0}),r}function ar(e,t,r){return A(this,void 0,void 0,function(){function n(p,y){return A(this,void 0,void 0,function(){var b,m,g;return O(this,function(w){switch(w.label){case 0:return b=!1,m=null,[4,y({payload:Me(p,{clone:!0,traverse:!1}),integration:e,next:function(I){b=!0,I===null&&(m=null),I&&(m=I.obj)}})];case 1:return w.sent(),!b&&m!==null&&(m=m,m.integrations=_(_({},p.integrations),(g={},g[e]=!1,g))),[2,m]}})})}var i,o,a,u,d;return O(this,function(p){switch(p.label){case 0:i=Me(t,{clone:!0,traverse:!1}).rawEvent(),o=0,a=r,p.label=1;case 1:return o<a.length?(u=a[o],[4,n(i,u)]):[3,4];case 2:if(d=p.sent(),d===null)return[2,null];i=d,p.label=3;case 3:return o++,[3,1];case 4:return[2,i]}})})}function ri(e,t){function r(n){return A(this,void 0,void 0,function(){var i;return O(this,function(o){switch(o.label){case 0:return i=!1,[4,e({payload:Me(n.event,{clone:!0,traverse:!1}),integrations:t??{},next:function(a){i=!0,a&&(n.event=a.obj)}})];case 1:if(o.sent(),!i)throw new le({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(e.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:r,page:r,identify:r,alias:r,group:r}}const ni=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:ar,sourceMiddlewarePlugin:ri},Symbol.toStringTag,{value:"Module"}));var ii=function(){function e(t,r){this.version="1.0.0",this.alternativeNames=[],this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=r,this.name=t,this.type=r.type,this.alternativeNames.push(r.name)}return e.prototype.addMiddleware=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this.type==="destination"&&(t=this.middleware).push.apply(t,r)},e.prototype.transform=function(t){return A(this,void 0,void 0,function(){var r;return O(this,function(n){switch(n.label){case 0:return[4,ar(this.name,t.event,this.middleware)];case 1:return r=n.sent(),r===null&&t.cancel(new le({retry:!1,reason:"dropped by destination middleware"})),[2,new se(r)]}})})},e.prototype._createMethod=function(t){var r=this;return function(n){return A(r,void 0,void 0,function(){var i;return O(this,function(o){switch(o.label){case 0:return this.action[t]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=o.sent(),o.label=2;case 2:return[4,this.action[t](i)];case 3:return o.sent(),[2,n]}})})}},e.prototype.isLoaded=function(){return this.action.isLoaded()},e.prototype.ready=function(){return this.action.ready?this.action.ready():Promise.resolve()},e.prototype.load=function(t,r){return this.action.load(t,r)},e.prototype.unload=function(t,r){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,t,r)},e}();function oi(e){if(!Array.isArray(e))throw new Error("Not a valid list of plugins");var t=["load","isLoaded","name","version","type"];return e.forEach(function(r){t.forEach(function(n){var i;if(r[n]===void 0)throw new Error("Plugin: ".concat((i=r.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function ai(e,t){var r=e[t.creationName],n=e[t.name];return e.All===!1&&!r&&!n||r===!1||n===!1}function ui(e,t,r,n,i){var o,a,u;return A(this,void 0,void 0,function(){var d,p,y,b,m=this;return O(this,function(g){switch(g.label){case 0:return d=[],p=dt(),y=(a=(o=e.middlewareSettings)===null||o===void 0?void 0:o.routingRules)!==null&&a!==void 0?a:[],b=((u=e.remotePlugins)!==null&&u!==void 0?u:[]).map(function(w){return A(m,void 0,void 0,function(){var I,S,v,h,s,c,f,l,P;return O(this,function(x){switch(x.label){case 0:if(ai(t,w))return[2];x.label=1;case 1:if(x.trys.push([1,12,,13]),!n)return[3,7];I=w.url.split("/"),S=I[I.length-2],v=w.url.replace(S,btoa(S).replace(/=/g,"")),x.label=2;case 2:return x.trys.push([2,4,,6]),[4,Ke(v.replace("https://cdn.june.so",p))];case 3:return x.sent(),[3,6];case 4:return x.sent(),[4,Ke(w.url.replace("https://cdn.june.so",p))];case 5:return x.sent(),[3,6];case 6:return[3,9];case 7:return[4,Ke(w.url.replace("https://cdn.june.so",p))];case 8:x.sent(),x.label=9;case 9:return h=w.libraryName,typeof window[h]!="function"?[3,11]:(s=window[h],[4,s(_(_({},w.settings),r[w.name]))]);case 10:c=x.sent(),f=Array.isArray(c)?c:[c],oi(f),l=y.filter(function(M){return M.destinationName===w.creationName}),f.forEach(function(M){var q=new ii(w.creationName,M);l.length&&i&&M.type==="destination"&&q.addMiddleware(i),d.push(q)}),x.label=11;case 11:return[3,13];case 12:return P=x.sent(),console.warn("Failed to load Remote Plugin",P),[3,13];case 13:return[2]}})})}),[4,Promise.all(b)];case 1:return g.sent(),[2,d.filter(Boolean)]}})})}var si=function(e){var t=!1;window.addEventListener("pagehide",function(){t||(t=!0,e())}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(t)return;t=!0,e()}else t=!1})},ci=500;function ur(e){var t=encodeURI(JSON.stringify(e)).split(/%..|./).length-1;return t/1024}function li(e){return ur(e)>=ci-50}function fi(e){var t=[],r=0;return e.forEach(function(n){var i=ur(t[r]);i>=64&&r++,t[r]?t[r].push(n):t[r]=[n]}),t}function di(e,t){var r,n,i=[],o=!1,a=(r=t==null?void 0:t.size)!==null&&r!==void 0?r:10,u=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:5e3;function d(g){var w;if(g.length!==0){var I=(w=g[0])===null||w===void 0?void 0:w.writeKey;return ut("https://".concat(e,"/b"),{keepalive:o,headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify({batch:g,writeKey:I})})}}function p(){return A(this,void 0,void 0,function(){var g;return O(this,function(w){return i.length?(g=i,i=[],[2,d(g)]):[2]})})}var y;function b(){y||(y=setTimeout(function(){y=void 0,p().catch(console.error)},u))}si(function(){if(o=!0,i.length){var g=fi(i).map(d);Promise.all(g).catch(console.error)}});function m(g,w){return A(this,void 0,void 0,function(){var I;return O(this,function(S){return i.push(w),I=i.length>=a||li(i),[2,I||o?p():b()]})})}return{dispatch:m}}function pi(e){function t(r,n){return ut(r,{keepalive:e==null?void 0:e.keepalive,headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify(n)})}return{dispatch:t}}var hi=function(e,t){return A(void 0,void 0,void 0,function(){var r;return O(this,function(n){return r=function(i){return A(void 0,void 0,void 0,function(){var o;return O(this,function(a){switch(a.label){case 0:return e(i)?(o=r,[4,t()]):[3,2];case 1:return[2,o.apply(void 0,[a.sent()])];case 2:return[2]}})})},[2,r(void 0)]})})};function vi(e,t){return A(this,void 0,void 0,function(){var r,n=this;return O(this,function(i){switch(i.label){case 0:return r=[],je()?[2,t]:[4,hi(function(){return t.length>0&&!je()},function(){return A(n,void 0,void 0,function(){var o,a,u;return O(this,function(d){switch(d.label){case 0:return o=t.pop(),o?[4,me(o,e)]:[2];case 1:return a=d.sent(),u=a instanceof se,u||r.push(o),[2]}})})})];case 1:return i.sent(),r.map(function(o){return t.pushWithBackoff(o)}),[2,t]}})})}function ae(e,t,r,n){var i=this;e||setTimeout(function(){return A(i,void 0,void 0,function(){var o,a;return O(this,function(u){switch(u.label){case 0:return o=!0,[4,vi(r,t)];case 1:return a=u.sent(),o=!1,t.todo>0&&n(o,a,r,n),[2]}})})},Math.random()*5e3)}function yi(e,t){var r,n,i,o,a=e.user();return t.previousId=(i=(n=(r=t.previousId)!==null&&r!==void 0?r:t.from)!==null&&n!==void 0?n:a.id())!==null&&i!==void 0?i:a.anonymousId(),t.userId=(o=t.userId)!==null&&o!==void 0?o:t.to,delete t.from,delete t.to,t}function gi(e,t,r){var n,i;window.addEventListener("pagehide",function(){o.push.apply(o,Array.from(a)),a.clear()});var o=e.options.disableClientPersistence?new it(e.queue.queue.maxAttempts,[]):new ft(e.queue.queue.maxAttempts,"dest-june.so"),a=new Set,u=!1,d=(n=t==null?void 0:t.apiHost)!==null&&n!==void 0?n:"api.june.so/sdk",p=(i=t==null?void 0:t.protocol)!==null&&i!==void 0?i:"https",y="".concat(p,"://").concat(d),b=t==null?void 0:t.deliveryStrategy,m=(b==null?void 0:b.strategy)==="batching"?di(d,b.config):pi(b==null?void 0:b.config);function g(I){return A(this,void 0,void 0,function(){var S,v;return O(this,function(h){return je()?(o.push(I),ae(u,o,w,ae),[2,I]):(a.add(I),S=I.event.type,v=Me(I.event).json(),I.event.type==="track"&&delete v.traits,I.event.type==="alias"&&(v=yi(e,v)),[2,m.dispatch("".concat(y,"/").concat(S),_(_({},Hr(e,v,t,r)),{writeKey:e.settings.writeKey})).then(function(){return I}).catch(function(){return o.pushWithBackoff(I),ae(u,o,w,ae),I}).finally(function(){a.delete(I)})])})})}var w={name:"june.so",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:g,identify:g,page:g,alias:g,group:g};return o.todo&&ae(u,o,w,ae),w}var mi=function(e){return typeof e=="object"&&e!==null&&"then"in e&&typeof e.then=="function"},sr=function(e,t,r){r.getCalls(e).forEach(function(n){Et(t,n).catch(console.error)})},bi=function(e,t){return A(void 0,void 0,void 0,function(){var r,n,i;return O(this,function(o){switch(o.label){case 0:r=0,n=t.getCalls("addSourceMiddleware"),o.label=1;case 1:return r<n.length?(i=n[r],[4,Et(e,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},_i=sr.bind(void 0,"on"),wi=sr.bind(void 0,"setAnonymousId"),Si=function(e,t){t.toArray().forEach(function(r){setTimeout(function(){Et(e,r).catch(console.error)},0)})},Ii=function(){function e(){this._value={}}return e.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this._value))},e.prototype.getCalls=function(t){var r;return(r=this._value[t])!==null&&r!==void 0?r:[]},e.prototype.push=function(){for(var t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.forEach(function(i){t._value[i.method]?t._value[i.method].push(i):t._value[i.method]=[i]}),this},e.prototype.clear=function(){return this._value={},this},e}();function Et(e,t){return A(this,void 0,void 0,function(){var r,n;return O(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t.called?[2,void 0]:(t.called=!0,r=e[t.method].apply(e,t.args),mi(r)?[4,r]:[3,2]);case 1:i.sent(),i.label=2;case 2:return t.resolve(r),[3,4];case 3:return n=i.sent(),t.reject(n),[3,4];case 4:return[2]}})})}var Ai=function(){function e(t){var r=this;this._preInitBuffer=new Ii,this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=_e,this._promise=t(this._preInitBuffer),this._promise.then(function(n){var i=n[0],o=n[1];r.instance=i,r.ctx=o}).catch(function(){})}return e.prototype.then=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).then.apply(t,r)},e.prototype.catch=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).catch.apply(t,r)},e.prototype.finally=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).finally.apply(t,r)},e.prototype._createMethod=function(t){var r=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r.instance){var a=(n=r.instance)[t].apply(n,i);return Promise.resolve(a)}return new Promise(function(u,d){r._preInitBuffer.push({method:t,args:i,resolve:u,reject:d,called:!1})})}},e.prototype._createChainableMethod=function(t){var r=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.instance?((n=r.instance)[t].apply(n,i),r):(r._preInitBuffer.push({method:t,args:i,resolve:function(){},reject:console.error,called:!1}),r)}},e}();function Oi(e){var t=e[0],r=e.slice(1);return{method:t,resolve:function(){},reject:console.error,args:r,called:!1}}var Ei=function(e){return e.map(Oi)},tt=function(){var e=window.analytics;if(!Array.isArray(e))return[];var t=e.splice(0,e.length);return Ei(t)},Ve,Nt,Pi=at(),Rt=(Ve=(Nt=Pi).__SEGMENT_INSPECTOR__)!==null&&Ve!==void 0?Ve:Nt.__SEGMENT_INSPECTOR__={},xi=function(e){var t;return(t=Rt.attach)===null||t===void 0?void 0:t.call(Rt,e)};function ji(e){return e??dt(),{integrations:{}}}function Di(e){return Gt().NODE_ENV!=="test"&&Object.keys(e.integrations).length>1}function Mi(e){var t,r,n;return Gt().NODE_ENV!=="test"&&((n=(r=(t=e.middlewareSettings)===null||t===void 0?void 0:t.routingRules)===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0)>0}function Fi(e,t){t.push.apply(t,tt()),wi(e,t),_i(e,t)}function Ci(e,t){return A(this,void 0,void 0,function(){return O(this,function(r){switch(r.label){case 0:return t.push.apply(t,tt()),[4,bi(e,t)];case 1:return r.sent(),t.push.apply(t,tt()),Si(e,t),t.clear(),[2]}})})}function Ti(e,t,r,n,i,o){var a,u,d;return A(this,void 0,void 0,function(){var p,y,b,m,g,w,I,S,v,h,s,c=this;return O(this,function(f){switch(f.label){case 0:return Mi(e)?[4,B(()=>import("./index-DopHWMLi.js"),__vite__mapDeps([6,3])).then(function(l){return l.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return y=f.sent(),[3,3];case 2:y=void 0,f.label=3;case 3:return p=y,Di(e)||o.length>0?[4,B(()=>import("./index-Cfv48Le7.js"),__vite__mapDeps([7,8,5,1,2,3])).then(function(l){return l.ajsDestinations(e,t.integrations,r,p,o)})]:[3,5];case 4:return m=f.sent(),[3,6];case 5:m=[],f.label=6;case 6:return b=m,e.legacyVideoPluginsEnabled?[4,B(()=>import("./index-HE1ng938.js"),__vite__mapDeps([9,1,2,3])).then(function(l){return l.loadLegacyVideoPlugins(t)})]:[3,8];case 7:f.sent(),f.label=8;case 8:return!((a=r.plan)===null||a===void 0)&&a.track?[4,B(()=>import("./index-CV0nWpGR.js"),__vite__mapDeps([10,8,1,2,3])).then(function(l){var P;return l.schemaFilter((P=r.plan)===null||P===void 0?void 0:P.track,e)})]:[3,10];case 9:return w=f.sent(),[3,11];case 10:w=void 0,f.label=11;case 11:return g=w,I=pn(e,n),[4,ui(e,t.integrations,I,n.obfuscate,p).catch(function(){return[]})];case 12:return S=f.sent(),v=T(T(T([pr,gn],i,!0),b,!0),S,!0),g&&v.push(g),h=((u=r.integrations)===null||u===void 0?void 0:u.All)===!1&&!r.integrations["june.so"]||r.integrations&&r.integrations["june.so"]===!1,h||v.push(gi(t,I["june.so"],e.integrations)),[4,t.register.apply(t,v)];case 13:return s=f.sent(),Object.entries((d=e.enabledMiddleware)!==null&&d!==void 0?d:{}).some(function(l){var P=l[1];return P})?[4,B(()=>import("./index-Caznll5u.js"),__vite__mapDeps([11,1,2,3])).then(function(l){var P=l.remoteMiddlewares;return A(c,void 0,void 0,function(){var x,M;return O(this,function(q){switch(q.label){case 0:return[4,P(s,e,n.obfuscate)];case 1:return x=q.sent(),M=x.map(function(cr){return t.addSourceMiddleware(cr)}),[2,Promise.all(M)]}})})})]:[3,15];case 14:f.sent(),f.label=15;case 15:return[2,s]}})})}function ki(e,t,r){var n,i,o,a,u;return t===void 0&&(t={}),A(this,void 0,void 0,function(){var d,p,y,b,m,g,w,I,S,v,h;return O(this,function(s){switch(s.label){case 0:return e.cdnURL&&dn(e.cdnURL),(n=e.cdnSettings)!==null&&n!==void 0?(p=n,[3,3]):[3,1];case 1:return[4,ji(e.writeKey)];case 2:p=s.sent(),s.label=3;case 3:return d=p,y=!0,b=_({retryQueue:y},t),m=new sn(e,b),xi(m),g=(i=e.plugins)!==null&&i!==void 0?i:[],w=(o=e.classicIntegrations)!==null&&o!==void 0?o:[],zt.initRemoteMetrics(d.metrics),Fi(m,r),[4,Ti(d,m,b,t,g,w)];case 4:return I=s.sent(),S=(a=window.location.search)!==null&&a!==void 0?a:"",v=(u=window.location.hash)!==null&&u!==void 0?u:"",h=S.length?S:v.replace(/(?=#).*(?=\?)/,""),h.includes("ajs_")?[4,m.queryString(h).catch(console.error)]:[3,6];case 5:s.sent(),s.label=6;case 6:return m.initialized=!0,m.emit("initialize",e,t),t.initialPageview&&m.page().catch(console.error),[4,Ci(m,r)];case 7:return s.sent(),[2,[m,I]]}})})}var Li=function(e){L(t,e);function t(){var r=this,n=hn(),i=n.promise,o=n.resolve;return r=e.call(this,function(a){return i.then(function(u){var d=u[0],p=u[1];return ki(d,p,a)})})||this,r._resolveLoadStart=function(a,u){return o([a,u])},r}return t.prototype.load=function(r,n){return n===void 0&&(n={}),this._resolveLoadStart(r,n),this},t.load=function(r,n){return n===void 0&&(n={}),new t().load(r,n)},t.standalone=function(r,n){return t.load({writeKey:r},n).then(function(i){return i[0]})},t}(Ai);class Ni{constructor({token:t}={}){this.analyticsToken=t,this.analytics=null,this.user={}}async init(){if(!this.analyticsToken)return;let[t]=await Li.load({writeKey:this.analyticsToken});this.analytics=t}identify(t){if(!this.analytics||!t)return;this.user=t,this.analytics.identify(this.user.email,{userId:this.user.id,email:this.user.email,name:this.user.name,avatar:this.user.avatar_url});const{accounts:r,account_id:n}=this.user,[i]=r.filter(o=>o.id===n);i&&this.analytics.group(i.id,this.user.id,{name:i.name})}track(t,r={}){this.analytics&&this.analytics.track({userId:this.user.id,event:t,properties:r})}page(t){this.analytics&&this.analytics.page(t)}}const Ki=new Ni(window.analyticsConfig);export{Ki as A,le as C,it as P,A as _,O as a,T as b,_ as c,ar as d,H as e,$i as f,qi as g,ft as h,je as i,me as j,yr as k,Ke as l,pn as m,se as n,Ui as o,hi as p,gr as q,Nr as r,zi as u};
