import{_ as q,u as L,o as M,n as T,e as s,p as o,q as S,m as A,t as m,g as B,a1 as W,l as p,f as G,r as f,c as g,ab as X,a as Y,H as J,i as D,F as y,B as K}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as b}from"./index-BaHWIRRA.js";import{m as Q,u as Z}from"./globalConfig-DaGjiImb.js";import{u as ee,c as te}from"./mutationHelpers-3VTcoJiD.js";import{v as oe,g as se,A as le}from"./AddLabel-CnIX2z1Y.js";import{u as ie}from"./index-C2DForDf.js";import{_ as re}from"./BaseSettingsHeader-CxIYpdLq.js";import{_ as ae}from"./SettingsLayout-CbuFko1M.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./index-DaWXXnfb.js";import"./labelColor-5G4vXyDu.js";import"./BackButton-YZy1EtJv.js";import"./dashboard-CGLIihvy.js";import"./axios-CCb-kr4I.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./Thumbnail-DLjRBBx8.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";const ne={props:{selectedResponse:{type:Object,default:()=>{}}},emits:["close"],setup(){return{v$:ie()}},data(){return{title:"",description:"",showOnSidebar:!0,color:""}},validations:oe,computed:{...Q({uiFlags:"labels/getUIFlags"}),pageTitle(){return`${this.$t("LABEL_MGMT.EDIT.TITLE")} - ${this.selectedResponse.title}`},labelTitleErrorMessage(){const l=se(this.v$);return this.$t(l)}},mounted(){this.setFormValues()},methods:{onClose(){this.$emit("close")},setFormValues(){this.title=this.selectedResponse.title,this.description=this.selectedResponse.description,this.showOnSidebar=this.selectedResponse.show_on_sidebar,this.color=this.selectedResponse.color},editLabel(){this.$store.dispatch("labels/update",{id:this.selectedResponse.id,color:this.color,description:this.description,title:this.title.toLowerCase(),show_on_sidebar:this.showOnSidebar}).then(()=>{b(this.$t("LABEL_MGMT.EDIT.API.SUCCESS_MESSAGE")),setTimeout(()=>this.onClose(),10)}).catch(()=>{b(this.$t("LABEL_MGMT.EDIT.API.ERROR_MESSAGE"))})}}},de={class:"flex flex-col h-auto overflow-auto"},ce={class:"w-full"},ue={class:"flex items-center w-full gap-2"},pe={for:"conversation_creation"},me={class:"flex items-center justify-end w-full gap-2 px-0 py-2"};function Ee(l,i,w,r,a,d){const _=L("woot-modal-header"),E=L("woot-input"),u=L("woot-color-picker"),h=L("woot-button");return M(),T("div",de,[s(_,{"header-title":d.pageTitle},null,8,["header-title"]),o("form",{class:"flex flex-wrap mx-0",onSubmit:i[4]||(i[4]=G((...n)=>d.editLabel&&d.editLabel(...n),["prevent"]))},[s(E,{modelValue:a.title,"onUpdate:modelValue":i[0]||(i[0]=n=>a.title=n),class:S([{error:r.v$.title.$error},"w-full label-name--input"]),label:l.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:l.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:d.labelTitleErrorMessage,onInput:r.v$.title.$touch,onBlur:r.v$.title.$touch},null,8,["modelValue","class","label","placeholder","error","onInput","onBlur"]),s(E,{modelValue:a.description,"onUpdate:modelValue":i[1]||(i[1]=n=>a.description=n),class:S([{error:r.v$.description.$error},"w-full"]),label:l.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:l.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),onInput:r.v$.description.$touch,onBlur:r.v$.description.$touch},null,8,["modelValue","class","label","placeholder","onInput","onBlur"]),o("div",ce,[o("label",null,[A(m(l.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+" ",1),s(u,{modelValue:a.color,"onUpdate:modelValue":i[2]||(i[2]=n=>a.color=n)},null,8,["modelValue"])])]),o("div",ue,[B(o("input",{"onUpdate:modelValue":i[3]||(i[3]=n=>a.showOnSidebar=n),type:"checkbox",value:!0},null,512),[[W,a.showOnSidebar]]),o("label",pe,m(l.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL")),1)]),o("div",me,[s(h,{"is-disabled":r.v$.title.$invalid||l.uiFlags.isUpdating,"is-loading":l.uiFlags.isUpdating},{default:p(()=>[A(m(l.$t("LABEL_MGMT.FORM.EDIT")),1)]),_:1},8,["is-disabled","is-loading"]),s(h,{class:"button clear",onClick:G(d.onClose,["prevent"])},{default:p(()=>[A(m(l.$t("LABEL_MGMT.FORM.CANCEL")),1)]),_:1},8,["onClick"])])],32)])}const Le=q(ne,[["render",Ee],["__scopeId","data-v-f41f6854"]]),_e={class:"min-w-full overflow-x-auto divide-y divide-slate-75 dark:divide-slate-700"},Me={class:"flex-1 divide-y divide-slate-25 dark:divide-slate-800 text-slate-700 dark:text-slate-100"},he={class:"py-4 ltr:pr-4 rtl:pl-4"},ve={class:"mb-1 font-medium break-words text-slate-700 dark:text-slate-100"},fe={class:"py-4 ltr:pr-4 rtl:pl-4"},Te={class:"py-4 leading-6 ltr:pr-4 rtl:pl-4"},Ae={class:"flex items-center"},ge={class:"py-4 min-w-xs"},be={class:"flex gap-1 justify-end"},st={__name:"Index",setup(l){const i=ee(),w=te(),{t:r}=Z(),a=f({}),d=f(!1),_=f(!1),E=f(!1),u=f({}),h=g(()=>i["labels/getLabels"].value),n=g(()=>i["labels/getUIFlags"].value),k=g(()=>` ${u.value.title}?`),F=()=>{d.value=!0},R=()=>{d.value=!1},N=e=>{_.value=!0,u.value=e},$=()=>{_.value=!1},P=e=>{E.value=!0,u.value=e},I=()=>{E.value=!1},V=async e=>{try{await w.dispatch("labels/delete",e),b(r("LABEL_MGMT.DELETE.API.SUCCESS_MESSAGE"))}catch(c){const v=(c==null?void 0:c.message)||r("LABEL_MGMT.DELETE.API.ERROR_MESSAGE");b(v)}finally{a.value[u.value.id]=!1}},x=()=>{a.value[u.value.id]=!0,I(),V(u.value.id)},U=g(()=>[r("LABEL_MGMT.LIST.TABLE_HEADER.NAME"),r("LABEL_MGMT.LIST.TABLE_HEADER.DESCRIPTION"),r("LABEL_MGMT.LIST.TABLE_HEADER.COLOR")]);return X(()=>{w.dispatch("labels/get")}),(e,c)=>{const v=L("woot-button"),C=L("woot-modal"),H=L("woot-delete-modal"),O=J("tooltip");return M(),Y(ae,{"is-loading":n.value.isFetching,"loading-message":e.$t("LABEL_MGMT.LOADING"),"no-records-found":!h.value.length,"no-records-message":e.$t("LABEL_MGMT.LIST.404")},{header:p(()=>[s(re,{title:e.$t("LABEL_MGMT.HEADER"),description:e.$t("LABEL_MGMT.DESCRIPTION"),"link-text":e.$t("LABEL_MGMT.LEARN_MORE"),"feature-name":"labels"},{actions:p(()=>[s(v,{class:"rounded-md button nice",icon:"add-circle",onClick:F},{default:p(()=>[A(m(e.$t("LABEL_MGMT.HEADER_BTN_TXT")),1)]),_:1})]),_:1},8,["title","description","link-text"])]),body:p(()=>[o("table",_e,[o("thead",null,[(M(!0),T(y,null,D(U.value,t=>(M(),T("th",{key:t,class:"py-4 font-semibold text-left ltr:pr-4 rtl:pl-4 text-slate-700 dark:text-slate-300"},m(t),1))),128))]),o("tbody",Me,[(M(!0),T(y,null,D(h.value,(t,j)=>(M(),T("tr",{key:t.title},[o("td",he,[o("span",ve,m(t.title),1)]),o("td",fe,m(t.description),1),o("td",Te,[o("div",Ae,[o("span",{class:"w-4 h-4 mr-1 border border-solid rounded rtl:mr-0 rtl:ml-1 border-slate-50 dark:border-slate-700",style:K({backgroundColor:t.color})},null,4),A(" "+m(t.color),1)])]),o("td",ge,[o("div",be,[B(s(v,{variant:"smooth",size:"tiny","color-scheme":"secondary","class-names":"grey-btn","is-loading":a.value[t.id],icon:"edit",onClick:z=>N(t)},null,8,["is-loading","onClick"]),[[O,e.$t("LABEL_MGMT.FORM.EDIT"),void 0,{top:!0}]]),B(s(v,{variant:"smooth","color-scheme":"alert",size:"tiny",icon:"dismiss-circle","class-names":"grey-btn","is-loading":a.value[t.id],onClick:z=>P(t,j)},null,8,["is-loading","onClick"]),[[O,e.$t("LABEL_MGMT.FORM.DELETE"),void 0,{top:!0}]])])])]))),128))])])]),default:p(()=>[s(C,{show:d.value,"onUpdate:show":c[0]||(c[0]=t=>d.value=t),"on-close":R},{default:p(()=>[s(le,{onClose:R})]),_:1},8,["show"]),s(C,{show:_.value,"onUpdate:show":c[1]||(c[1]=t=>_.value=t),"on-close":$},{default:p(()=>[s(Le,{"selected-response":u.value,onClose:$},null,8,["selected-response"])]),_:1},8,["show"]),s(H,{show:E.value,"onUpdate:show":c[2]||(c[2]=t=>E.value=t),"on-close":I,"on-confirm":x,title:e.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:e.$t("LABEL_MGMT.DELETE.CONFIRM.MESSAGE"),"message-value":k.value,"confirm-text":e.$t("LABEL_MGMT.DELETE.CONFIRM.YES"),"reject-text":e.$t("LABEL_MGMT.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["is-loading","loading-message","no-records-found","no-records-message"])}}};export{st as default};
