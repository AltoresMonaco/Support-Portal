import{m as h}from"./globalConfig-DaGjiImb.js";import{a as u,u as a}from"./index-BaHWIRRA.js";import{E,A as g,a as d}from"./ArticleSettings-u6tJkhap.js";import{J as S,a9 as _}from"./dashboard-CGLIihvy.js";import{_ as C,o as c,n as f,p as T,e as n,q as R,a as w,k,u as s}from"./_plugin-vue_export-helper-CvYNw_mv.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./DashboardIcon-CPXNa31t.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./exports-CsC-x4VI.js";import"./Icon-Dtj3LCzD.js";import"./utils.esm-CA3tRshB.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./Thumbnail-DLjRBBx8.js";import"./index-BO4rcqbh.js";import"./mutationHelpers-3VTcoJiD.js";import"./index-DaWXXnfb.js";import"./keyboardEventListenerMixins-Du6EPVcl.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./MultiselectDropdown-Cp046MCC.js";import"./MultiselectDropdownItems-DEUXvTsY.js";import"./axios-CCb-kr4I.js";import"./globalConfigMixin-BNbqaRx5.js";import"./index-C2DForDf.js";import"./helper-DcGaBm2u.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";const v={components:{EditArticleHeader:E,ArticleEditor:g,ArticleSettings:d},mixins:[S],data(){return{articleTitle:"",articleContent:"",showOpenSidebarButton:!1,showArticleSettings:!0,article:{}}},computed:{...h({currentUserID:"getCurrentUserID",categories:"categories/allCategories"}),articleId(){return this.$route.params.articleSlug},newArticle(){return{title:this.articleTitle,content:this.articleContent}},selectedPortalSlug(){return this.$route.params.portalSlug},categoryId(){return this.categories.length?this.categories[0].id:null}},methods:{onClickGoBack(){this.$router.push({name:"list_all_locale_articles"})},async createNewArticle({...i}){const{title:l,content:o}=i;if(l&&(this.articleTitle=l),o&&(this.articleContent=o),this.articleTitle&&this.articleContent)try{const e=await this.$store.dispatch("articles/create",{portalSlug:this.selectedPortalSlug,content:this.articleContent,title:this.articleTitle,author_id:this.currentUserID,category_id:this.categoryId});this.$router.push({name:"edit_article",params:{articleSlug:e,portalSlug:this.selectedPortalSlug,locale:this.locale,recentlyCreated:!0}}),u(_.CREATE_ARTICLE,{locale:this.locale})}catch(e){this.alertMessage=(e==null?void 0:e.message)||this.$t("HELP_CENTER.CREATE_ARTICLE.API.ERROR_MESSAGE"),a(this.alertMessage)}},openArticleSettings(){this.showArticleSettings=!0},closeArticleSettings(){this.showArticleSettings=!1},saveArticle(){this.alertMessage=this.$t("HELP_CENTER.CREATE_ARTICLE.ERROR_MESSAGE"),a(this.alertMessage)}}},I={class:"flex flex-1 overflow-auto"};function L(i,l,o,e,r,t){const m=s("EditArticleHeader"),p=s("ArticleEditor"),A=s("ArticleSettings");return c(),f("div",I,[T("div",{class:R(["flex-1 flex-shrink-0 px-6 overflow-y-auto",{"flex-grow-1":r.showArticleSettings}])},[n(m,{"back-button-label":i.$t("HELP_CENTER.HEADER.TITLES.ALL_ARTICLES"),"draft-state":"saved","is-sidebar-open":r.showArticleSettings,onBack:t.onClickGoBack,onOpen:t.openArticleSettings,onClose:t.closeArticleSettings,onSaveArticle:t.createNewArticle},null,8,["back-button-label","is-sidebar-open","onBack","onOpen","onClose","onSaveArticle"]),n(p,{article:t.newArticle,onSaveArticle:t.createNewArticle},null,8,["article","onSaveArticle"])],2),r.showArticleSettings?(c(),w(A,{key:0,article:r.article,onSaveArticle:t.saveArticle},null,8,["article","onSaveArticle"])):k("",!0)])}const st=C(v,[["render",L]]);export{st as default};
