import{u as p,r as C,m as A}from"./index-C2DForDf.js";import{u as c}from"./index-BaHWIRRA.js";import{af as E,k as v,o as N}from"./dashboard-CGLIihvy.js";import{_ as w,u as d,o as T,a as g,l as $,p as s,e as r,f as u,q as i,m as L,t as h,g as S,U as b}from"./_plugin-vue_export-helper-CvYNw_mv.js";const O={name:"AddCanned",components:{WootSubmitButton:E,Modal:v,WootMessageEditor:N},props:{responseContent:{type:String,default:""},onClose:{type:Function,default:()=>{}}},setup(){return{v$:p()}},data(){return{shortCode:"",content:this.responseContent||"",addCanned:{showLoading:!1,message:""},show:!0}},validations:{shortCode:{required:C,minLength:A(2)},content:{required:C}},methods:{resetForm(){this.shortCode="",this.content="",this.v$.shortCode.$reset(),this.v$.content.$reset()},addCannedResponse(){this.addCanned.showLoading=!0,this.$store.dispatch("createCannedResponse",{short_code:this.shortCode,content:this.content}).then(()=>{this.addCanned.showLoading=!1,c(this.$t("CANNED_MGMT.ADD.API.SUCCESS_MESSAGE")),this.resetForm(),this.onClose()}).catch(e=>{this.addCanned.showLoading=!1;const o=(e==null?void 0:e.message)||this.$t("CANNED_MGMT.ADD.API.ERROR_MESSAGE");c(o)})}}},R={class:"flex flex-col h-auto overflow-auto"},B={class:"w-full"},G=["placeholder"],x={class:"w-full"},F={class:"editor-wrap"},V={class:"flex flex-row justify-end w-full gap-2 px-0 py-2"};function U(e,o,l,n,a,m){const M=d("woot-modal-header"),D=d("WootMessageEditor"),_=d("WootSubmitButton"),f=d("Modal");return T(),g(f,{show:a.show,"onUpdate:show":o[5]||(o[5]=t=>a.show=t),"on-close":l.onClose},{default:$(()=>[s("div",R,[r(M,{"header-title":e.$t("CANNED_MGMT.ADD.TITLE"),"header-content":e.$t("CANNED_MGMT.ADD.DESC")},null,8,["header-title","header-content"]),s("form",{class:"flex flex-col w-full",onSubmit:o[4]||(o[4]=u(t=>m.addCannedResponse(),["prevent"]))},[s("div",B,[s("label",{class:i({error:n.v$.shortCode.$error})},[L(h(e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.LABEL"))+" ",1),S(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>a.shortCode=t),type:"text",placeholder:e.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.PLACEHOLDER"),onBlur:o[1]||(o[1]=(...t)=>n.v$.shortCode.$touch&&n.v$.shortCode.$touch(...t))},null,40,G),[[b,a.shortCode]])],2)]),s("div",x,[s("label",{class:i({error:n.v$.content.$error})},h(e.$t("CANNED_MGMT.ADD.FORM.CONTENT.LABEL")),3),s("div",F,[r(D,{modelValue:a.content,"onUpdate:modelValue":o[2]||(o[2]=t=>a.content=t),class:i(["message-editor [&>div]:px-1",{editor_warning:n.v$.content.$error}]),"enable-variables":"","enable-canned-responses":!1,placeholder:e.$t("CANNED_MGMT.ADD.FORM.CONTENT.PLACEHOLDER"),onBlur:n.v$.content.$touch},null,8,["modelValue","class","placeholder","onBlur"])])]),s("div",V,[r(_,{disabled:n.v$.content.$invalid||n.v$.shortCode.$invalid||a.addCanned.showLoading,"button-text":e.$t("CANNED_MGMT.ADD.FORM.SUBMIT"),loading:a.addCanned.showLoading},null,8,["disabled","button-text","loading"]),s("button",{class:"button clear",onClick:o[3]||(o[3]=u((...t)=>l.onClose&&l.onClose(...t),["prevent"]))},h(e.$t("CANNED_MGMT.ADD.CANCEL_BUTTON_TEXT")),1)])],32)])]),_:1},8,["show","on-close"])}const H=w(O,[["render",U],["__scopeId","data-v-69cd9915"]]);export{H as A};
