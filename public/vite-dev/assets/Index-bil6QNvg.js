import{c,u as E,H as P,o as s,n,p as o,t as u,e as r,l as _,g as I,r as L,P as x,a as M,i as f,F as C}from"./_plugin-vue_export-helper-CvYNw_mv.js";import{u as h}from"./index-BaHWIRRA.js";import{T as D}from"./Thumbnail-DLjRBBx8.js";import{u as g}from"./globalConfig-DaGjiImb.js";import{_ as F}from"./BaseSettingsHeader-CxIYpdLq.js";import{_ as G}from"./SettingsLayout-CbuFko1M.js";import{u as H,c as Y}from"./mutationHelpers-3VTcoJiD.js";import"./index-Y4OjWrJ-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./BackButton-YZy1EtJv.js";import"./dashboard-CGLIihvy.js";import"./axios-CCb-kr4I.js";import"./globalConfigMixin-BNbqaRx5.js";import"./timeHelper-BT38nsET.js";import"./Spinner-B-aSVz3z.js";import"./index-BO4rcqbh.js";import"./utils.esm-CA3tRshB.js";import"./exports-CsC-x4VI.js";import"./vue-router-CNCrM2WK.js";import"./index-BP-sUqpX.js";import"./index-C2DForDf.js";import"./useKeyboardNavigableList-Cfstgo2Q.js";import"./helper-DcGaBm2u.js";import"./DashboardIcon-CPXNa31t.js";import"./AudioNotificationHelper-CDrFIep2.js";import"./Icon-Dtj3LCzD.js";import"./Validators-eX6_8wdj.js";import"./vue-dompurify-html-DZ5r8uTJ.js";import"./module-CGzIBJZi.js";import"./index-DaWXXnfb.js";const V={class:"py-4 ltr:pr-4 rtl:pl-4 truncate"},j={class:"py-4 ltr:pr-4 rtl:pl-4"},z={key:0,class:"flex items-center"},U={class:"mx-2"},q={key:1},K={class:"py-4 ltr:pr-4 rtl:pl-4"},X={key:0,class:"flex items-center"},J={class:"mx-2"},Q={key:1},W={class:"py-4 ltr:pr-4 rtl:pl-4"},Z={class:"py-4 flex justify-end gap-1"},ee={__name:"MacrosTableRow",props:{macro:{type:Object,required:!0}},emits:["delete"],setup(m){const d=m,{t:v}=g(),a=c(()=>{const e=d.macro.created_by;return e.available_name??e.email??""}),l=c(()=>{const e=d.macro.updated_by;return e.available_name??e.email??""}),p=c(()=>{const e=d.macro.visibility==="global"?"MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL":"MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL";return v(e)});return(e,A)=>{const S=E("woot-button"),T=E("router-link"),R=P("tooltip");return s(),n("tr",null,[o("td",V,u(m.macro.name),1),o("td",j,[m.macro.created_by?(s(),n("div",z,[r(D,{username:a.value,size:"24px"},null,8,["username"]),o("span",U,u(a.value),1)])):(s(),n("div",q,"--"))]),o("td",K,[m.macro.updated_by?(s(),n("div",X,[r(D,{username:l.value,size:"24px"},null,8,["username"]),o("span",J,u(l.value),1)])):(s(),n("div",Q,"--"))]),o("td",W,u(p.value),1),o("td",Z,[r(T,{to:{name:"macros_edit",params:{macroId:m.macro.id}}},{default:_(()=>[I(r(S,{variant:"smooth",size:"tiny","color-scheme":"secondary","class-names":"grey-btn",icon:"edit"},null,512),[[R,e.$t("MACROS.EDIT.TOOLTIP"),void 0,{top:!0}]])]),_:1},8,["to"]),I(r(S,{variant:"smooth","color-scheme":"alert",size:"tiny",icon:"dismiss-circle","class-names":"grey-btn",onClick:A[0]||(A[0]=y=>e.$emit("delete"))},null,512),[[R,e.$t("MACROS.DELETE.TOOLTIP"),void 0,{top:!0}]])])])}}},te={class:"button__content"},oe={class:"min-w-full divide-y divide-slate-75 dark:divide-slate-700"},se={class:"divide-y divide-slate-50 dark:divide-slate-800 text-slate-700 dark:text-slate-300"},Ne={__name:"Index",setup(m){const d=H(),v=Y(),{t:a}=g(),l=L(!1),p=L({}),e=c(()=>d["macros/getMacros"].value),A=c(()=>d["macros/getUIFlags"].value),S=c(()=>` ${p.value.name}?`);x(()=>{v.dispatch("macros/get")});const T=async t=>{try{await v.dispatch("macros/delete",t),h(a("MACROS.DELETE.API.SUCCESS_MESSAGE"))}catch{h(a("MACROS.DELETE.API.ERROR_MESSAGE"))}},R=t=>{l.value=!0,p.value=t},y=()=>{l.value=!1},b=()=>{y(),T(p.value.id)},B=c(()=>[a("MACROS.LIST.TABLE_HEADER.NAME"),a("MACROS.LIST.TABLE_HEADER.CREATED BY"),a("MACROS.LIST.TABLE_HEADER.LAST_UPDATED_BY"),a("MACROS.LIST.TABLE_HEADER.VISIBILITY")]);return(t,O)=>{const $=E("fluent-icon"),k=E("router-link"),N=E("woot-delete-modal");return s(),M(G,{"no-records-message":t.$t("MACROS.LIST.404"),"no-records-found":!e.value.length,"is-loading":A.value.isFetching,"loading-message":t.$t("MACROS.LOADING"),"feature-name":"macros"},{header:_(()=>[r(F,{title:t.$t("MACROS.HEADER"),description:t.$t("MACROS.DESCRIPTION"),"link-text":t.$t("MACROS.LEARN_MORE"),"feature-name":"macros"},{actions:_(()=>[r(k,{to:{name:"macros_new"},class:"button rounded-md primary"},{default:_(()=>[r($,{icon:"add-circle"}),o("span",te,u(t.$t("MACROS.HEADER_BTN_TXT")),1)]),_:1})]),_:1},8,["title","description","link-text"])]),body:_(()=>[o("table",oe,[o("thead",null,[(s(!0),n(C,null,f(B.value,i=>(s(),n("th",{key:i,class:"py-4 ltr:pr-4 rtl:pl-4 text-left font-semibold text-slate-700 dark:text-slate-300"},u(i),1))),128))]),o("tbody",se,[(s(!0),n(C,null,f(e.value,(i,w)=>(s(),M(ee,{key:w,macro:i,onDelete:ae=>R(i)},null,8,["macro","onDelete"]))),128))])]),r(N,{show:l.value,"onUpdate:show":O[0]||(O[0]=i=>l.value=i),"on-close":y,"on-confirm":b,title:t.$t("LABEL_MGMT.DELETE.CONFIRM.TITLE"),message:t.$t("MACROS.DELETE.CONFIRM.MESSAGE"),"message-value":S.value,"confirm-text":t.$t("MACROS.DELETE.CONFIRM.YES"),"reject-text":t.$t("MACROS.DELETE.CONFIRM.NO")},null,8,["show","title","message","message-value","confirm-text","reject-text"])]),_:1},8,["no-records-message","no-records-found","is-loading","loading-message"])}}};export{Ne as default};
